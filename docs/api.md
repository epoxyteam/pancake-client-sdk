NAV\\
 ![Navbar](https://api-docs.pancake.vn/images/navbar-cad8cdcb.png)](https://api-docs.pancake.vn/#)

![Logo](https://api-docs.pancake.vn/images/logo-be203150.png)

- [GIỚI THIÊU](https://api-docs.pancake.vn/#gi-i-thieu)
- [CẤU HÌNH CHUNG](https://api-docs.pancake.vn/#c-u-hinh-chung)  - [MÔI TRƯỜNG](https://api-docs.pancake.vn/#moi-tr-ng)
- [XÁC THỰC TÀI KHOẢN](https://api-docs.pancake.vn/#xac-th-c-tai-kho-n)  - [TẠO API KEY](https://api-docs.pancake.vn/#t-o-api-key)
- [Cửa hàng](https://api-docs.pancake.vn/#c-a-hang)  - [Thông tin cửa hàng](https://api-docs.pancake.vn/#thong-tin-c-a-hang)
- [Địa chỉ](https://api-docs.pancake.vn/#d-a-ch)  - [Danh sách tỉnh thành phố](https://api-docs.pancake.vn/#danh-sach-t-nh-thanh-ph)
  - [Danh sách quận huyện](https://api-docs.pancake.vn/#danh-sach-qu-n-huy-n)
  - [Danh sách phường xã](https://api-docs.pancake.vn/#danh-sach-ph-ng-xa)
- [Đơn hàng](https://api-docs.pancake.vn/#d-n-hang)  - [Danh sách đơn hàng](https://api-docs.pancake.vn/#danh-sach-d-n-hang)
  - [Lấy thông tin 1 đơn hàng](https://api-docs.pancake.vn/#l-y-thong-tin-1-d-n-hang)
  - [Tạo đơn hàng](https://api-docs.pancake.vn/#t-o-d-n-hang)
  - [Cập nhật đơn hàng](https://api-docs.pancake.vn/#c-p-nh-t-d-n-hang)
  - [Danh sách nguồn đơn hàng](https://api-docs.pancake.vn/#danh-sach-ngu-n-d-n-hang)
  - [Lấy liên kết in đơn](https://api-docs.pancake.vn/#l-y-lien-k-t-in-d-n)
  - [Lấy liên kết xác nhận đơn hàng](https://api-docs.pancake.vn/#l-y-lien-k-t-xac-nh-n-d-n-hang)
  - [Danh sách khuyến mại nâng cao của đơn](https://api-docs.pancake.vn/#danh-sach-khuy-n-m-i-nang-cao-c-a-d-n)
- [Thông tin đơn hàng](https://api-docs.pancake.vn/#thong-tin-d-n-hang)  - [advanced\_platform\_fee (1.0)](https://api-docs.pancake.vn/#advanced_platform_fee-1-0)
  - [customer (1.1)](https://api-docs.pancake.vn/#customer-1-1)
  - [tags (1.2)](https://api-docs.pancake.vn/#tags-1-2)
  - [partner (1.3)](https://api-docs.pancake.vn/#partner-1-3)
  - [items (1.4)](https://api-docs.pancake.vn/#items-1-4)
  - [shipping\_address (1.5)](https://api-docs.pancake.vn/#shipping_address-1-5)
  - [activated\_promotion\_advances (1.6)](https://api-docs.pancake.vn/#activated_promotion_advances-1-6)
  - [Trạng thái đơn hàng](https://api-docs.pancake.vn/#tr-ng-thai-d-n-hang)
- [Đơn hàng đổi trả](https://api-docs.pancake.vn/#d-n-hang-d-i-tr)  - [Danh sách đơn hàng đổi trả](https://api-docs.pancake.vn/#danh-sach-d-n-hang-d-i-tr)
- [Kho hàng](https://api-docs.pancake.vn/#kho-hang)  - [Tạo kho hàng](https://api-docs.pancake.vn/#t-o-kho-hang)
  - [Cập nhật kho hàng](https://api-docs.pancake.vn/#c-p-nh-t-kho-hang)
  - [Danh sách kho hàng](https://api-docs.pancake.vn/#danh-sach-kho-hang)
- [Danh sách nhân viên](https://api-docs.pancake.vn/#danh-sach-nhan-vien)  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-5)
- [Hẹn gọi & nhắc nhở](https://api-docs.pancake.vn/#h-n-g-i-amp-nh-c-nh)  - [Danh sách hẹn gọi & nhắc nhở](https://api-docs.pancake.vn/#danh-sach-h-n-g-i-amp-nh-c-nh)
  - [Tạo hẹn gọi & nhắc nhở](https://api-docs.pancake.vn/#t-o-h-n-g-i-amp-nh-c-nh)
- [Sản phẩm](https://api-docs.pancake.vn/#s-n-ph-m)  - [Tạo sản phẩm](https://api-docs.pancake.vn/#t-o-s-n-ph-m)
  - [Cập nhật thông tin sản phẩm](https://api-docs.pancake.vn/#c-p-nh-t-thong-tin-s-n-ph-m)
  - [Cập nhật tồn kho](https://api-docs.pancake.vn/#c-p-nh-t-t-n-kho)
  - [Cập nhật tồn kho nhiều mẫu mã](https://api-docs.pancake.vn/#c-p-nh-t-t-n-kho-nhi-u-m-u-ma)
  - [Cập nhật sản phẩm cấu thành](https://api-docs.pancake.vn/#c-p-nh-t-s-n-ph-m-c-u-thanh)
  - [Danh sách sản phẩm](https://api-docs.pancake.vn/#danh-sach-s-n-ph-m)
- [Danh mục sản phẩm](https://api-docs.pancake.vn/#danh-m-c-s-n-ph-m)  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-7)
- [Nhóm đơn vị tính](https://api-docs.pancake.vn/#nhom-d-n-v-tinh)  - [Danh sách nhóm ĐVT](https://api-docs.pancake.vn/#danh-sach-nhom-dvt)
- [Đánh giá trên sàn TMĐT](https://api-docs.pancake.vn/#danh-gia-tren-san-tmdt)  - [Danh sách đánh giá](https://api-docs.pancake.vn/#danh-sach-danh-gia)
- [Khách hàng](https://api-docs.pancake.vn/#khach-hang)  - [Danh sách khách hàng](https://api-docs.pancake.vn/#danh-sach-khach-hang)
  - [Tạo khách hàng](https://api-docs.pancake.vn/#t-o-khach-hang)
  - [Cập nhật khách hàng](https://api-docs.pancake.vn/#c-p-nh-t-khach-hang)
  - [Lịch sử điểm thưởng khách hàng](https://api-docs.pancake.vn/#l-ch-s-di-m-th-ng-khach-hang)
  - [Tạo khuyến mãi theo khách hàng](https://api-docs.pancake.vn/#t-o-khuy-n-mai-theo-khach-hang)
- [Ghi chú trao đổi khách hàng](https://api-docs.pancake.vn/#ghi-chu-trao-d-i-khach-hang)  - [Danh sách ghi chú](https://api-docs.pancake.vn/#danh-sach-ghi-chu)
  - [Thêm ghi chú](https://api-docs.pancake.vn/#them-ghi-chu)
- [Cấp độ khách hàng](https://api-docs.pancake.vn/#c-p-d-khach-hang)  - [Danh sách cấp độ khách hàng](https://api-docs.pancake.vn/#danh-sach-c-p-d-khach-hang)
- [Thu chi](https://api-docs.pancake.vn/#thu-chi)  - [Danh sách thu chi](https://api-docs.pancake.vn/#danh-sach-thu-chi)
  - [Tạo phiếu thu chi](https://api-docs.pancake.vn/#t-o-phi-u-thu-chi)
  - [Tạo chi phí quảng cáo](https://api-docs.pancake.vn/#t-o-chi-phi-qu-ng-cao)
- [Báo cáo thông kê](https://api-docs.pancake.vn/#bao-cao-thong-ke)  - [Thống kê đơn hàng](https://api-docs.pancake.vn/#th-ng-ke-d-n-hang)
  - [Danh sách công thức tùy chỉnh](https://api-docs.pancake.vn/#danh-sach-cong-th-c-tuy-ch-nh)
  - [Danh sách số liệu mặc định](https://api-docs.pancake.vn/#danh-sach-s-li-u-m-c-d-nh)
- [Thẻ đơn hàng](https://api-docs.pancake.vn/#th-d-n-hang)  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-18)
- [Phiếu nhập kho](https://api-docs.pancake.vn/#phi-u-nh-p-kho)  - [Danh sách phiếu nhập kho](https://api-docs.pancake.vn/#danh-sach-phi-u-nh-p-kho)
  - [Tạo phiếu nhập kho](https://api-docs.pancake.vn/#t-o-phi-u-nh-p-kho)
  - [Cập nhật phiếu nhập kho](https://api-docs.pancake.vn/#c-p-nh-t-phi-u-nh-p-kho)
  - [Tách phiếu nhập kho](https://api-docs.pancake.vn/#tach-phi-u-nh-p-kho)
- [Phiếu xuất kho](https://api-docs.pancake.vn/#phi-u-xu-t-kho)  - [Danh sách phiếu xuất kho](https://api-docs.pancake.vn/#danh-sach-phi-u-xu-t-kho)
  - [Tạo phiếu xuất kho](https://api-docs.pancake.vn/#t-o-phi-u-xu-t-kho)
  - [Cập nhật phiếu xuất](https://api-docs.pancake.vn/#c-p-nh-t-phi-u-xu-t)
- [Hàng lỗi (theo phiếu xuất)](https://api-docs.pancake.vn/#hang-l-i-theo-phi-u-xu-t)  - [Tạo phiếu xuất hàng lỗi](https://api-docs.pancake.vn/#t-o-phi-u-xu-t-hang-l-i)
  - [Cập nhật phiếu xuất hàng lỗi](https://api-docs.pancake.vn/#c-p-nh-t-phi-u-xu-t-hang-l-i)
- [Chuyển kho](https://api-docs.pancake.vn/#chuy-n-kho)  - [Danh sách chuyển kho](https://api-docs.pancake.vn/#danh-sach-chuy-n-kho)
  - [Tạo phiếu chuyển kho](https://api-docs.pancake.vn/#t-o-phi-u-chuy-n-kho)
  - [Cập nhật phiếu chuyển kho](https://api-docs.pancake.vn/#c-p-nh-t-phi-u-chuy-n-kho)
- [Kiểm hàng](https://api-docs.pancake.vn/#ki-m-hang)  - [Danh sách kiểm hàng](https://api-docs.pancake.vn/#danh-sach-ki-m-hang)
  - [Lấy thông tin 1 phiếu kiểm hàng](https://api-docs.pancake.vn/#l-y-thong-tin-1-phi-u-ki-m-hang)
  - [Tạo phiếu kiểm hàng](https://api-docs.pancake.vn/#t-o-phi-u-ki-m-hang)
  - [Cập nhật kiểm hàng](https://api-docs.pancake.vn/#c-p-nh-t-ki-m-hang)
- [Lịch sử xuất nhập kho](https://api-docs.pancake.vn/#l-ch-s-xu-t-nh-p-kho)  - [Query Parameters](https://api-docs.pancake.vn/#query-parameters-34)
  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-23)
- [Phiếu giảm giá](https://api-docs.pancake.vn/#phi-u-gi-m-gia)  - [Danh sách phiếu giảm giá](https://api-docs.pancake.vn/#danh-sach-phi-u-gi-m-gia)
  - [Lấy thông tin phiếu giảm giá](https://api-docs.pancake.vn/#l-y-thong-tin-phi-u-gi-m-gia)
  - [Tạo phiếu giảm giá](https://api-docs.pancake.vn/#t-o-phi-u-gi-m-gia)
  - [Tạo hàng loạt phiếu giảm giá](https://api-docs.pancake.vn/#t-o-hang-lo-t-phi-u-gi-m-gia)
- [Khuyến mãi](https://api-docs.pancake.vn/#khuy-n-mai)  - [Danh sách khuyến mãi](https://api-docs.pancake.vn/#danh-sach-khuy-n-mai)
  - [Tạo khuyến mãi](https://api-docs.pancake.vn/#t-o-khuy-n-mai)
  - [Cập nhật khuyến mãi](https://api-docs.pancake.vn/#c-p-nh-t-khuy-n-mai)
  - [Danh sách khuyến mãi nâng cao](https://api-docs.pancake.vn/#danh-sach-khuy-n-mai-nang-cao)
  - [Tạo khuyến mãi nâng cao](https://api-docs.pancake.vn/#t-o-khuy-n-mai-nang-cao)
  - [Cập nhật khuyến mãi nâng cao](https://api-docs.pancake.vn/#c-p-nh-t-khuy-n-mai-nang-cao)
- [Combo sản phẩm](https://api-docs.pancake.vn/#combo-s-n-ph-m)  - [Danh sách combo](https://api-docs.pancake.vn/#danh-sach-combo)
- [Tính phí vận chuyển](https://api-docs.pancake.vn/#tinh-phi-v-n-chuy-n)  - [Request Parameters](https://api-docs.pancake.vn/#request-parameters-14)
  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-26)
- [Đơn vị vận chuyển](https://api-docs.pancake.vn/#d-n-v-v-n-chuy-n)  - [Response Parameters](https://api-docs.pancake.vn/#response-parameters-27)
- [WEBHOOK](https://api-docs.pancake.vn/#webhook)  - [Cấu hình Webhook](https://api-docs.pancake.vn/#c-u-hinh-webhook)
  - [Đơn hàng](https://api-docs.pancake.vn/#d-n-hang-2)
  - [CRM](https://api-docs.pancake.vn/#crm)
  - [Khách hàng](https://api-docs.pancake.vn/#khach-hang-2)
  - [Tồn kho](https://api-docs.pancake.vn/#t-n-kho)
- [CRM](https://api-docs.pancake.vn/#crm-2)  - [List of tables](https://api-docs.pancake.vn/#list-of-tables)
  - [Data of table](https://api-docs.pancake.vn/#data-of-table)
  - [Create Record](https://api-docs.pancake.vn/#create-record)
  - [Update Record](https://api-docs.pancake.vn/#update-record)
  - [Create Table](https://api-docs.pancake.vn/#create-table)
  - [List of Profiles](https://api-docs.pancake.vn/#list-of-profiles)
  - [Record History](https://api-docs.pancake.vn/#record-history)

- [Documentation Powered by Pancake](https://pos.pages.fm/)
- [Tiếng Việt](https://api-docs.pancake.vn/) [English](https://api-docs.pancake.vn/en)

# GIỚI THIÊU

Chào mừng bạn đến với API Pancake Pos! Bạn có thể sử dụng API của chúng tôi để truy cập các điểm cuối API của Pancake Pos, có thể nhận thông tin về các đơn hàng trong cơ sở dữ liệu của chúng tôi.

# CẤU HÌNH CHUNG

## MÔI TRƯỜNG

- Production base url: **https://pos.pages.fm/api/v1**

# XÁC THỰC TÀI KHOẢN

`api_key`

## TẠO API KEY

Vào giao diện **Cấu hình -> Cấu hình ứng dụng**

Trong khung `API KEY`, click `Thêm mới`

![Create api](https://api-docs.pancake.vn/images/create_api-c4945d45.png)

# Cửa hàng

## Thông tin cửa hàng

GET /shops?api_key=<api_key> HTTP/1.1


> Response

{ "shops": [
{
"avatar_url": "https://statics.pancake.vn/user-content-dev2.pancake.vn/2022/7/6/8678250807b2285e2752ac2cbbf43925f19a677c.jpeg",
"name": "Shop thời trang",
"pages": [
{
"id": "104438181227821",
"name": "Quần áo",
"platform": "facebook",
"settings": {
"auto_create_order": true
},
"shop_id": 20,
}
]
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| avatar\_url | string | Link hình đại điện |
| name | string | Tên cửa hàng |
| pages | array | Thông tin pages được gộp trong shop |

# Địa chỉ

## Danh sách tỉnh thành phố

GET /geo/provinces HTTP/1.1


> Response

{ "data": [
{
"id": "101",
"name": "Hà Nội",
"name_en": "ha noi"
},
{
"id": "701",
"name": "Hồ Chí Minh",
"name_en": "ho chi minh"
},
{
"id": "221",
"name": "Bắc Giang",
"name_en": "bac giang"
},
{
"id": "207",
"name": "Bắc Kạn",
"name_en": "bac kan"
},
{
"id": "821",
"name": "Bạc Liêu",
"name_en": "bac lieu"
},
...
] }


### HTTP Request

`GET /geo/provinces`

### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| country\_code | true | string | 84 | Mã quốc gia (ví dụ mã quốc gia Viet Nam là 84) |

## Danh sách quận huyện

GET /geo/districts HTTP/1.1


> Response

{ "data": [
{
"id": "10101",
"name": "Quận Ba Đình",
"name_en": "ba dinh"
},
{
"id": "10129",
"name": "Huyện Ba Vì",
"name_en": "ba vi"
},
{
"id": "10155",
"name": "Quận Bắc Từ Liêm",
"name_en": "bac tu liem"
},
{
"id": "10113",
"name": "Quận Cầu Giấy",
"name_en": "cau giay"
},
{
"id": "10141",
"name": "Huyện Chương Mỹ",
"name_en": "chuong my"
},
...
] }


### HTTP Request

`GET /geo/districts`

### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| province\_id | true | string |  | Province id of districts you want to retrieve. Get province id in api [GET /geo/provinces](https://api-docs.pancake.vn/#get-provinces) |

## Danh sách phường xã

GET /geo/communes HTTP/1.1


> Response

{ "data": [
{
"id": "1010115",
"name": "Phường Cống Vị",
"name_en": "cong vi"
},
{
"id": "1010109",
"name": "Phường Điện Biên",
"name_en": "dien bien"
},
{
"id": "1010113",
"name": "Phường Đội Cấn",
"name_en": "doi can"
},
{
"id": "1010119",
"name": "Phường Giảng Võ",
"name_en": "giang vo"
},
{
"id": "1010111",
"name": "Phường Kim Mã",
"name_en": "kim ma"
},
...
] }


### HTTP Request

`GET /geo/communes`

### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| district\_id | true | string |  | District id of communes you want to retrieve. Get district id in api [GET /geo/districts](https://api-docs.pancake.vn/#get-districts) |

# Đơn hàng

## Danh sách đơn hàng

GET /shops/<SHOP_ID>/orders?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"activated_combo_products": {
"combo_product_id": 430000823,
"combo_product_info": {
"combo_product_variations": [
{
"count": 1,
"product_id": "e258399e-792a-43f7-b379-da99712f82f1",
"variation_id": "74592bc7-e3d9-4734-82b0-246d79784602"
}
],
"discount_amount": 10000,
"discount_by_percent": 0,
"name": "combo mẫu mã"
},
"quantity_combo_activated": 1
},
"activated_promotion_advances": [
{
"id": 9027,
"promotion_advance_id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"promotion_advance_info": {
"id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"display_id": 3,
"discount_by_customer_levels": [],
"is_activated": true,
"is_free_shipping": false,
"name": "KM noel",
"type": "coupon",
"end_time": "2024-11-30T16:59:59",
"start_time": "2024-10-31T17:00:00",
"start_price": 100000,
"end_price": 1000000,
"items": [],
"coupon_info": {
"discount": 30000,
"is_percent": false
},
"inserted_at": "2024-11-27T11:19:40",
"used_count": 1,
"updated_at": "2024-11-27T11:19:40",
"warehouse_ids": [],
"priority_level": null,
"group_name": null
}
}
],
"bill_full_name": "hoang anh ",
"bill_phone_number": "0999999999",
"page_id": "256469571178082",
"creator": {
"avatar_url": null,
"fb_id": "2042723249341651",
"id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8",
"name": "Hoang Anh"
},
"id": 1418,
"inserted_at": "2020-05-12T04:51:42",
"updated_at": "2020-05-12T04:51:54",
"is_free_shipping": false,
"is_livestream": true,
"is_live_shopping": false,
"is_smc": false,
"received_at_shop": false,
"partner_fee": 28000,
"post_id": "185187094667903_477083092110915",
"customer_pay_fee": false,
"items": [
{
"components": [
{
"component_id": "1d41c462-5254-4f5c-ba79-f4c0fa53b9c8",
"quantity": 1,
"variation_id": "9bc83da6-9a2c-4cee-bcdb-3f300def870f",
"variation_info": {
"detail": "Kích thước: M",
"id": "Carla Top - AO26 - M",
"images": [
"https://statics.pancake.vn/user-content.pancake.vn/2023/4/19/c308af10b95fad3a1248e765d65d25b589b3f462.jpg"
],
"name": "Carla Top - AO26",
"product_id": "Carla Top - AO26",
"retail_price": 290000
}
}
],
"discount_each_product": 0,
"is_bonus_product": false,
"is_composite": true,
"is_discount_percent": false,
"is_wholesale": false,
"measure_group_id": 860000034,
"one_time_product": false,
"quantity": 1,
"variation_id": "415040f4-ab63-465e-8699-e9ebfff4c6c7",
"product_id": "3487e126-b0d9-4dae-89a9-ee60bef2f4e9",
"variation_info": {
"detail": null,
"fields": null,
"display_id": null,
"name": "aaaaaa",
"product_display_id": null,
"retail_price": 100000,
"weight": 100,
"measure_info": {
"exchange_value": 30,
"measure_id": 61
}
}
}
],
"sub_status": 1,
"note": "",
"note_print": null,
"returned_reason": 1,
"partner": {
"cod": 0,
"custom_partner_id": null,
"extend_code": "S58824.MB25.C3.500020713",
"extend_update": [],
"is_returned": null,
"order_number_vtp": null,
"paid_at": null,
"partner_id": 1,
"sort_code": null,
"system_created": true,
"total_fee": 0,
"updated_at": "2020-05-12T05:18:16"
},
"payment_purchase_histories": [
{
"amount": 869000,
"inserted_at": "2025-02-11T18:18:19.000000",
"ipn_reply": true,
"result_code": "0",
"tags": [
"static"
],
"type": "techcombank",
"voucher_amount": 0
}
],
"warehouse_id": "630744ef-4614-4a70-988c-52e6d78c953c",
"shipping_address": {
"address": "aaaaa",
"commune_id": "2210941",
"country_code": null,
"district_id": "22109",
"full_address": "aaaaa, Xã Bắc Lý, Huyện Hiệp Hòa, Bắc Giang",
"full_name": "hoang anh ",
"phone_number": "0999999999",
"post_code": null,
"province_id": "221"
},
"shipping_fee": 0,
"shop_id": 4,
"status": 0,
"status_name": "new",
"tags": [
{
"id": 2,
"name": "Chờ cọc"
},
{
"id": 3,
"name": "Nhập hàng"
},
{
"id": 13,
"name": "Delay lấy hàng"
}
],
"total_discount": 0,
"warehouse_info": {
"district_id": "10111",
"full_address": "kakakaka, Phường Khương Trung, Quận Thanh Xuân, Hà Nội",
"name": "snappy",
"phone_number": "0999999999",
"province_id": "101"
},
"shopify_abandon_checkout_id": 30120904851641,
"link_confirm_order": "https://order.pke.gg/tracking?id=RyvKXPdNWkGlh2Wk8g70Juca8F03N8O"
},
...
], "page_number": 1, "page_size": 100, "success": true, "total_entries": 1418, "total_pages": 15 }


### Query Parameters

| Parameter | Required | Type | Default | Description | Example |
| --- | --- | --- | --- | --- | --- |
| page\_size | false | int | 30 |  |  |
| page\_number | false | int | 1 |  |  |
| search | false | string | null | Số điện thoại, tên khách hàng, ghi chú, ... |  |
| filter\_status | false | array | null | Trạng thái đơn hàng | \[0, 1\] |
| updateStatus | false | string / int | inserted\_at | Lọc đơn hàng theo thời gian |  |
| startDateTime | false | unix timestamp | null | Ngày bắt đầu | 1699635600 |
| endDateTime | false | unix timestamp | null | Ngày kết thúc | 1699635600 |
| option\_sort | false | string | inserted\_at\_desc | Thứ tự đơn hàng |  |
| fields | false | array | null | Các trường trả về | \["id", "bill\_phone\_number", ...\] |
| partner\_id | false | array | null | Mã ĐVVC | \[1, 3\] |
| customer\_id | false | uid | null | Mã khách hàng |  |
| order\_sources | false | array | null | \[\[Mã nguồn đơn hàng, Mã TK nguồn đơn hàng\], ...\] | \[\["-1", "314"\], \["-3"\]\] |
| is\_filter\_exclude\_source | false | boolean | false | Loại trừ nguồn đơn hàng | true |

| updateStatus | Lọc đơn hàng theo thời gian |
| --- | --- |
| inserted\_at | Tạo đơn hàng |
| updated\_at | Cập nhật cuối |
| partner\_inserted\_at | Đẩy đơn sang DVVC |
| paid\_at | Đối soát |
| estimate\_delivery\_date | Dự kiến nhận hàng |
| picked\_up\_at | DVVC lấy hàng lúc |
| first\_delivery\_at | DVVC giao lần đầu lúc |
| transfer\_proof | Xác thực chuyển khoản |
| time\_assign\_seller | Phân công nhân viên xử lý |
| time\_assign\_care | Thời điểm phân công NV chăm sóc |
| time\_assign\_marketer | Thời điểm phân công marketer |
| -1 | Lần cuối cập nhật trạng thái |
| 0 | Mới |
| 11 | Chờ hàng |
| 20 | Đã đặt hàng |
| 1 | Đã xác nhận |
| 12 | Chờ in |
| 13 | Đã in |
| 8 | Đang đóng hàng |
| 9 | Chờ chuyển hàng |
| 2 | Đã gửi hàng |
| 3 | Đã nhận |
| 16 | Đã thu tiền |
| 4 | Đang trả hàng |
| 15 | Hoàn 1 phần |
| 5 | Đã hoàn |

| option\_sort | Thứ tự đơn hàng |
| --- | --- |
| inserted\_at\_desc | Thời điểm tạo đơn giảm dần |
| inserted\_at\_asc | Thời điểm tạo đơn tăng dần |
| last\_updated\_order\_desc | Thời điểm cập nhật cuối giảm dần |
| last\_updated\_order\_asc | Thời điểm cập nhật cuối tăng dần |
| last\_update\_status\_at\_desc | Thời điểm cập nhật trạng thái giảm dần |
| last\_update\_status\_at\_asc | Thời điểm cập nhật trạng thái tăng dần |
| order\_valuation\_desc | Giá trị đơn hàng giảm dần |
| order\_valuation\_asc | Giá trị đơn hàng tăng dần |
| product\_quantity\_desc | Số lượng sản phẩm giảm dần |
| product\_quantity\_asc | Số lượng sản phẩm tăng dần |
| product\_name\_desc | Tên sản phẩm giảm dần |
| product\_name\_asc | Tên sản phẩm tăng dần |
| sub\_status\_sort\_desc | Cập nhật delay giao hàng giảm dần |
| sub\_status\_sort\_asc | Cập nhật delay giao hàng tăng dần |
| first\_undeliverable\_at\_desc | Cập nhật giao không thành giảm dần |
| first\_undeliverable\_at\_asc | Cập nhật giao không thành tăng dần |
| customer\_sort\_desc | Tên khách hàng giảm dần |
| customer\_sort\_asc | Tên khách hàng tăng dần |
| estimate\_delivery\_date\_desc | Dự kiến nhận hàng giảm dần |
| estimate\_delivery\_date\_asc | Dự kiến nhận hàng tăng dần |
| order\_source\_desc | Nguồn đơn hàng giảm dần |
| order\_source\_asc | Nguồn đơn hàng tăng dần |

Lấy danh sách đơn hàng thông tin từng đơn hàng cụ thể

## Lấy thông tin 1 đơn hàng

GET /shops/<SHOP_ID>/orders/<ORDER_ID>?api_key=<api_key> HTTP/1.1


> Response

{ "activated_combo_products": { "combo_product_id": 430000823, "combo_product_info": { "combo_product_variations": [
{
"count": 1,
"product_id": "e258399e-792a-43f7-b379-da99712f82f1",
"variation_id": "74592bc7-e3d9-4734-82b0-246d79784602"
}
], "discount_amount": 10000, "discount_by_percent": 0, "name": "combo mẫu mã" }, "quantity_combo_activated": 1 }, "activated_promotion_advances": [
{
"id": 9027,
"promotion_advance_id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"promotion_advance_info": {
"id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"display_id": 3,
"discount_by_customer_levels": [],
"is_activated": true,
"is_free_shipping": false,
"name": "KM noel",
"type": "coupon",
"end_time": "2024-11-30T16:59:59",
"start_time": "2024-10-31T17:00:00",
"start_price": 100000,
"end_price": 1000000,
"items": [],
"coupon_info": {
"discount": 30000,
"is_percent": false
},
"inserted_at": "2024-11-27T11:19:40",
"used_count": 1,
"updated_at": "2024-11-27T11:19:40",
"warehouse_ids": [],
"priority_level": null,
"group_name": null
}
}
], "bill_full_name": "hoang anh ", "bill_phone_number": "0999999999", "page_id": "256469571178082", "creator": { "avatar_url": null, "fb_id": "2042723249341651", "id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8", "name": "Hoang Anh" }, "id": 1418, "inserted_at": "2020-05-12T04:51:42", "updated_at": "2020-05-12T04:51:54", "is_free_shipping": false, "is_livestream": true, "is_live_shopping": false, "is_smc": false, "received_at_shop": false, "partner_fee": 28000, "post_id": "185187094667903_477083092110915", "fee_marketplace": 4000, "customer_pay_fee": false, "items": [
{
"components": [
{
"component_id": "1d41c462-5254-4f5c-ba79-f4c0fa53b9c8",
"quantity": 1,
"variation_id": "9bc83da6-9a2c-4cee-bcdb-3f300def870f",
"variation_info": {
"detail": "Kích thước: M",
"id": "Carla Top - AO26 - M",
"images": [
"https://statics.pancake.vn/user-content.pancake.vn/2023/4/19/c308af10b95fad3a1248e765d65d25b589b3f462.jpg"
],
"name": "Carla Top - AO26",
"product_id": "Carla Top - AO26",
"retail_price": 290000
}
}
],
"discount_each_product": 0,
"is_bonus_product": false,
"is_composite": true,
"is_discount_percent": false,
"is_wholesale": false,
"measure_group_id": 860000034,
"one_time_product": false,
"quantity": 1,
"variation_id": "415040f4-ab63-465e-8699-e9ebfff4c6c7",
"product_id": "3487e126-b0d9-4dae-89a9-ee60bef2f4e9",
"variation_info": {
"detail": null,
"fields": null,
"display_id": null,
"name": "aaaaaa",
"product_display_id": null,
"retail_price": 100000,
"weight": 100,
"measure_info": {
"exchange_value": 30,
"measure_id": 61
}
}
}
], "sub_status": 1, "note": "", "note_print": null, "returned_reason": 1, "payment_purchase_histories": [
{
"amount": 869000,
"inserted_at": "2025-02-11T18:18:19.000000",
"ipn_reply": true,
"result_code": "0",
"tags": [
"static"
],
"type": "techcombank",
"voucher_amount": 0
}
], "partner": { "cod": 0, "custom_partner_id": null, "extend_code": "S58824.MB25.C3.500020713", "extend_update": [], "is_returned": null, "order_number_vtp": null, "paid_at": null, "partner_id": 1, "sort_code": null, "system_created": true, "total_fee": 0, "updated_at": "2020-05-12T05:18:16" }, "warehouse_id": "630744ef-4614-4a70-988c-52e6d78c953c", "shipping_address": { "address": "aaaaa", "commune_id": "2210941", "country_code": null, "district_id": "22109", "full_address": "aaaaa, Xã Bắc Lý, Huyện Hiệp Hòa, Bắc Giang", "full_name": "hoang anh ", "phone_number": "0999999999", "post_code": null, "province_id": "221" }, "shipping_fee": 0, "shop_id": 4, "status": 0, "status_name": "new", "tags": [
{
"id": 2,
"name": "Chờ cọc"
},
{
"id": 3,
"name": "Nhập hàng"
},
{
"id": 13,
"name": "Delay lấy hàng"
}
], "total_discount": 0, "warehouse_info": { "district_id": "10111", "full_address": "kakakaka, Phường Khương Trung, Quận Thanh Xuân, Hà Nội", "name": "snappy", "phone_number": "0999999999", "province_id": "101" }, "shopify_abandon_checkout_id": 30120904851641, "link_confirm_order": "https://order.pke.gg/tracking?id=RyvKXPdNWkGlh2Wk8g70Juca8F03N8O" }


## Tạo đơn hàng

POST /shops/<SHOP_ID>/orders?api_key=<api_key> HTTP/1.1


> Request

{ "bill_full_name": "hoang anh ", "bill_phone_number": "0999999999", "is_free_shipping": false, "received_at_shop": false, "page_id": "256469571178082", "account": 4, "account_name": "facebook321", "assigning_seller_id": "340644fc-314d-450e-a45f-33343678cab6", "items": [
{
"discount_each_product": 0,
"is_bonus_product": false,
"is_discount_percent": false,
"is_wholesale": false,
"one_time_product": false,
"quantity": 1,
"variation_id": "415040f4-ab63-465e-8699-e9ebfff4c6c7",
"product_id": "3487e126-b0d9-4dae-89a9-ee60bef2f4e9",
"variation_info": {
"detail": null,
"fields": null,
"display_id": null,
"name": "aaaaaa",
"product_display_id": null,
"retail_price": 100000,
"weight": 100
}
}
], "note": "", "note_print": null, "returned_reason": 1, "warehouse_id": "630744ef-4614-4a70-988c-52e6d78c953c", "shipping_address": { "address": "aaaaa", "commune_id": "2210941", "country_code": null, "district_id": "22109", "full_address": "aaaaa, Xã Bắc Lý, Huyện Hiệp Hòa, Bắc Giang", "full_name": "hoang anh ", "phone_number": "0999999999", "post_code": null, "province_id": "221" }, "shipping_fee": 0, "shop_id": 4, "total_discount": 0, "warehouse_info": { "district_id": "10111", "full_address": "kakakaka, Phường Khương Trung, Quận Thanh Xuân, Hà Nội", "name": "snappy", "phone_number": "0999999999", "province_id": "101" }, "custom_id": "Ma0001", "activated_promotion_advances": [
{
"promotion_advance_id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"is_activated": true
}
] }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| bill\_full\_name | false | string | null |  |
| bill\_phone\_number | false | string | null |  |
| is\_free\_shipping | false | boolean | false |  |
| items | true | array | \[\] |  |
| note | false | string | null |  |
| note\_print | false | string | null |  |
| warehouse\_id | true | uid |  |  |
| shipping\_address | true | json |  |  |
| shipping\_fee | false | int | 0 |  |
| shop\_id | true | int |  |  |
| total\_discount | false | int | 0 |  |
| warehouse\_info | false | json |  |  |
| custom\_id | false | string | null |  |
| account | false | int | null |  |
| assigning\_seller\_id | false | uid | null |  |
| activated\_promotion\_advances (1.1) | false | array | null | Thông tin khuyến mại nâng cao |

### Item

| Parameter | Type | Default |
| --- | --- | --- |
| discount\_each\_product | int | 0 |
| is\_bonus\_product | boolean | false |
| is\_discount\_percent | boolean | false |
| is\_wholesale | boolean | false |
| one\_time\_product | boolean | false |
| quantity | int | 0 |
| variation\_id | uid |  |
| product\_id | uid |  |
| variation\_info | json |  |

### activated\_promotion\_advances (1.1)

| Parameter | Type | Description |
| --- | --- | --- |
| promotion\_advance\_id | uid | Mã khuyến mại nâng cao |
| is\_activated | boolean | Áp dụng |

## Cập nhật đơn hàng

PUT /shops/<SHOP_ID>/orders/<ORDER_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "bill_full_name": "hoang anh ", "bill_phone_number": "0999999999", "creator": { "avatar_url": null, "fb_id": "2042723249341651", "id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8", "name": "Hoang Anh" }, "account": 4, "account_name": "facebook321", "assigning_seller_id": "340644fc-314d-450e-a45f-33343678cab6", "id": 1418, "inserted_at": "2020-05-12T04:51:42", "updated_at": "2020-05-12T04:51:54", "is_free_shipping": false, "received_at_shop": false, "cod": 110000, "discount": 20000, "total_price": 100000, "total_price_after_sub_discount": 110000, "page_id": "256469571178082", "charged_by_card": 0, "charged_by_momo": 0, "charged_by_qrpay": 0, "transfer_money": 0, "partner_fee": 28000, "fee_marketplace": 4000, "customer_pay_fee": false, "items": [
{
"discount_each_product": 0,
"is_bonus_product": false,
"is_discount_percent": false,
"is_wholesale": false,
"one_time_product": false,
"quantity": 1,
"variation_id": "415040f4-ab63-465e-8699-e9ebfff4c6c7",
"product_id": "3487e126-b0d9-4dae-89a9-ee60bef2f4e9",
"variation_info": {
"detail": null,
"fields": null,
"display_id": null,
"name": "aaaaaa",
"product_display_id": null,
"retail_price": 100000,
"weight": 100
}
}
], "note": "", "note_print": null, "returned_reason": 1, "partner": { "cod": 0, "custom_partner_id": null, "extend_code": "S58824.MB25.C3.500020713", "extend_update": [], "is_returned": null, "order_number_vtp": null, "paid_at": null, "partner_id": 1, "sort_code": null, "system_created": true, "total_fee": 0, "updated_at": "2020-05-12T05:18:16" }, "warehouse_id": "630744ef-4614-4a70-988c-52e6d78c953c", "shipping_address": { "address": "aaaaa", "commune_id": "2210941", "country_code": null, "district_id": "22109", "full_address": "aaaaa, Xã Bắc Lý, Huyện Hiệp Hòa, Bắc Giang", "full_name": "hoang anh ", "phone_number": "0999999999", "post_code": null, "province_id": "221" }, "shipping_fee": 10000, "shop_id": 4, "status": 0, "status_name": "new", "tags": [
{
"id": 2,
"name": "Chờ cọc"
},
{
"id": 3,
"name": "Nhập hàng"
},
{
"id": 13,
"name": "Delay lấy hàng"
}
], "warehouse_info": { "district_id": "10111", "full_address": "kakakaka, Phường Khương Trung, Quận Thanh Xuân, Hà Nội", "name": "snappy", "phone_number": "0999999999", "province_id": "101" }, "arrange_shipment_marketplace": true, "pick_up_method": "pick_up", "picking_shif_marketplace": "closest", "activated_promotion_advances": [
{
"promotion_advance_id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"is_activated": true
}
] }


| Parameter | Type | Description | Note |
| --- | --- | --- | --- |
| shop\_id | int | Mã shop |  |
| bill\_phone\_number | string | SĐT khách hàng nhận hàng |  |
| bill\_full\_name | string | Tên khách hàng nhận hàng |  |
| id | string | Mã đơn hàng |  |
| warehouse\_id | uid | Mã kho hàng. Lấy theo api [GET /warehouses](https://api-docs.pancake.vn/#get-warehouses) |  |
| is\_free\_shipping | boolean | Phí vận chuyển |  |
| shipping\_fee | int | Phí vận chuyển |  |
| received\_at\_shop | boolean | true: Bán hàng tại quầy<br>false: Bán online |  |
| note\_print | string | Ghi chú đơn hàng |  |
| items | array | Danh sách sản phẩm |  |
| item.discount\_each\_product | int | Khuyến mãi trên từng sản phẩm |  |
| item.is\_discount\_percent | boolean | Khuyến mãi trên từng sản phẩm theo phần trăm |  |
| item.is\_bonus\_product | boolean | Sản phẩm tặng kèm |  |
| item.quantity | int | Số lượng sản phẩm |  |
| item.one\_time\_product | boolean | Sản phẩm thêm nhanh |  |
| item.variation\_info | json | Thông tin chi tiết sản phẩm |  |
| item.variation\_id | uid | Mã mẫu mã. Lấy theo api [GET /variations](https://api-docs.pancake.vn/#get-variations) |  |
| item.product\_id | uid | Mã sản phẩm. Lấy theo api [GET /variations](https://api-docs.pancake.vn/#get-variations) |  |
| province\_id | string | Mã tỉnh thành phố. Lấy theo api [GET /geo/provinces](https://api-docs.pancake.vn/#get-provinces) |  |
| district\_id | string | Mã quận huyện. Lấy theo api [GET /geo/districts](https://api-docs.pancake.vn/#get-district) |  |
| commune\_id | string | Mã phường xã. Lấy theo api [GET/ geo/communes](https://api-docs.pancake.vn/#get-commune) |  |
| shipping\_address | json | Thông tin nhận hàng |  |
| shipping\_address.address | string | Địa chỉ chi tiết nhận hàng(số nhà, tên đường, ....) |  |
| shipping\_address.full\_address | string | Địa chỉ đầy đủ nhận hàng |  |
| shipping\_address.full\_name | string | Tên khách hàng |  |
| shipping\_address.phone\_number | string | Số điện thoại, tên khách hàng, ghi chú, ... |  |
| warehouse\_info | json | Thông tin kho hàng |  |
| note | string | Ghi chú nội bộ |  |
| discount | int | Giảm giá đơn hàng |  |
| is\_wholesale | boolean | Bán sỉ |  |
| inserted\_at | time | Thời điểm tạo |  |
| updated\_at | time | Thời điểm cập nhật trạng thái |  |
| creator | json | Thông tin người tạo đơn |  |
| creator.fb\_id | string | ID facebook người tạo đơn |  |
| creator.name | string | Tên người tạo đơn |  |
| last\_editor | json | Thông tin người chỉnh sửa cuối cùng đơn hàng |  |
| status | int | Trạng thái đơn hàng |  |
| partner.partner\_id | int | Mã ĐVVC |  |
| partner.extend\_code | string | Mã vận đơn |  |
| tags | array | Danh sách thẻ đơn hàng |  |
| tag.id | string | Mã thẻ đơn hàng |  |
| tag.name | string | Tên thẻ đơn hàng |  |
| cod | int | Tổng tiền cần thu |  |
| total\_price | int | Tổng giá trị sản phẩm |  |
| total\_price\_after\_sub\_discount | int | Tổng giá đơn hàng đã trừ chiết khấu |  |
| charged\_by\_momo | int | Số tiền khách thanh toán qua MOMO |  |
| charged\_by\_qrpay | int | Số tiền khách thanh toán qua QRPAY |  |
| charged\_by\_card | int | Số tiền khách quẹt thẻ |  |
| transfer\_money | int | Số tiền khách chuyển khoản |  |
| page\_id | string | Mã Facebook page |  |
| partner\_fee | int | Phí vận chuyển từ ĐVVC |  |
| fee\_marketplace | int | Phí sàn |  |
| customer\_pay\_fee | boolean | false: Shop trả phí ship<br>true: Khách trả phí ship |  |
| account | int | Mã nguồn đơn hàng |  |
| account\_name | string | Tên mã nguồn đơn |  |
| assigning\_seller\_id | uid | Mã nhân viên được phân công |  |
| arrange\_shipment\_marketplace | boolean | Chuẩn bị hàng với đơn từ sàn | Shopee, Lazada, TikTok |
| pick\_up\_method (1.1) | string | Phương thức lấy hàng | Shopee, Tiktok |
| picking\_shif\_marketplace (1.2) | string | Ca lấy hàng | Shopee |
| activated\_promotion\_advances (1.3) | array | Thông tin khuyến mại nâng cao |  |

| (1.1) pick\_up\_method | Phương thức lấy hàng |
| --- | --- |
| pick\_up | ĐVVC lấy hàng |
| drop\_off | Mang hàng ra bưu cục |

| (1.2) picking\_shif\_marketplace | Ca lấy hàng |
| --- | --- |
| closest | Ngày gần nhất |
| farthest | Ngày xa nhất |

### (1.3) activated\_promotion\_advances

| Parameter | Type | Description |
| --- | --- | --- |
| promotion\_advance\_id | uid | Mã khuyến mại nâng cao |
| is\_activated | boolean | Áp dụng |

## Danh sách nguồn đơn hàng

GET /shops/<SHOP_ID>/order_source?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"id": -3,
"inserted_at": "2020-06-10T11:50:07",
"name": "Shopee",
"parent_id": null,
"shop_id": 7,
"updated_at": "2020-06-10T11:50:07"
},
{
"id": 4,
"inserted_at": "2020-06-17T08:41:54",
"name": "40999897",
"parent_id": -3,
"shop_id": 7,
"updated_at": "2020-06-17T08:41:54"
},
{
"id": "1471242102982974",
"inserted_at": "2021-04-22T08:33:15",
"name": "Pancake.vn",
"parent_id": -1,
"shop_id": 20,
"updated_at": "2024-04-08T03:11:25"
}
], "success": true }


### Response Parameters

| Parameter | Type | Description | Example |
| --- | --- | --- | --- |
| shop\_id | int | Mã shop |  |
| id | int / string | Mã nguồn đơn hàng / Mã page |  |
| name | string | Tên nguồn đơn hàng / Tên page |  |
| parent\_id | int | Mã nguồn đơn hàng cha |  |

## Lấy liên kết in đơn

POST /shops/<SHOP_ID>/products/get_logistics_shipping_document?api_key=<api_key> HTTP/1.1


> Request

{ "params": [
{
"order_id": "576551803772635228"
}
] }


> Response

{ "data": [
"https://content.pancake.vn/2-25/2025/3/28/071edc2cc6c728f6c3fa493a2cb033e8f61fb11e.071edc2cc6c728f6c3fa493a2cb033e8f61fb11e"
], "success": true }


### Query Parameters

| Parameter | Required | Type | Example |
| --- | --- | --- | --- |
| document\_type (1.1) | true (Mẫu in sàn) / false | string | SL\_PL |

### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| order\_id | true | string | Mã đơn hàng |

| (1.1) document\_type | Loại in |
| --- | --- |
| SL\_PL | Nhãn vận chuyển + Phiếu đóng gói |
| SHIPPING\_LABEL | Nhãn vận chuyển |
| PICK\_LIST | Phiếu đóng gói |

## Lấy liên kết xác nhận đơn hàng

POST /shops/<SHOP_ID>/orders/get_tracking_url?api_key=<api_key> HTTP/1.1


> Response

{ "url": "https://pke.gg/99gjy3r", "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| url | string | Liên kết xác nhận đơn hàng |

## Danh sách khuyến mại nâng cao của đơn

POST /shops/<SHOP_ID>/orders/get_promotion_advance_active?api_key=<api_key> HTTP/1.1


> Request

Áp dụng cho đơn đã tồn tại { "order_id": "LMP0266310053VNA" }

Áp dụng cho đơn tạo mới { "order": { "shop_id": 224, "received_at_shop": false, "warehouse_id": "73c9505e-0f90-4a18-a1a1-13e1bdac21ee", "order_currency": "VND", "order_sources": -3, "customer": { "shop_customer": { "tags": [
"Tiềm năng"
] } }, "items": [
{
"product_id": "4a6fc152-5989-4202-83d4-a11a2ab28078",
"variation_id": "ad5a7194-034f-49cb-9d27-64fec1f30999",
"quantity": 1,
"variation_info": {
"retail_price": 500000,
"category_ids": [
1572
],
"product_tags": [
196
]
}
}
] } }


### Query Parameters (Đơn đã tồn tại)

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| order\_id | true | string | Mã đơn hàng |

### Query Parameters (Đơn tạo mới)

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| shop\_id | true | int | Mã shop |
| received\_at\_shop | false | boolean | Bán hàng tại quầy |
| warehouse\_id | false | uid | Mã kho hàng |
| order\_currency | false | string | Đơn vị tiền tệ |
| order\_sources | false | int | Mã nguồn đơn hàng |
| customer | false | json | Thông tin khách hàng |
| items | true | array | Thông tin sản phẩm |

# Thông tin đơn hàng

> Response

{ "activated_combo_products": { "combo_product_id": 430000823, "combo_product_info": { "combo_product_variations": [
{
"count": 1,
"product_id": "e258399e-792a-43f7-b379-da99712f82f1",
"variation_id": "74592bc7-e3d9-4734-82b0-246d79784602"
}
], "discount_amount": 10000, "discount_by_percent": 0, "name": "combo mẫu mã" }, "quantity_combo_activated": 1 }, "activated_promotion_advances": [
{
"id": 9027,
"promotion_advance_id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"promotion_advance_info": {
"id": "fb056b32-9cf6-4c5a-92de-0eb94db71121",
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"display_id": 3,
"discount_by_customer_levels": [],
"is_activated": true,
"is_free_shipping": false,
"name": "KM noel",
"type": "coupon",
"end_time": "2024-11-30T16:59:59",
"start_time": "2024-10-31T17:00:00",
"start_price": 100000,
"end_price": 1000000,
"items": [],
"coupon_info": {
"discount": 30000,
"is_percent": false
},
"inserted_at": "2024-11-27T11:19:40",
"used_count": 1,
"updated_at": "2024-11-27T11:19:40",
"warehouse_ids": [],
"priority_level": null,
"group_name": null
}
}
], "advanced_platform_fee": { "affiliate_commission": 1, "diff_shipping_fee": 100, "marketplace_voucher": 100, "payment_fee": 7225, "platform_commission": 100, "seller_transaction_fee": 100, "service_fee": 100, "sfp_service_fee": 100 }, "printing_count": 1, "updated_at": "2023-11-02T09:14:32.661282", "money_to_collect": 430000, "total_price": 430000, "shop_customer_address_id": "d306bedc-9b35-4c7e-b3b1-26815c207dc9", "customer": { "fb_id": null, "id": "691ce908-bc13-4282-a87a-7d3f7e64a5cf", "name": "C Loan", "page_id": null, }, "status": 9, "bill_phone_number": "0941902893", "total_quantity": 2, "time_assign_marketer": "2023-11-02T09:14:32", "is_locked": false, "note_print": "Giao tận tay khách", "creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "status_history": [
{
"avatar_url": null,
"editor": {
"avatar_url": null,
"email": "vuson897654@gmail.com",
"fb_id": "377936050731194",
"id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn",
"phone_number": null
},
"editor_fb": "377936050731194",
"editor_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn",
"old_status": null,
"status": 0,
"updated_at": "2023-11-02T08:48:28"
}
], "duplicated_phone": true, "order_currency": "VND", "note": "Giao tận tay khách", "warehouse_info": { "address": "190 La Thành", "affiliate_id": null, "commune_id": "1012957", "custom_id": null, "district_id": "10129", "ffm_id": null, "full_address": "190 La Thành, Xã Ba Trại, Huyện Ba Vì, Hà Nội", "has_snappy_service": false, "name": "Kho mặc định", "phone_number": "0366452565", "province_id": "101" }, "is_free_shipping": false, "is_livestream": true, "is_live_shopping": false, "is_smc": false, "tags": [61], "charged_by_vnpay": 0, "charged_by_qrpay": 0, "partner_fee": 27000, "post_id": "185187094667903_477083092110915", "custom_id": "SOICUN-12049-10", "last_editor": { "avatar_url": null, "email": "vuson897654@gmail.com", "fb_id": "377936050731194", "id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "name": "Vũ Sơn", "phone_number": null }, "charged_by_momo": 0, "bank_transfer_images": null, "partner": { "delivery_name": null, "delivery_tel": null, "extend_code": "LMP0224531356VNA", "paid_at": null, "partner_id": 57, "picked_up_at": null, "sort_code": "H-THL-1B", "system_created": true, "total_fee": 0, "updated_at": "2023-11-02T09:13:28" }, "payment_purchase_histories": [
{
"amount": 869000,
"inserted_at": "2025-02-11T18:18:19.000000",
"ipn_reply": true,
"result_code": "0",
"tags": [
"static"
],
"type": "techcombank",
"voucher_amount": 0
}
], "id": 103973, "page_id": "104438181227821", "inserted_at": "2023-11-02T08:48:29.136481", "shop_id": 20, "transfer_money": 0, "lock_order_by_user": null, "received_at_shop": false, "assigning_care": { "avatar_url": null, "email": "vuson897654@gmail.com", "fb_id": "377936050731194", "id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "name": "Vũ Sơn", "phone_number": null }, "assigning_seller_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "total_discount": 0, "einvoices": [], "shop_customer_id": "1442ab20-ab99-4c16-ab17-c7ebd4158a00", "charged_by_card": 0, "time_assign_seller": "2023-11-02T08:48:28", "sub_status_history": [], "items": [
{
"components": [
{
"component_id": "1d41c462-5254-4f5c-ba79-f4c0fa53b9c8",
"quantity": 1,
"variation_id": "9bc83da6-9a2c-4cee-bcdb-3f300def870f",
"variation_info": {
"detail": "Kích thước: M",
"id": "Carla Top - AO26 - M",
"images": [
"https://statics.pancake.vn/user-content.pancake.vn/2023/4/19/c308af10b95fad3a1248e765d65d25b589b3f462.jpg"
],
"name": "Carla Top - AO26",
"product_id": "Carla Top - AO26",
"retail_price": 290000
}
}
],
"returned_count": 0,
"note": "sp dễ vỡ",
"id": 37956,
"inserted_at": "2023-11-02T09:13:23.245866",
"measure_group_id": 58,
"variation_info": {
"name": "Áo thời trang Nam Pari",
"custom_id": "Nam Pari TX",
"shop_warranty_policy_id": null,
"inserted_at": "2023-05-17T08:46:39",
"product_id": "Áo thời trang Nam Pari",
"detail": "mau: trang, size: X",
"weight": 700,
"images": [
"https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"
],
"is_accessory": false,
"measure_info": {
"exchange_value": 30,
"measure_id": 61
},
"barcode": "12392-4",
"price_at_counter": 0,
"retail_price": 200000,
},
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"assigning_seller_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd",
"quantity_by_combo_products": [],
"discount_each_product": 0,
"is_bonus_product": false,
"is_composite": true,
"quantity": 2
}
], "sub_status": 1, "estimate_delivery_date": "2023-11-03T08:47:00", "display_id": 12049, "order_sources": "-1", "charged_by_fundiin": 0, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "surcharge": 0, "returned_reason": null, "last_editor_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "is_linked_partner": true, "shipping_fee": 30000, "call_laters": [], "last_update_status_at": "2023-11-02T09:13:28", "discount_by_customer_level": null, "shop_partner_id": 137, "viewing": [], "creator": { "avatar_url": null, "email": "vuson897654@gmail.com", "fb_id": "377936050731194", "id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "name": "Vũ Sơn", "phone_number": null }, "bill_full_name": "C Loan", "order_returned_ids": null, "cost_surcharge": 0, "marketer": { "avatar_url": "https://statics.pancake.vn/user-content-dev2.pancake.vn/2022/1/4/a913bfe540a71b2a2bdf45429f91074cdcfdb170.png", "email": "thanglong96hust@gmail.com", "fb_id": "1137015309792644", "id": "316dcba2-e4ef-4787-b2d2-b02e83c8522c", "name": "Lê Thăng Long", "phone_number": null }, "time_send_partner": "2023-11-02T09:13:28", "charged_by_kredivo": 0, "shipping_address": { "address": "Sn 18 ngách 91 ngõ 9 bãi muối", "commnue_name": "Phường Cao Thắng", "commune_id": "2250115", "country_code": "84", "district_id": "22501", "district_name": "Thành phố Hạ Long", "full_address": "Sn 18 ngách 91 ngõ 9 bãi muối, Phường Cao Thắng, Thành phố Hạ Long, Quảng Ninh", "full_name": "C Loan", "phone_number": "0941902893", "post_code": null, "province_id": "225", "province_name": "Quảng Ninh" }, "discount": 0, "pke_mkter": "316dcba2-e4ef-4787-b2d2-b02e83c8522c", "histories": [
{
"bank_payments": {
"new": {},
"old": null
},
"editor_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"items": [
{
"new": {
"discount_each_product": 0,
"is_discount_percent": false,
"quantity": 2,
"variation_info": {
"fields": [
{
"id": "56e0ac18-3bd0-47ac-91ba-0f4056326c1d",
"keyValue": "TRANG",
"name": "mau",
"value": "trang"
}
],
"measure_info": {
"exchange_value": 2,
"measure_id": 1959
},
"name": "Áo thời trang Nam Pari",
"retail_price": 200000,
"weight": 700
}
},
"old": null,
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd"
}
],
"total_quantity": {
"new": 2,
"old": 0
},
"updated_at": "2023-11-02T09:13:24"
}
], "duplicated_customer": true, "bill_email": "dfadf@gmail.com", "customer_referral_code": null, "assigning_seller": { "avatar_url": null, "email": "vuson897654@gmail.com", "fb_id": "377936050731194", "id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "name": "Vũ Sơn", "phone_number": null }, "tax": 0, "time_assign_care": "2023-11-02T09:14:32", "assigning_care_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "cod": 430000, "customer_pay_fee": false, "cash": 0, "is_from_ecommerce": null, "account": "104438181227821", "note_image": null, "customer_needs": [], "shopify_abandon_checkout_id": 30120904851641, "link_confirm_order": "https://order.pke.gg/tracking?id=RyvKXPdNWkGlh2Wk8g70Juca8F03N8O" }


| Parameter | Type | Description |
| --- | --- | --- |
| advanced\_platform\_fee (1.0) | json | Phí sàn |
| printing\_count | int | Số lần in |
| updated\_at | time | Thời điểm cập nhật trạng thái |
| money\_to\_collect | int | Số tiền cần thu |
| total\_price | int | Tổng giá trị sản phẩm |
| shop\_customer\_address\_id | uid | Mã địa chỉ khách hàng |
| customer (1.1) | json | Thông tin khách hàng |
| status | int | Trạng thái đơn hàng |
| bill\_phone\_number | string | SĐT khách hàng nhận hàng |
| total\_quantity | int | Tổng số lượng |
| time\_assign\_marketer | time | Thời điểm phân công marketer |
| is\_locked | boolean | Khóa đơn hàng |
| note\_print | string | Ghi chú đơn hàng |
| creator\_id | uid | Mã người tạo |
| status\_history | array | Lịch sử cập nhật trạng thái |
| duplicated\_phone | boolean | Trùng số điện thoại |
| order\_currency | string | Đơn vị tiền tệ |
| note | string | Ghi chú nội bộ |
| warehouse\_info | json | Thông tin kho hàng |
| is\_free\_shipping | boolean | Phí vận chuyển |
| tags (1.2) | array | Danh sách thẻ đơn hàng |
| charged\_by\_vnpay | int | Số tiền thanh toán bằng VNPAY |
| charged\_by\_qrpay | int | Số tiền khách thanh toán qua QRPAY |
| partner\_fee | int | Phí vận chuyển từ ĐVVC |
| custom\_id | string | Mã đơn hàng |
| last\_editor | json | Thông tin người chỉnh sửa cuối cùng đơn hàng |
| charged\_by\_momo | int | Số tiền khách thanh toán qua MOMO |
| bank\_transfer\_images | array | Link hình ảnh chuyển khoản |
| id | integer / string (Mã tùy chỉnh) | Mã đơn hàng |
| partner (1.3) | json | Thông tin vận chuyển |
| payment\_purchase\_histories | array | Lịch sử thanh toán |
| page\_id | string | Mã Facebook page |
| inserted\_at | time | Thời điểm tạo |
| shop\_id | int | Mã shop |
| transfer\_money | int | Số tiền khách chuyển khoản |
| lock\_order\_by\_user | uid | Mã người khóa đơn hàng |
| received\_at\_shop | boolean | true: Bán hàng tại quầy<br>false: Bán online |
| assigning\_care | json | Nhân viên chăm sóc |
| assigning\_seller\_id | uid | Mã nhân viên được phân công |
| total\_discount | int | Tổng tiền giảm giá |
| einvoices | array | Thông tin hóa đơn điện tử |
| shop\_customer\_id | uid | Mã khách hàng |
| charged\_by\_card | int | Số tiền khách quẹt thẻ |
| items (1.4) | array | Danh sách sản phẩm |
| estimate\_delivery\_date | time | Dự kiến nhận hàng |
| order\_sources | string | Mã nguồn đơn hàng |
| charged\_by\_fundiin | int | Số tiền thanh toán bằng Fundiin |
| warehouse\_id | uid | Mã kho hàng. Lấy theo api [GET /warehouses](https://api-docs.pancake.vn/#get-warehouses) |
| surcharge | int | Phụ thu |
| returned\_reason | string | Lý do trả lại |
| last\_editor\_id | uid | Mã người sửa cuối |
| is\_linked\_partner | boolean | Liên kết ĐVVC |
| shipping\_fee | int | Phí vận chuyển |
| call\_laters | array | Gọi lại |
| last\_update\_status\_at | time | Thời điểm cập nhật trạng thái cuối |
| discount\_by\_customer\_level | int | Giảm giá bởi cấp độ khách hàng |
| viewing | array | NV đang xem |
| creator | json | Thông tin người tạo đơn |
| creator.fb\_id | string | ID facebook người tạo đơn |
| creator.name | string | Tên người tạo đơn |
| bill\_full\_name | string | Tên khách hàng nhận hàng |
| order\_returned\_ids | uid | Mã đơn trả hàng |
| cost\_surcharge | int | Phụ phí |
| marketer | json | Marketer |
| time\_send\_partner | time | Thời điểm đẩy đơn |
| charged\_by\_kredivo | int | Số tiền thanh toán bằng Kredivo |
| shipping\_address (1.5) | json | Thông tin nhận hàng |
| activated\_combo\_products | json | Thông tin combo được kích hoạt |
| activated\_promotion\_advances (1.6) | array | Thông tin khuyến mãi được kích hoạt |
| discount | int | Chiết khấu |
| pke\_mkter | uid | Mã nhân viên marketer |
| histories | array | Lịch sử |
| duplicated\_customer | boolean | Trùng khách hàng |
| bill\_email | string | Email khách hàng |
| customer\_referral\_code | json | Mã giới thiệu khách hàng |
| assigning\_seller | json | Nhân viên được phân công |
| tax | int | Thuế |
| time\_assign\_care | time | Thời điểm phân công NV chăm sóc |
| assigning\_care\_id | uid | Mã nhân viên chăm sóc |
| cod | int | Tổng tiền cần thu |
| customer\_pay\_fee | boolean | false: Shop trả phí ship<br>true: Khách trả phí ship |
| cash | int | Tiền mặt |
| is\_from\_ecommerce | boolean | Đơn từ sàn |
| account | int | Mã nguồn đơn hàng |
| note\_image | array | Link hình ảnh ghi chú |
| shopify\_abandon\_checkout\_id | int | Id của thanh toán chưa hoàn tất từ Shopify |
| link\_confirm\_order | string | Link xác nhận đơn hàng |
| sub\_status (1.7) | int | Lý do delay giao hàng |
| is\_livestream | boolean | Đơn hàng từ livestream |
| is\_live\_shopping | boolean | Đơn hàng từ live shopping |
| is\_smc | boolean | Đơn hàng từ mua sắm trên Messenger |
| post\_id | string | Mã bài viết |

### advanced\_platform\_fee (1.0)

| Parameter | Type | Description |
| --- | --- | --- |
| affiliate\_commission | int | Phí hoa hồng (Sàn TMĐT) |
| diff\_shipping\_fee | int | Chênh lệch phí vận chuyển (Sàn TMĐT) |
| marketplace\_voucher | int | Sàn trợ giá |
| payment\_fee | int | Phí cố định, giao dịch (Sàn TMĐT) |
| platform\_commission | int | Phí hoa hồng nền tảng (Sàn TMĐT) |
| seller\_transaction\_fee | int | Phí thanh toán (Sàn TMĐT) |
| service\_fee | int | Phí dịch vụ (Sàn TMĐT) |
| sfp\_service\_fee | int | Phí dịch vụ SFP (Sàn TMĐT) |

### customer (1.1)

| Parameter | Type | Description |
| --- | --- | --- |
| fb\_id | string | Mã Fb khách hàng |
| id | uid | Mã khách hàng |
| name | string | Tên khách hàng |
| page\_id | string | Mã Facebook page |

### tags (1.2)

| Parameter | Type | Description |
| --- | --- | --- |
| id | string | Mã thẻ đơn hàng |
| name | string | Tên thẻ đơn hàng |

### partner (1.3)

| Parameter | Type | Description |
| --- | --- | --- |
| delivery\_name | string | Nhân viên giao hàng |
| delivery\_tel | string | SDT nhân viên giao hàng |
| extend\_code | string | Mã vận đơn |
| partner\_id | int | Mã ĐVVC |
| picked\_up\_at | time | Lấy hàng lúc |
| sort\_code | string | Mã vận chuyển rút gọn |
| total\_fee | int | Tổng phí |
| updated\_at | time | Cập nhật lúc |

### items (1.4)

| Parameter | Type | Description |
| --- | --- | --- |
| components | array | Thành phần của sản phẩm |
| note | string | Ghi chú |
| inserted\_at | time | Thời điểm tạo |
| measure\_group\_id | int | Mã nhóm ĐVT |
| discount\_each\_product | int | Khuyến mãi trên từng sản phẩm |
| is\_bonus\_product | boolean | Sản phẩm tặng kèm |
| is\_composite | boolean | Sản phẩm cấu thành |
| is\_discount\_percent | boolean | Khuyến mãi trên từng sản phẩm theo phần trăm |
| is\_wholesale | boolean | Bán sỉ |
| variation\_id | uid | Mã mẫu mã. Lấy theo api [GET /variations](https://api-docs.pancake.vn/#get-variations) |
| product\_id | uid | Mã sản phẩm. Lấy theo api [GET /variations](https://api-docs.pancake.vn/#get-variations) |
| quantity | int | Số lượng sản phẩm |
| measure\_group\_id | int | Mã nhóm ĐVT |
| variation\_info | json | Thông tin chi tiết sản phẩm |
| variation\_info.measure\_info | json | Thông tin ĐVT |
| variation\_info.measure\_info.measure\_id | int | Mã ĐVT |
| variation\_info.measure\_info.exchange\_value | int | Giá trị quy đổi |

### shipping\_address (1.5)

| Parameter | Type | Description |
| --- | --- | --- |
| address | string | Địa chỉ chi tiết nhận hàng(số nhà, tên đường, ....) |
| commnue\_name | string | Phường / Xã |
| commune\_id | string | Mã phường xã. Lấy theo api [GET/ geo/communes](https://api-docs.pancake.vn/#get-commune) |
| country\_code | string | Mã quốc gia (ví dụ mã quốc gia Viet Nam là 84) |
| district\_id | string | Mã quận huyện. Lấy theo api [GET /geo/districts](https://api-docs.pancake.vn/#get-district) |
| district\_name | string | Quận / Huyện |
| full\_address | string | Địa chỉ đầy đủ nhận hàng |
| full\_name | string | Tên khách hàng |
| phone\_number | string | Số điện thoại, tên khách hàng, ghi chú, ... |
| province\_id | string | Mã tỉnh thành phố. Lấy theo api [GET /geo/provinces](https://api-docs.pancake.vn/#get-provinces) |
| province\_name | string | Tỉnh / thành phố |

### activated\_promotion\_advances (1.6)

| Parameter | Type | Description |
| --- | --- | --- |
| id | int | Mã khuyến mãi |
| promotion\_advance\_id | uid | Mã khuyến mãi nâng cao |
| promotion\_advance\_info | json | Thông tin khuyến mại nâng cao |

| sub\_status (1.7) | Lý do delay giao hàng |
| --- | --- |
| 1 | Cần xử lý |
| 2 | Đã xử lý |
| 3 | Đã phản hồi |

### Trạng thái đơn hàng

| Mã trạng thái | Mô tả |
| --- | --- |
| 0 | Mới |
| 17 | Chờ xác nhận |
| 11 | Chờ hàng |
| 12 | Chờ in |
| 13 | Đã in |
| 20 | Đã đặt hàng |
| 1 | Đã xác nhận |
| 8 | Đang đóng hàng |
| 9 | Chờ chuyển hàng |
| 2 | Đã gửi hàng |
| 3 | Đã nhận |
| 16 | Đã thu tiền |
| 4 | Đang trả hàng |
| 15 | Hoàn 1 phần |
| 5 | Đã hoàn |
| 6 | Đã hủy |
| 7 | Đã xóa |
| 10 | Đơn Webcake |
| 21 | Đơn Storecake |

| Partner Status | Tên trạng thái |
| --- | --- |
| request\_received | Mới |
| delay\_pickup | Delay lấy hàng |
| picking\_up | Đang lấy hàng |
| picked\_up | Đã lấy hàng/ đã nhập kho |
| on\_the\_way | Hàng đang ở kho trung chuyển |
| delay\_delivery | Delay giao hàng |
| out\_for\_delivery | Đang giao hàng |
| undeliverable | Giao không thành |
| waiting\_for\_return | Chờ chuyển hoàn |
| delivered | Giao thành công |
| delivered\_cod | Đã đối soát nhận hàng |
| returning | Đang trả hàng |
| returned | Đã hoàn |
| returned\_cod | Đối soát trả hàng |
| canceled | Đã hủy |

| PartnerId | Tên đơn vị vận chuyển |
| --- | --- |
| 0 | Snappy |
| 1 | Giao hàng tiết kiệm |
| 2 | EMS |
| 3 | Viettel Post |
| 4 | 247 |
| 5 | Giao hàng nhanh |
| 17 | Vnpost(Bưu điện) |
| 15 | J&T |
| 16 | Best Inc |
| 9 | DHL |
| 19 | Ninja Van |
| 36 | Nhất Tín Express |
| 39 | Hola Ship |
| 11 | Ahamove |
| 37 | Grab Express |
| 38 | Vạn Phúc Express |
| 32 | SuperShip |
| 33 | ZTO Express |
| 10 | J&T Phi |
| 12 | LBC Express |
| 13 | Lazada Express |
| 42 | Shopee Express |
| 31 | Ninja van Phi |
| 35 | Byaheros |
| 20 | Kerry express |
| 21 | Flash express |
| 22 | Lalamove |
| 23 | J&T Thai |
| 24 | Nim express |
| 25 | Thailand post |
| 26 | Thai parcel |
| 27 | DHL Thai |
| 28 | CJ logistics |
| 29 | Best Express Thai |
| 30 | Ninja van Tha |
| 40 | LWE |

| Returned reason | Mô tả lý do hoàn |
| --- | --- |
| 1 | Do khách hàng |
| 2 | Do nhân viên |
| 3 | Do sản phẩm |
| 4 | Do đơn vị vận chuyển |
| 5 | Do đổi hàng |

# Đơn hàng đổi trả

## Danh sách đơn hàng đổi trả

GET /shops/<SHOP_ID>/orders_returned?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"bill_full_name": "HUy",
"bill_phone_number": "0377666434",
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"custom_id": null,
"discount": 0,
"discount_from_order_to_returned": 0,
"display_id": 636,
"id": 1403,
"inserted_at": "2024-04-25T08:34:50.000000",
"order": {
"prepaid_by_point": {
"money": 0,
"point": 0
},
"surcharge": 0,
"money_to_collect": -80000,
"system_id": 14856,
"shipping_address": {
"address": "Ha nội",
"commnue_name": "Phường Nghĩa Đô",
"commune_id": "1011301",
"country_code": "84",
"district_id": "10113",
"district_name": "Quận Cầu Giấy",
"full_address": "Ha nội, Phường Nghĩa Đô, Quận Cầu Giấy, Hà Nội",
"full_name": "HUy",
"phone_number": "0377666434",
"post_code": null,
"province_id": "101",
"province_name": "Hà Nội"
},
"total_discount": 0,
"status": 0,
"items": [
{
"added_to_cart_quantity": 2,
"discount_each_product": 0,
"exchange_count": 0,
"id": 45373,
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"quantity": 2,
"return_quantity": 0,
"returned_count": 0,
"returning_quantity": 0,
"variation_id": "23f91ea1-5cb8-46a1-a8a6-e3819af9abad",
"variation_info": {
"barcode": "12392-2",
"detail": "mau: xanh, size: X",
"display_id": "Nam Pari XX",
"exact_price": 200000,
"fields": [
{
"id": "283d9e1d-c254-4bad-8d69-19be477f2512",
"keyValue": "XANH",
"name": "mau",
"value": "xanh"
},
{
"id": "968f5f28-d043-4937-911a-9334efede2f1",
"keyValue": "X",
"name": "size",
"value": "X"
}
],
"last_imported_price": 100000,
"name": "Áo thời trang Nam Pari",
"product_display_id": "Áo thời trang Nam Pari",
"retail_price": 200000,
"weight": 700
}
}
],
"cash": 0,
"account_name": "wa_c.us@6282288988901",
"charged_by_qrpay": 0,
"total_quantity": 2,
"account": "46",
"shipping_fee": 20000,
"time_assign_seller": "2024-04-25T08:34:47",
"id": "1485614856",
"total_price": 400000,
"inserted_at": "2024-04-25T08:32:53.064777",
"charged_by_momo": 0,
"prepaid": 0,
"bill_phone_number": "0377666434",
"fee_marketplace": 0,
"total_price_after_sub_discount": 420000,
"order_sources": "-1",
"assigning_seller_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"bill_full_name": "HUy",
"order_currency": "VND",
"shop_id": 20,
"updated_at": "2024-04-25T08:34:52.471988",
"return_fee": false,
"order_link": "https://pos.pages.fm/shop/20/order?order_id=109503",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"cod": -80000,
"is_exchange_order": false,
"exchange_payment": 500000,
"items_length": 1,
"transfer_money": 0,
"estimate_delivery_date": null,
"received_at_shop": false,
"customer_pay_fee": false,
"partner_fee": 0,
"charged_by_card": 0,
"status_name": "new",
},
"order_id": 109503,
"order_id_to_returned": 109502,
"order_to_returned": {
"prepaid_by_point": {
"money": 0,
"point": 0
},
"surcharge": 0,
"money_to_collect": 1020000,
"system_id": 14855,
"shipping_address": {
"address": "Ha nội",
"commnue_name": "Phường Nghĩa Đô",
"commune_code_sicepat": null,
"commune_id": "1011301",
"country_code": "84",
"district_id": "10113",
"district_name": "Quận Cầu Giấy",
"full_address": "Ha nội, Phường Nghĩa Đô, Quận Cầu Giấy, Hà Nội",
"full_name": "HUy",
"phone_number": "0377666434",
"post_code": null,
"province_id": "101",
"province_name": "Hà Nội"
},
"total_discount": 0,
"status": 3,
"time_assign_care": null,
"items": [
{
"added_to_cart_quantity": 2,
"discount_each_product": 0,
"exchange_count": 0,
"id": 45372,
"one_time_product": false,
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"quantity": 2,
"return_quantity": 1,
"returned_count": 0,
"returning_quantity": 1,
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd",
"variation_info": {
"barcode": "12392-4",
"detail": "mau: trang, size: X",
"display_id": "Nam Pari TX",
"exact_price": 200000,
"fields": [
{
"id": "56e0ac18-3bd0-47ac-91ba-0f4056326c1d",
"keyValue": "TRANG",
"name": "mau",
"value": "trang"
},
{
"id": "50c8ba70-db9a-40e0-8198-af2237335bf2",
"keyValue": "X",
"name": "size",
"value": "X"
}
],
"last_imported_price": 100000,
"name": "Áo thời trang Nam Pari",
"product_display_id": "Áo thời trang Nam Pari",
"retail_price": 500000,
"weight": 700
}
}
],
"cash": 0,
"account_name": "wa_c.us@6282288988901",
"charged_by_qrpay": 0,
"total_quantity": 2,
"account": "46",
"shipping_fee": 20000,
"time_assign_seller": "2024-04-25T08:33:47",
"id": "1485514855",
"order_sources_name": "Facebook",
"note": "",
"total_price": 1000000,
"inserted_at": "2024-04-25T08:32:53.064777",
"change_by_orders": [
{
"bill_full_name": "HUy",
"bill_phone_number": "0377666434",
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"custom_id": null,
"discount": 0,
"discount_from_order_to_returned": 0,
"display_id": 636,
"id": 1403,
"inserted_at": "2024-04-25T08:34:50.000000",
"order": {
"prepaid_by_point": {
"money": 0,
"point": 0
},
"surcharge": 0,
"money_to_collect": -80000,
"p_utm_term": null,
"system_id": 14856,
"shipping_address": {
"address": "Ha nội",
"commnue_name": "Phường Nghĩa Đô",
"commune_code_sicepat": null,
"commune_id": "1011301",
"country_code": "84",
"district_id": "10113",
"district_name": "Quận Cầu Giấy",
"full_address": "Ha nội, Phường Nghĩa Đô, Quận Cầu Giấy, Hà Nội",
"full_name": "HUy",
"phone_number": "0377666434",
"post_code": null,
"province_id": "101",
"province_name": "Hà Nội"
},
"total_discount": 0,
"status": 0,
"cash": 0,
"account_name": "wa_c.us@6282288988901",
"charged_by_qrpay": 0,
"total_quantity": 2,
"account": "46",
"shipping_fee": 20000,
"time_assign_seller": "2024-04-25T08:34:47",
"id": "1485614856",
"order_sources_name": "Facebook",
"total_price": 420000,
"inserted_at": "2024-04-25T08:32:53.064777",
"charged_by_momo": 0,
"prepaid": 0,
"bill_phone_number": "0377666434",
"fee_marketplace": 0,
"order_sources": "-1",
"assigning_seller_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"bill_full_name": "HUy",
"order_currency": "VND",
"shop_id": 20,
"updated_at": "2024-04-25T08:34:52.471988",
"return_fee": false,
"order_link": "https://pos.pages.fm/shop/20/order?order_id=109503",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"cod": -80000,
"is_exchange_order": false,
"exchange_payment": 500000,
"transfer_money": 0,
"is_free_shipping": false,
"levera_point": 0,
"received_at_shop": false,
"customer_pay_fee": false,
"partner_fee": 0,
"charged_by_card": 0,
"status_name": "new",
},
"order_id": 109503,
"order_id_to_returned": 109502,
"order_to_returned": {},
"returned_fee": 0,
"returned_items": [
{
"discount_each_product": 0,
"id": 1423,
"is_discount_percent": false,
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"returned_quantity": 1,
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd",
"variation_info": {
"barcode": "12392-4",
"detail": "mau: trang, size: X",
"id": "Nam Pari TX",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/9/29/d05f44dcf2b9f96312d88b718da35aa5317242d6.jpg",
],
"name": "Áo thời trang Nam Pari",
"product_id": "Áo thời trang Nam Pari",
"retail_price": 500000,
"weight": 700,
"wholesale_price": 0,
}
}
],
"shop_customer_id": "fd3388d9-d6a6-4fca-8ef5-9e7647395cf0",
"shop_id": 20,
"status": 0,
"updated_at": "2024-04-25T08:34:50.000000",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da"
}
],
"charged_by_momo": 0,
"prepaid": 0,
"bill_phone_number": "0377666434",
"fee_marketplace": 0,
"post_id": null,
"total_price_after_sub_discount": 1020000,
"order_sources": "-1",
"assigning_seller_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"bill_full_name": "HUy",
"activated_promotion_advances": [],
"order_currency": "VND",
"shop_id": 20,
"updated_at": "2024-04-25T08:34:52.680954",
"order_link": "https://pos.pages.fm/shop/20/order?order_id=109502",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"cod": 1020000,
"is_exchange_order": true,
"exchange_payment": 0,
"items_length": 1,
"transfer_money": 0,
"levera_point": 0,
"received_at_shop": false,
"creator": {
"email": "vuson897654@gmail.com",
"fb_id": "377936050731194",
"id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn",
"phone_number": null
},
"assigning_care_id": null,
"partner_fee": 0,
"charged_by_card": 0,
"status_name": "delivered",
"sub_status": null,
"assigning_care": null,
"note_print": null
},
"returned_fee": 0,
"returned_items": [
{
"discount_each_product": 0,
"id": 1423,
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"returned_quantity": 1,
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd",
"variation_info": {
"barcode": "12392-4",
"detail": "mau: trang, size: X",
"id": "Nam Pari TX",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/9/29/d05f44dcf2b9f96312d88b718da35aa5317242d6.jpg",
],
"name": "Áo thời trang Nam Pari",
"one_time_product_id": null,
"product_id": "Áo thời trang Nam Pari",
"retail_price": 500000,
"retail_price_by_currency": [
{
"currency": "USD",
"retailPriceByCurrency": "100"
},
{
"currency": "VND",
"retailPriceByCurrency": "200000"
}
],
"weight": 700,
}
}
],
"shop_customer_id": "fd3388d9-d6a6-4fca-8ef5-9e7647395cf0",
"shop_id": 20,
"status": 0,
"status_histories": [
{
"editor_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"id": "71d9ecce-986f-4cbe-90be-ddaefb0b4c5a",
"inserted_at": "2024-04-25T08:34:52.000000",
"old_status": null,
"status": 0,
"updated_at": "2024-04-25T08:34:52.000000"
}
],
"tags": [],
"updated_at": "2024-04-25T08:34:50.000000",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 636 }


### Query Parameters

| Parameter | Required | Type | Default | Description | Example |
| --- | --- | --- | --- | --- | --- |
| page | false | int | 1 |  |  |
| page\_size | false | int | 30 |  |  |
| status | false | int | -1 | Trạng thái |  |
| update\_status | false | string / int | inserted\_at | Lọc đơn hàng theo thời gian |  |
| start\_time | false | unix timestamp | null | Ngày bắt đầu | 1699635600 |
| end\_time | false | unix timestamp | null | Ngày kết thúc | 1699635600 |

| update\_status | Lọc đơn hàng theo thời gian |
| --- | --- |
| inserted\_at | Tạo đơn hàng |
| 0 | Mới |
| 2 | Đã gửi hàng |
| 1 | Hoàn tất |
| 4 | Đã hủy |

# Kho hàng

## Tạo kho hàng

POST /shops/<SHOP_ID>/warehouses?api_key=<api_key> HTTP/1.1


> Request

{ "address": "19/349 Minh Khai , Hai bà Trưng, Hà Nội", "batch_config": { "col": "0", "line": "3", "row": "3" }, "commune_id": "1010735", "custom_batch_config": { "custom_config": { "0": "lô 1" } }, "custom_shelf_config": { "custom_config": { "0": "1.1", "1": "1.2", "2": "1.3", "3": "1.4" } }, "country_code": "84", "district_id": "10107", "hide_config_batch_shelf": false, "name": "kho 2", "phone_number": "098765432", "province_id": "101", "shelf_config": { "col": "3" } }


### Query Parameters

| Parameter | Required | Type | Default |
| --- | --- | --- | --- |
| address | false | string | Địa chỉ chi tiết kho hàng(số nhà, đường, ...) |
| batch\_config | false | json | Cấu hình lô |
| country\_code | false | string | Mã quốc gia |
| commune\_id | false | string | Mã phường xã. Lấy theo api [GET/ geo/communes](https://api-docs.pancake.vn/#get-commune) |
| custom\_batch\_config | false | json | Cấu hình lô tùy chỉnh |
| custom\_shelf\_config | false | json | Cấu hình kệ tùy chỉnh |
| district\_id | false | string | Mã quận huyện. Lấy theo api [GET /geo/districts](https://api-docs.pancake.vn/#get-district) |
| hide\_config\_batch\_shelf | false | boolean | Mở cấu hình lô kệ tùy chỉnh |
| province\_id | false | string | Mã tỉnh thành phố. Lấy theo api [GET /geo/provinces](https://api-docs.pancake.vn/#get-provinces) |
| phone\_number | false | string | Số điện thoại kho hàng |
| name | true | string | Tên kho hàng |
| shelf\_config | true | json | Cấu hình kệ |

## Cập nhật kho hàng

PUT /shops/<SHOP_ID>/warehouses/<WAREHOUSE_ID>/?api_key=<api_key> HTTP/1.1


> Request

{ "address": "190 La Thành", "batch_config": { "col": "0", "line": "3", "row": "3" }, "commune_id": "1011309", "custom_batch_config": { "custom_config": { "0": "lô 1" } }, "custom_shelf_config": { "custom_config": { "0": "1.1", "1": "1.2", "2": "1.3", "3": "1.4" } }, "district_id": "10113", "hide_config_batch_shelf": false, "name": "Kho mặc định", "phone_number": "0366452565", "province_id": "101", "shelf_config": { "col": "3" } }


### Query Parameters

| Parameter | Required | Type | Default |
| --- | --- | --- | --- |
| address | false | string | Địa chỉ chi tiết kho hàng(số nhà, đường, ...) |
| batch\_config | false | json | Cấu hình lô |
| country\_code | false | string | Mã quốc gia |
| commune\_id | false | string | Mã phường xã. Lấy theo api [GET/ geo/communes](https://api-docs.pancake.vn/#get-commune) |
| custom\_batch\_config | false | json | Cấu hình lô tùy chỉnh |
| custom\_shelf\_config | false | json | Cấu hình kệ tùy chỉnh |
| district\_id | false | string | Mã quận huyện. Lấy theo api [GET /geo/districts](https://api-docs.pancake.vn/#get-district) |
| hide\_config\_batch\_shelf | false | boolean | Mở cấu hình lô kệ tùy chỉnh |
| province\_id | false | string | Mã tỉnh thành phố. Lấy theo api [GET /geo/provinces](https://api-docs.pancake.vn/#get-provinces) |
| phone\_number | false | string | Số điện thoại kho hàng |
| name | true | string | Tên kho hàng |
| shelf\_config | true | json | Cấu hình kệ |

## Danh sách kho hàng

GET /shops/<SHOP_ID>/warehouses?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"address": "hâhhha",
"allow_create_order": true,
"commune_id": "7170510",
"country_code": "84",
"custom_id": null,
"district_id": "71705",
"full_address": "hâhhha, Xã Bình Trung, Huyện Châu Đức, Bà Rịa-Vũng Tàu",
"id": "b4cb5897-6e56-4581-96cc-2f12677c7bd8",
"name": "kho test ecod",
"phone_number": "0999999999",
"province_id": "717",
"shop_id": 26290
},
{
"address": "19/349 Minh Khai , Hai bà Trưng, Hà Nội",
"allow_create_order": false,
"commune_id": "1010735",
"country_code": "84",
"custom_id": null,
"district_id": "10107",
"full_address": "19/349 Minh Khai , Hai bà Trưng, Hà Nội, Phường Minh Khai, Quận Hai Bà Trưng, Hà Nội",
"id": "644b0063-e9a8-43cd-ba08-66a8066d462e",
"name": "kho 2",
"phone_number": "01655809949",
"province_id": "101",
"shop_id": 26290
}
] }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| address | string | Địa chỉ chi tiết kho hàng(số nhà, đường, ...) |
| allow\_create\_order | boolean | Kho hàng có thể tạo đơn hàng |
| commune\_id | string | Mã phường xã |
| district\_id | string | Mã quận huyện |
| province\_id | string | Mã tỉnh thành phố |
| country\_code | string | Mã quốc gia |
| custom\_id | string | Mã tuỳ chỉnh kho hàng |
| id | uid | Mã kho hàng |
| full\_address | string | Địa chỉ đầy đủ kho hàng |
| name | string | Tên kho hàng |
| phone\_number | string | Số điện thoại kho hàng |

# Danh sách nhân viên

GET /shops/<SHOP_ID>/users?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"department": {
"id": 933,
"name": "Sales"
},
"shop_id": 7,
"user": {
"email": "2042723249341651@facebook.com",
"fb_id": "2042723249341651",
"id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8",
"name": "Hoang Anh",
"phone_number": null
},
"user_id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8",
"sale_group": {
"id": 30,
"name": "Ca sáng"
}
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| department | json | Thông tin bộ phận |
| shop\_id | int | Mã shop |
| user\_id | uid | Mã nhân viên |
| user | json | Thông tin nhân viên |
| user.email | string | Email nhân viên |
| user.fb\_id | string | Mã facebook của nhân viên |
| user.name | string | Tên nhân viên |
| user.phone\_number | string | SĐT nhân viên |
| sale\_group | json | Thông tin nhóm kinh doanh |
| sale\_group.id | int | Mã nhóm kinh doanh |
| sale\_group.name | string | Tên nhóm kinh doanh |

# Hẹn gọi & nhắc nhở

## Danh sách hẹn gọi & nhắc nhở

GET /shops/<SHOP_ID>/order_call_laters?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"called_at": "2024-01-30T01:54:17",
"creator": {
"avatar_url": null,
"email": "vuson897654@gmail.com",
"fb_id": "377936050731194",
"id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn",
"phone_number": null
},
"display_id": 70,
"id": "1885d8d4-e210-4e56-bb32-683988a032f5",
"need_notify_users": [
"cee3c05e-5f85-43c4-b27e-889b99c50097"
],
"needs_call_at": "2024-01-30T02:20:48",
"notice_created": "Gọi lại cho khách",
"order_display_id": "SOICUN-12943-02",
"order_id": 106703,
"status": 1,
"type": "call"
},
...
], "key": "today", "page_number": 1, "page_size": 30, "success": true, "total_entries": 3, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page\_number | false | int | 1 |  |
| page\_size | false | int | 30 |  |
| key | false | string | today |  |
| status | false | int | -1 | Trạng thái |

| Status | Tên trạng thái |
| --- | --- |
| -1 | Tất cả trạng thái |
| 0 | Chưa xử lý |
| 3 | Đang gọi / Đang xử lý |
| 1 | Đã xử lý |
| 2 | Không nghe máy / Không thành công |
| 7 | Đã xóa |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| called\_at | unix timestamp | Gọi lúc / Xử lý lúc |
| creator | json | Thông tin người tạo |
| display\_id | int | Mã hẹn gọi & nhắc nhở |
| need\_notify\_users | array | Nhân viên xử lý |
| needs\_call\_at | unix timestamp | Cần gọi lúc / Cần xử lý lúc |
| notice\_created | string | Thông tin thông báo |
| order\_display\_id | string | Mã đơn hàng |
| status | int | Trạng thái |
| type | string | Loại thông báo |

## Tạo hẹn gọi & nhắc nhở

POST /shops/<SHOP_ID>/order_call_laters?api_key=<api_key> HTTP/1.1


> Request

{ "order_call_later": { "status": 0, "need_notify_users": [
"cee3c05e-5f85-43c4-b27e-889b99c50097"
], "notice_created": "Gọi lại xác nhận", "needs_call_at": "2024-08-29T05:50:31.700Z", "phone_number": "0929911922", "order_ids": ["106703"] } }


### Query Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| status | false | int | Trạng thái |
| need\_notify\_users | false | array | Nhân viên xử lý |
| notice\_created | false | string | Thông tin thông báo |
| needs\_call\_at | true | iso 8601 | Cần gọi lúc |
| phone\_number | true | string | Số điện thoại |
| order\_ids | false | array | Mã đơn hàng |

# Sản phẩm

## Tạo sản phẩm

POST /shops/<SHOP_ID>/products?api_key=<api_key> HTTP/1.1


> Request

{ "product": { "name": "Ao so mi nam", "category_ids": [1290021044, 201250699], "note_product": "Ghi chú sản phẩm", "product_attributes": [{"name": "Màu", "values": ["Đen", "Trắng", "Đỏ"]}, {"name": "Size", "values": ["S", "M", "L"]}], "tags": [193, 51], "variations": [
{
"fields": [{"name": "Màu", "value": "Trắng"}, {"name": "Size", "value": "M"}],
"images": ["https://statics.pancake.vn/user-content.pancake.vn/2021/8/5/fccd6.jpg"],
"last_imported_price": 30000,
"retail_price": 140000,
"price_at_counter": 123000,
"weight": 0,
"barcode": "BARCODE123",
"custom_id": "VCUSTOMID",
"is_hidden": false
}
], "weight": 1, "custom_id": "PCUSTOMID", "is_published": true, "variations_warehouses": [
{
"remain_quantity": 10,
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"batch_position": "lô 1",
"shelf_position": "1.2"
}
] } }


### Query Parameters

| Parameter | Required | Type | Description | Example |
| --- | --- | --- | --- | --- |
| name | true | string | Tên sản phẩm | Test |
| category\_ids | false | array | Mã danh mục | \[1290021044, 201250699\] |
| note\_product | false | string | Ghi chú sản phẩm |  |
| product\_attributes | false | array | Thông tin thuộc tính | \[{name: "Màu", values: \["Đen", "Trắng", "Đỏ"\]}, {name: "Size", values: \["S", "M", "L"\]}\] |
| tags | false | array | Thẻ sản phẩm | \[193, 51\] |
| weight | true | int | Khối lượng sản phẩm | 100 |
| custom\_id | false | string | Mã tuỳ chỉnh sản phẩm | TEST1 |
| is\_published | false | boolean | Trạng thái StoreCake | true |
| variation.images | false | array | Link hình ảnh mẫu mã | "https://statics.pancake.vn/user-content.pancake.vn/2021/8/5/fccd6.jpg" |
| variation.last\_imported\_price | false | int | Giá nhập | 30000 |
| variation.retail\_price | true | int | Giá sản phẩm | 1400000 |
| variation.price\_at\_counter | false | int | Giá bán tại quầy | 123000 |
| variation.weight | true | int | Khối lượng mẫu mã | 100 |
| variation.barcode | false | string | Mã barcode mẫu mã | BAR001 |
| variation.custom\_id | false | string | Mã tuỳ chỉnh mẫu mã | TEST1001 |
| variation.is\_hidden | false | string | Trạng thái StoreCake is\_hidden = true -> Ẩn, is\_hidden = false -> Hiện | false |
| variation.fields | false | array | Thông tin thuộc tính mẫu mã | \[{name: "Màu", value: "Trắng"}, {name: "Size", value: "M"}\] |
| variation.variations\_warehouses | false | array | Thông tin kho hàng | \[{remain\_quantity: 10, warehouse\_id: "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", batch\_position: "lô 1", "shelf\_position": "1.2"}\] |

## Cập nhật thông tin sản phẩm

PUT /shops/<SHOP_ID>/products/<PRODUCT_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "product": { "name": "Ao so mi nam", "category_ids": [1290021044, 201250699], "note_product": "Ghi chú sản phẩm", "product_attributes": [{"name": "Màu", "values": ["Đen", "Trắng", "Đỏ"]}, {"name": "Size", "values": ["S", "M", "L"]}], "variations": [
{
// Cập nhật mẫu mã cũ
"id": "3c3aca82-030e-4708-a75b-b2eaf538a2f5",
"fields": [{"name": "Màu", "value": "Trắng"}, {"name": "Size", "value": "M"}],
"images": [],
"last_imported_price": 30000,
"retail_price": 140000,
"price_at_counter": 123000,
"weight": 0,
"barcode": "BARCODE123",
"custom_id": "VCUSTOMID",
"is_hidden": false
},
{
// Tạo mẫu mã mới cho Sản phẩm
"fields": [{"name": "Màu", "value": "Đỏ"}, {"name": "Size", "value": "L"}],
"images": ["https://statics.pancake.vn/user-content.pancake.vn/2021/8/5/fccd6.jpg"],
"last_imported_price": 30000,
"retail_price": 140000,
"price_at_counter": 123000,
"weight": 0,
"barcode": "BARCODE123",
"custom_id": "VCUSTOMID2",
"is_hidden": false
}
], "weight": 1, "custom_id": "PCUSTOMID", "is_published": true, "tags": [193, 51], "variations_warehouses": [
{
"remain_quantity": 10,
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"batch_position": "lô 1",
"shelf_position": "1.2"
}
] } }


### Query Parameters

| Parameter | Type | Description | Example |
| --- | --- | --- | --- |
| name | string | Tên sản phẩm | Test |
| category\_ids | array | Mã danh mục | \[1290021044, 201250699\] |
| note\_product | string | Ghi chú sản phẩm |  |
| product\_attributes | array | Thông tin thuộc tính | \[{name: "Màu", values: \["Đen", "Trắng", "Đỏ"\]}, {name: "Size", values: \["S", "M", "L"\]}\] |
| tags | array | Thẻ sản phẩm | \[193, 51\] |
| weight | int | Khối lượng sản phẩm | 100 |
| custom\_id | string | Mã tuỳ chỉnh sản phẩm | TEST1 |
| is\_published | false | boolean | Trạng thái StoreCake |
| variations | array | Mẫu mã sản phẩm |  |
| variation.images | array | Link hình ảnh mẫu mã | "https://statics.pancake.vn/user-content.pancake.vn/2021/8/5/fccd6.jpg" |
| variation.last\_imported\_price | int | Giá nhập | 300000 |
| variation.retail\_price | int | Giá sản phẩm | 1000000 |
| variation.price\_at\_counter | int | Giá bán tại quầy | 123000 |
| variation.weight | int | Khối lượng mẫu mã | 100 |
| variation.barcode | string | Mã barcode mẫu mã | BAR001 |
| variation.custom\_id | string | Mã tuỳ chỉnh mẫu mã | TEST1001 |
| variation.is\_hidden | boolean | Trạng thái StoreCake is\_hidden = true -> Ẩn, is\_hidden = false -> Hiện | false |
| variation.fields | array | Thông tin thuộc tính mẫu mã | \[{name: "Màu", value: "Trắng"}, {name: "Size", value: "M"}\] |
| variation.variations\_warehouses | array | Thông tin kho | \[{remain\_quantity: 10, warehouse\_id: "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", batch\_position: "lô 1", "shelf\_position": "1.2"}\] |
| variation.is\_removed | boolean | true: Xóa mẫu mã, false: Không xóa mẫu mã | false |

## Cập nhật tồn kho

POST /shops/<SHOP_ID>/variations/<VARIATION_ID>/update_quantity?api_key=<api_key> HTTP/1.1


> Request

{ "variations_warehouses": [
{
"remain_quantity": 20,
"warehouse_id": "a41b5d73-9236-4a5d-9954-4db6d93242d1"
},
{
"remain_quantity": 20,
"warehouse_id": "a41b5d73-9236-4a5d-9954-4db6d93242d4"
},
{
"remain_quantity": 20,
"warehouse_id": "a41b5d73-9236-4a5d-9954-4db6d93242d5"
}
] }


### Query Parameters

| Parameter | Type | Description | Example |
| --- | --- | --- | --- |
| VARIATION\_ID | string | Mã mẫu mã | e190db2b-1163-4cc3-b956-7a9528fbf5ef |
| variations\_warehouses | array | Thông tin tồn kho |  |
| variations\_warehouses.remain\_quantity | int | Số lượng tồn kho |  |
| variations\_warehouses.warehouse\_id | string | Mã kho hàng |  |
| is\_actual\_remain\_quantity | boolean | true: Cập nhật tồn kho, false: Cập nhật có thể bán |  |

## Cập nhật tồn kho nhiều mẫu mã

POST /shops/<SHOP_ID>/variations/update_quantity?api_key=<api_key> HTTP/1.1


> Request

{ "is_actual_remain_quantity": true, "variations_warehouses": [
{
"variation_id": "20e7d183-c70c-445e-8ce2-4d7e3a378e34",
"remain_quantity": 15,
"warehouse_id": "229102e4-39c3-4523-bd57-4ed0a45a85ba"
},
{
"variation_id": "5f0cfb8d-aee9-4ec0-9ff0-b5668d3143d2",
"remain_quantity": 15,
"warehouse_id": "24c4447e-c35f-4acc-affa-70e49eb354d1"
},
{
"variation_id": "5f0cfb8d-aee9-4ec0-9ff0-b5668d31fhl3",
"remain_quantity": 15,
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da"
}
] }


### Query Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| is\_actual\_remain\_quantity | boolean | true: Cập nhật tồn kho, false: Cập nhật có thể bán |
| variations\_warehouses | array | Thông tin tồn kho |
| variations\_warehouses.variation\_id | string | Mã mẫu mã |
| variations\_warehouses.remain\_quantity | int | Số lượng tồn kho |
| variations\_warehouses.warehouse\_id | string | Mã kho hàng |

## Cập nhật sản phẩm cấu thành

POST /shops/<SHOP_ID>/variations/update_composite_product?api_key=<api_key> HTTP/1.1


> Request

{ "variation_id": "79aecce9-3b1e-4ad3-afe1-2ee658720687", "composite_products": [
{
"quantity": 1,
"component_id": "67b19856-3226-457e-a746-df26e4ec1360"
}
] }


### Query Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| variation\_id | uid | Mã mẫu mã |
| composite\_products.quantity | int | Số lượng cấu thành |
| composite\_products.component\_id | string | Mã mẫu mã cấu thành |

## Danh sách sản phẩm

GET /shops/<SHOP_ID>/products/variations?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"barcode": null,
"display_id": "ADXL",
"is_hidden": false,
"is_locked": false,
"is_sell_negative_variation": true,
"fields": [
{
"id": "b032c515-3f71-4a1b-8e1d-77721ae72f37",
"name": "màu",
"value": "nâu"
},
{
"id": "677c14b5-458f-4af6-8d73-08bcb2245547",
"name": "size",
"value": "s"
}
],
"id": "e190db2b-1163-4cc3-b956-7a9528fbf5ef",
"images": [
"https://cf.shopee.vn/file/03e670d02803fcfbb17b2b719762ee17",
"https://cf.shopee.vn/file/9070bb1b0e6fcc84b46b6e5057544023"
],
"inserted_at": "2024-01-10T14:34:44.000000",
"last_imported_price": 55000,
"price_at_counter": 123000,
"product_id": "3b98a639-9d40-4faa-a692-6662f20e128d",
"product": {
"note_product": "Ghi chú sản phẩm",
"categories": [],
"display_id": "ADXL",
"image": "https://content.pancake.vn/user-content-dev2.pancake.vn/2024/11/7/1fdf82943574017240257bf9c88bc70a06a8813a.png",
"inserted_at": "2024-01-10T14:34:44",
"name": "ASOS đen XL",
"tags": [
{
"id": 51,
"note": "the 3"
},
{
"id": 193,
"note": "thẻ 1"
}
],
"is_published": true,
},
"remain_quantity": 20,
"retail_price": 140000,
"total_purchase_price": 4500000,
"variations_warehouses": [
{
"actual_remain_quantity": 100,
"pending_quantity": 0,
"remain_quantity": 20,
"returning_quantity": 0,
"total_quantity": 102,
"warehouse_id": "a41b5d73-9236-4a5d-9954-4db6d93242d1"
}
],
"wholesale_price": []
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 751, "total_pages": 26 }


### Query Parameters

| Parameter | Required | Type | Default | Description | Example |
| --- | --- | --- | --- | --- | --- |
| page\_size | false | int | 30 |  |  |
| page\_number | false | int | 1 |  |  |
| search | false | string | null |  |  |
| selling\_status | false | string |  | Tốc độ bán |  |
| product\_status | false | string |  | Trạng thái sản phẩm |  |
| category\_id | false | array |  | Mã danh mục |  |
| is\_filter\_categories\_by\_or | false | boolean | true | Lọc danh mục theo điều kiện or |  |
| filter\_exclude\_categories | false | boolean | false | Lọc loại trừ danh mục |  |
| warehouse\_until | false | time | null | Lấy thông tin tồn kho tại 1 thời điểm | 2024-06-10T17:00:00.000Z |

| selling\_status | Description |
| --- | --- |
| none | Đang thử nghiệm |
| bad | Bán chậm |
| normal | Trung bình |
| good | Bán chạy |

| product\_status | Description |
| --- | --- |
| locked | Ngừng hoạt động |
| not\_locked | Đang hoạt động |

### Reponse Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| display\_id | string | Mã hiển thị sản phẩm |
| note\_product | string | Ghi chú sản phẩm |
| is\_hidden | boolean | Trạng thái StoreCake is\_hidden = true -> Ẩn, is\_hidden = false -> Hiện |
| is\_locked | boolean | Ghi chú sản phẩm |
| is\_sell\_negative\_variation | boolean | Cho phép bán âm |
| fields | json | Thông tin cho tiết sản phẩm |
| field.name | string | Tên thuộc tính |
| field.value | string | Giá trị thuộc tính |
| id | uid | Mã mẫu mã |
| last\_imported\_price | int | Giá nhập hàng |
| product.categories | array | Danh mục sản phẩm |
| product.display\_id | string | Mã hiển thị sản phẩm |
| product.image | string | Hình đại diện sản phẩm |
| product.inserted\_at | iso 8601 | Thời điểm tạo sản phẩm |
| product.name | string | Tên sản phẩm |
| product.tags | array | Thẻ sản phẩm |
| product.is\_published | boolean | Trạng thái StoreCake |
| product\_id | uid | Mã sản phẩm |
| remain\_quantity | int | Số lượng mẫu mã còn lại |
| retail\_price | int | Giá bán mẫu mã |
| price\_at\_counter | int | Giá bán tại quầy |
| total\_purchase\_price | int | Tổng tiền còn lại |
| variations\_warehouses | array | Thông tin tồn kho chi tiết |
| variations\_warehouses.actual\_remain\_quantity | int | Tồn kho |
| variations\_warehouses.pending\_quantity | int | Sắp về |
| variations\_warehouses.remain\_quantity | int | Số lượng mẫu mã còn lại trong kho |
| variations\_warehouses.returning\_quantity | int | Số lượng đang hoàn |
| variations\_warehouses.total\_quantity | int | Tổng số lượng |
| variations\_warehouses.warehouse\_id | uid | Mã kho hàng |
| wholesale\_price | array | Giá bán sỉ |
| images | array | Link hình ảnh mẫu mã |
| inserted\_at | iso 8601 | Thời điểm tạo mẫu mã |

# Danh mục sản phẩm

GET /shops/<SHOP_ID>/categories?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"id": 865301,
"nodes": [],
"text": "AirSense Áo Khoác Siêu Nhẹ",
},
{
"id": 30163,
"nodes": [
{
"id": 30167,
"nodes": [],
"text": "Áo Thun",
},
{
"id": 30169,
"nodes": [
{
"id": 865293,
"nodes": [],
"text": "Áo Thun In Họa Tiết"
}
],
"text": "Áo Cardigan",
},
{
"id": 865292,
"nodes": [],
"text": "Áo Nỉ & Áo Hoodie",
}
],
"text": "ÁO",
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| id | int | Mã danh mục |
| text | string | Tên danh mục |
| nodes | array | Danh mục con |

# Nhóm đơn vị tính

## Danh sách nhóm ĐVT

GET /shops/<SHOP_ID>/product_measurements/get_measure?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"id": 58,
"name": "Nước hoa 1",
"nodes": [
{
"exchange_value": 30,
"id": 61,
"is_default": false,
"name": "30 ml",
"parent_id": 58,
},
],
"shop_id": 20
},
...
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| id | int | Mã nhóm ĐVT |
| name | string | Tên nhóm ĐVT |
| nodes | array | Thông tin ĐVT thuộc nhóm |
| nodes.exchange\_value | int | Giá trị quy đổi |
| nodes.id | int | Mã ĐVT |
| nodes.is\_default | boolean | ĐVT mặc định |
| nodes.name | string | Tên ĐVT |
| nodes.parent\_id | int | Mã nhóm ĐVT |

# Đánh giá trên sàn TMĐT

## Danh sách đánh giá

GET /shops/<SHOP_ID>/shopee/evaluate?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"buyer": "Vu Son",
"comment": "Giao nhanh, gói cẩn thận Đúng loại và sản phẩm y như mô tả Mình mua nhiều lần rồi và rất ưng vị của shop",
"create_at": "2024-08-12T08:31:22",
"last_rating": 3,
"marketplace": {
"marketplace_shop_id": "20732730",
"marketplace_shop_name": "Vũ Sơn shop"
},
"marketplace_id": "-3",
"order_id": "240806J7RNCBUB",
"product": {
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2024/4/15/841a6d57f52f22176dea7a9a6fb35761c89fd4eb.jpg"
],
"marketplace_product_name": "Áo thun nam form rộng 12 con giáp tuổi Sửu ATD478 Miucho Iconic cotton cổ tròn in graphic"
},
"product_name": "Áo thun nam form rộng 12 con giáp tuổi Sửu ATD478 Miucho Iconic cotton cổ tròn in graphic",
"rating": 5,
"reply": {
"hidden": false,
"reply": "Cảm ơn quý khách đã mua hàng và đánh giá tốt cho shop!\nQuý khách thật tuyệt vời khi đã đặt hàng, nhận hàng và dành thời gian đánh giá tích cực.\nNếu có bất kể vấn đề gì quý khách cứ nhắn tin shop bảo đảm xử lý có lợi cho khách hàng.\nShop vô cùng cầu thị với mong muốn được phục vụ quý khách trong những đơn hàng tiếp theo.\nShop xin chúc quý khách cùng gia đình mạnh khoẻ, vui vẻ, may mắn, bình an!\n\n"
},
"shop_id": 224,
"variation": {
"images": ["https://content.pancake.vn/user-content-dev2.pancake.vn/2024/4/15/0636d7492a531270596064c3712b0e228a843c3b.jpg"],
"marketplace_sku": "ATD478-2X-CC-M"
}
},
...
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 69, "total_pages": 3 }


### Query Parameters

| Parameter | Required | Type | Default |
| --- | --- | --- | --- |
| page | false | int | 1 |
| page\_size | false | int | 30 |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| buyer | string | Người mua |
| comment | string | Bình luận của người mua |
| create\_at | iso 8601 | Thời điểm tạo |
| last\_rating | int | Đánh giá mới nhất |
| order\_id | string | Mã đơn hàng |
| product | json | Thông tin sản phẩm |
| product\_name | string | Tên sản phẩm |
| rating | int | Đánh giá |
| reply | json | Thông tin trả lời |
| reply.hidden | boolean | true: ẩn, false: hiện |
| reply.reply | string | Nội dung trả lời |
| variation | json | Thông tin mẫu mã |
| marketplace | json | Thông tin sàn TMĐT |
| marketplace.marketplace\_shop\_id | string | Mã shop trên sàn TMĐT |
| marketplace.marketplace\_shop\_name | string | Tên shop trên sàn TMĐT |
| marketplace\_id | string | Mã sàn TMĐT |

# Khách hàng

## Danh sách khách hàng

GET /shops/<SHOP_ID>/customers?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"date_of_birth": "1999-09-01",
"fb_id": null,
"reward_point": 10,
"id": "b0110315-b102-436b-8b3b-ed8d16740327",
"last_order_at": "2020-04-01T10:18:41",
"level": null,
"name": "Trần Thủ độ",
"order_count": 108,
"phone_numbers": ["0999999999"],
"emails": ["thudo@gmail.com"],
"reward_point": 100.5,
"purchased_amount": 0,
"reward_point": 0.0,
"referral_code": "1nw4geGA",
"shop_customer_addresses": [
{
"address": "lê văn lương",
"commune_id": null,
"country_code": null,
"district_id": "10101",
"full_address": "lê văn lương, Quận Ba Đình, Hà Nội",
"full_name": "test",
"id": "0fefd213-7d0c-4d5b-bdbf-35694da80857",
"phone_number": "0999999999",
"province_id": "101"
},
{
"address": "asdsad",
"commune_id": "2210951",
"country_code": null,
"district_id": "22109",
"full_address": "asdsad, Xã Châu Minh, Huyện Hiệp Hòa, Bắc Giang",
"full_name": "test",
"id": "ea55405d-9879-4075-8ec4-5df01504f8ec",
"phone_number": "0999999999",
"province_id": "221"
}
],
"succeed_order_count": 8,
"tags": [],
"gender": "male"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 3, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description | Example |
| --- | --- | --- | --- | --- | --- |
| page\_size | false | int | 30 |  |  |
| page\_number | false | int | 1 |  |  |
| search | false | string | null |  |  |
| start\_time\_inserted\_at | false | unix timestamp |  | Thời gian bắt đầu (Tạo) | 1710608400 |
| end\_time\_inserted\_at | false | unix timestamp |  | Thời gian kết thúc (Tạo) | 1713286799 |
| start\_time\_updated\_at | false | unix timestamp |  | Thời gian bắt đầu (Cập nhật) | 1712595600 |
| end\_time\_updated\_at | false | unix timestamp |  | Thời gian kết thúc (Cập nhật) | 1713286799 |
| customer\_ids | false | string | null | Mã khách hàng | "4c74b7cf-f87b-484e-8549-6872d964f78f,d74e7fe9-580e-45e5-9374-7241297bd69d" |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| date\_of\_birth | string | Ngày sinh nhật |
| fb\_id | string | facebook id |
| reward\_point | int | Điểm thưởng |
| id | uid | Mã khách hàng |
| name | string | Tên khách hàng |
| order\_count | int | Số lần mua hàng |
| phone\_numbers | array | Danh sách sđt của khách hàng |
| emails | array | Email khách hàng |
| last\_order\_at | time | Lần mua hàng cuối |
| purchased\_amount | int | Số tiền đã mua hàng |
| shop\_customer\_addresses | array | Thông tin địa chỉ khách hàng |
| succeed\_order\_count | int | Số lần mua hàng thành công |
| full\_address | string | Địa chỉ đầy đủ kho hàng |
| tags | array | Thẻ khách hàng |
| phone\_number | string | Số điện thoại kho hàng |
| reward\_point | float | Điểm thưởng |
| referral\_code | string | Mã giới thiệu |
| gender | string | Giới tính |

## Tạo khách hàng

POST /shops/<SHOP_ID>/customers?api_key=<api_key> HTTP/1.1


> Response

{ "data": { "succeed_order_count": 0, "emails": [], "total_amount_referred": null, "gender": null, "creator_id": "e4cec6de-96fa-4c16-9523-07910ddfee8e", "is_block": false, "name": "Nguyen Van Hoang", "phone_numbers": [
"0903924956"
], "conversation_tags": null, "currency": null, "last_order_at": "2024-05-16T17:00:00", "tags": [], "username": null, "order_count": 0, "assigned_user_id": "e4cec6de-96fa-4c16-9523-07910ddfee8e", "reward_point": 0, "id": "9e749e68-142f-4587-a3b1-70279c30b5c2", "is_adjust_debts": null, "level": null, "customer_id": "5b717afb-1856-48c9-9b6e-b8ac9db7d520", "updated_at": "2024-05-14T02:59:02", "referral_code": "gqo7ulKf", "count_referrals": 0, "notes": [], "is_discount_by_level": true, "shop_id": 20, "purchased_amount": 0, "current_debts": 0, "list_voucher": [], "date_of_birth": "1995-02-01", "used_reward_point": 0, "fb_id": null, "user_block_id": null, "inserted_at": "2024-05-14T02:59:02", "shop_customer_addresses": [
{
"address": null,
"commune_id": null,
"country_code": 84,
"district_id": null,
"full_address": null,
"full_name": null,
"id": "deeb419a-e7b6-42fd-9684-52ec6a72a41a",
"phone_number": "0903924956",
"province_id": null
}
], "returned_order_count": 0, "active_levera_pay": false }, "success": true }


### Query Parameters

| Parameter | Required | Type | Description | Example |
| --- | --- | --- | --- | --- |
| name | true | string | Tên khách hàng | Nguyen Van Hoang |
| phoneNumber | true | string | Số điện thoại | 0903924956 |
| createType | true | string | Hình thức tạo | ignore |
| dateOfBirth | false | string time | Ngày sinh | 1995-02-01 |
| last\_order\_at | false | unix timestamp | Lần mua cuối | 1715878800 |

| createType | Hình thức tạo |
| --- | --- |
| ignore | Bỏ qua khách hàng với SĐT đã tồn tại |
| update | Cập nhật tất cả khách hàng với SĐT đã tồn tại |
| force | Tạo thêm khách hàng với SĐT đã tồn tại |

## Cập nhật khách hàng

PUT /shops/<SHOP_ID>/customers/<CUSTOMER_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "customer": { "name": "Nguyễn Thị Hằng", "gender": "female", "emails": ["pancake@gmail.com", "hoang@gmail.com"], "phone_numbers": ["0983925966"], "date_of_birth": "1995-03-04", "reward_point": 20, "is_discount_by_level": false, "tags": ["Hay hoàn"], "is_block": false, "assigned_user_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "level_id": "f8dced06-965d-4070-a765-dd8268373f1e", "notes": [
{
"id": "8a6f5380-4674-44e9-aaf2-40d898d460f5",
"message": "Khách hàng thân thiết",
"images": [
{
"url": "https://content.pancake.vn/user-content-dev2.pancake.vn/2023/9/6/655ae9172118ba9ffde16fa129a7001a392d1fff.png"
}
]
}
], "shop_customer_addresses": [
{
"id": "df631f21-3841-4d1c-8204-b85a7ecfce0c",
"country_code": 84,
"province_id": "101"
"district_id": "10113",
"commune_id": "1011309",
"address": "190 Cầu Giấy",
"full_name": "sơn",
"phone_number": "0972868874",
}
] } }


### Query Parameters

| Parameter | Required | Type | Description | Example |
| --- | --- | --- | --- | --- |
| name | false | string | Tên khách hàng | Nguyễn Thị Hằng |
| gender | false | string | Giới tính | female |
| emails | false | array | Email | \["pancake@gmail.com", "hoang@gmail.com"\] |
| phone\_numbers | false | array | Số điện thoại | \["0983925966"\] |
| date\_of\_birth | false | string | Ngày sinh | 1995-03-04 |
| reward\_point | false | int | Điểm thưởng | 20 |
| is\_discount\_by\_level | false | boolean | Giảm giảm giá theo level | false |
| tags | false | array | Thẻ khách hàng | \["Hay hoàn"\] |
| is\_block | false | boolean | Chặn khách hàng | false |
| assigned\_user\_id | false | uid | Mã nhân viên được phân công |  |
| level\_id | false | uid | Mã cấp độ khách hàng |  |
| notes (1.1) | false | array | Ghi chú khách hàng |  |
| shop\_customer\_address (1.2) | false | array | Địa chỉ khách hàng |  |

### Note (1.1)

| Parameter | Required | Type | Description | Example |
| --- | --- | --- | --- | --- |
| id | false | uid | Mã ghi chú |  |
| message | false | string | Nội dung ghi chú |  |
| images | false | array | Ghi chú hình ảnh | \[{url: "https://content.pancake.vn/user-content.pancake.vn/2022/1/19/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"}\] |

### Shop\_customer\_address (1.2)

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| id | false | uid | Mã địa chỉ |
| country\_code | false | int | Mã quốc gia |
| province\_id | false | string | Mã tỉnh thành phố |
| district\_id | false | string | Mã quận huyện |
| commune\_id | false | string | Mã phường xã |
| address | false | string | Địa chỉ |
| full\_name | false | string | Tên người nhận |
| phone\_number | false | string | Số điện thoại |

## Lịch sử điểm thưởng khách hàng

GET /shops/<SHOP_ID>/customers/point_logs?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"amount": 10.0,
"creator": {
"avatar_url": null,
"fb_id": "377936050731194",
"id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn"
},
"current_point": 20.0,
"inserted_at": "2024-09-27T03:40:31",
"note": "Tăng điểm khi chỉnh sửa điểm thưởng khách hàng"
},
...
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 2, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page\_size | false | int | 30 |  |
| page\_number | false | int | 1 |  |
| shop\_customer\_id | true | uid |  | Mã khách hàng |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| amount | int | Số điểm thay đổi |
| creator | json | Thông tin người tạo |
| current\_point | int | Điểm hiện tại |
| inserted\_at | iso 8601 | Thời điểm tạo |
| note | string | Lý do thay đổi điểm thưởng |

## Tạo khuyến mãi theo khách hàng

POST /shops/<SHOP_ID>/promotion_advance/create_multi?api_key=<api_key> HTTP/1.1


> Request

{ "promotion_advance": { "promotion": { "start_time": "2024-09-30T04:58:30.020Z", "end_time": "2024-10-30T04:58:30.020Z", "warehouse_ids": [], "customer_tags": [], "type": "discount_by_coupon_id", "is_activated": true, "promo_code_info": { "discount": 5, "is_percent": true, "max_discount_by_percent": 100000, "disable": false, "order_price_min": 2000000, "order_price_max": 3000000, "no_applied_products_in_other_promotions": true, "discount_after_other_discount": true } }, "shop_customer_ids": ["a8c1113d-55c2-4f7e-b33a-d4ecd76668fd"] } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| start\_time | false | iso 8601 | Thời gian bắt đầu |
| end\_time | false | iso 8601 | Thời gian kết thúc |
| warehouse\_ids | false | array | Mã kho áp dụng |
| customer\_tags | false | array | Thẻ khách hàng |
| type | true | string | Loại khuyến mãi |
| is\_activated | true | boolean | Kích hoạt |
| promo\_code\_info | true | json | Thông tin khuyến mãi |
| promo\_code\_info.discount | true | int | Giá trị giảm giá |
| promo\_code\_info.is\_percent | true | boolean | true: theo %, false: theo giá trị |
| max\_discount\_by\_percent | false | int | Số tiền tối đa giảm giá theo % |
| order\_price\_min | false | int | Giá trị đơn hàng tối thiểu |
| order\_price\_max | false | int | Giá trị đơn hàng tối đa |
| no\_applied\_products\_in\_other\_promotions | false | boolean | Không áp dụng cho sản phẩm đã có trong khuyến mãi khác |
| discount\_after\_other\_discount | false | boolean | Giảm theo giá trị đơn hàng sau khi trừ các chiết khấu khác |
| shop\_customer\_ids | true | array | Mã khách hàng áp dụng |

# Ghi chú trao đổi khách hàng

## Danh sách ghi chú

GET /shops/<SHOP_ID>/customers?/<CUSTOMER_ID>/load_customer_notes?api_key=<api_key> HTTP/1.1


> Response

{ "customer_notes": [
{
"notes": [
{
"created_at": 1678075407193,
"created_by": {
"fb_id": "377936050731194",
"fb_name": "Vũ Sơn",
"uid": "cee3c05e-5f85-43c4-b27e-889b99c50097"
},
"edit_history": [],
"id": "a472f7db-b9db-410a-a43a-5f972c685b6c",
"images": [],
"message": "khách hàng mua lại",
"order_id": "97798",
"updated_at": null
}
]
}
] }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| created\_at | unix timestamp | Thời điểm tạo |
| created\_by | json | Thông tin người tạo |
| edit\_history | array | Lịch sử chình sửa |
| id | uid | Mã ghi chú |
| images | array | Link hình ảnh ghi chú |
| message | string | Nội dung ghi chú |
| order\_id | string | Mã đơn hàng |
| updated\_at | unix timestamp | Thời điểm cập nhật |

## Thêm ghi chú

POST /shops/<SHOP_ID>/customers/<CUSTOMER_ID>/create_note?api_key=<api_key> HTTP/1.1


> Request

{ "conversation_id": "117967746266487_9306266852780716", "page_id": "117967746266487", "message": "khách hàng mua nhiều lần", "images": [
{
"image_data": {
"height": 225,
"width": 225
},
"name": "iship thai.jpeg",
"preview_url": "https://content.pancake.vn/user-content-dev2.pancake.vn/2025/2/25/2488ecb12514520d9828390f695abc9db69a1452.jpg",
"url": "https://content.pancake.vn/user-content-dev2.pancake.vn/2025/2/25/2488ecb12514520d9828390f695abc9db69a1452.jpg"
}
], "order_id": 116947 }


### Query Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| conversation\_id | false | string | Mã hội thoại |
| page\_id | false | string | Mã trang liên kết |
| message | false | string | Nội dung ghi chú |
| images | false | array | Thông tin hình ảnh ghi chú |
| order\_id | false | int | Mã đơn hàng |

# Cấp độ khách hàng

## Danh sách cấp độ khách hàng

GET /shops/<SHOP_ID>/customer_levels?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"color_customer_level": "#87d068",
"discount": 5,
"discount_type": 3,
"id": "84fdef8b-8e4b-44e7-8d61-8553ee7f5833",
"name": "cap 1",
"shop_id": 20,
"upgrade_by_order_count": 10,
"upgrade_by_point": 100,
"upgrade_by_total_purchase": 30000000
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| color\_customer\_level | string | Mã màu của cấp độ |
| discount | int | Giá trị giảm giá |
| discount\_type | int | Loại giảm giá 2: Theo giá trị, 3: Theo phần trăm (%) |
| id | uid | Mã cấp độ |
| name | string | Tên cấp độ |
| upgrade\_by\_order\_count | int | Nâng hạng bởi số đơn |
| upgrade\_by\_point | int | Nâng hạng bởi số điểm |
| upgrade\_by\_total\_purchase | int | Nâng hạng bởi số tiền |

# Thu chi

## Danh sách thu chi

GET /shops/<SHOP_ID>/transactions?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"advertising_cost_id": null,
"amount": -70000,
"creator": {
"avatar_url": null,
"fb_id": "1286585024855632",
"id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"name": "vudzung12"
},
"creator_id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"display_id": "KH6815",
"id": "5b6bbae4-56b4-4189-a84d-d2ecfecead3e",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"inserted_at": "2023-09-23T05:00:20",
"is_accounting": false,
"is_canceled": false,
"is_locked": false,
"name": "Giao dịch công nợ #1692 trả nhà cung cấp",
"note": "trả nhà cung cấp",
"payment_debts_to_suppliers": false,
"payments": [
"cash"
],
"shop_id": 20,
"status": 1,
"supplier_products_id": 293,
"table_name": "debts",
"tag_ids": [
"193a-e877-359a-b340-01d8-4d2e-2050",
"55f6-111c-2fd5-38e8-5b9d-009f-d3b1"
],
"time_incurred": "2023-09-23T05:00:20",
},
....
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 117, "total_pages": 4 }


### Query Parameters

| Parameter | Required | Type | Default | Description | Example |
| --- | --- | --- | --- | --- | --- |
| page | false | int | 1 |  |  |
| page\_size | false | int | 30 |  |  |
| status | false | int | -1 | Trạng thái |  |
| startDateTime | false | unix timestamp | null | Thời gian bắt đầu | 1692810000 |
| endDateTime | false | unix timestamp | null | Thời gian kết thúc | 1695488399 |

| Status | Tên trạng thái |
| --- | --- |
| -1 | Tất cả trạng thái |
| 0 | Mới |
| 1 | Có hiệu lực |
| 2 | Đã hủy |
| 3 | Đã xóa |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| advertising\_cost\_id | uid | Mã chi phí quảng cáo |
| amount | int | Số tiền |
| creator | json | Thông tin người tạo |
| creator\_id | uid | Mã người tạo |
| display\_id | string | Mã giao dịch |
| images | array | Link hình ảnh |
| inserted\_at | unix timestamp | Thời điểm tạo |
| is\_accounting | boolean | Hạch toán tài chính |
| is\_locked | boolean | Khóa |
| name | string | Tên giao dịch |
| note | string | Ghi chú |
| payment\_debts\_to\_suppliers | boolean | Thanh toán công nợ cho nhà cung cấp |
| payments | array | Hình thức thanh toán |
| status | int | Trạng thái |
| supplier\_products\_id | int | Mã nhà cung cấp |
| tag\_ids | array | Thẻ giao dịch |
| time\_incurred | unix timestamp | Thời điểm phát sinh |

## Tạo phiếu thu chi

POST /shops/<SHOP_ID>/transactions?api_key=<api_key> HTTP/1.1


> Request

{ "transaction": { "name": "Thanh toán tiền hàng", "note": "thanh toán tiền hàng", "amount": -1000000, "is_locked": false, "tag_ids": [
"193a-e877-359a-b340-01d8-4d2e-2050"
], "payments": [
"transfer_money"
], "supplier_products_id": 293, "is_accounting": true, "time_incurred": "2023-09-23T08:41:54.404Z", "payment_debts_to_suppliers": true, "images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
] } }


### Query Parameters

| Parameter | Required | Type | Description | Example |
| --- | --- | --- | --- | --- |
| name | true | string | Tên giao dịch |  |
| note | false | string | Ghi chú |  |
| amount | false | int | Số tiền |  |
| is\_locked | false | boolean | Khóa |  |
| tag\_ids | false | array | Thẻ giao dịch | \["193a-e877-359a-b340-01d8-4d2e-2050"\] |
| payments | false | array | Hình thức thanh toán | \["transfer\_money"\] |
| supplier\_products\_id | false | int | Mã nhà cung cấp |  |
| is\_accounting | false | boolean | Hạch toán tài chính |  |
| time\_incurred | false | unix timestamp | Thời điểm phát sinh |  |
| images | false | array | Link hình ảnh | \["https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"\] |

| payments | Hình thức thanh toán |
| --- | --- |
| cash | Tiền mặt |
| transfer\_money | Chuyển khoản |
| charged\_by\_card | Quẹt thẻ |
| charged\_by\_momo | Momo |
| charged\_by\_vnpay | VNPay |
| charged\_by\_kredivo | Kredivo |
| charged\_by\_fundiin | Fundiin |
| charged\_by\_qrpay | QRpay |

## Tạo chi phí quảng cáo

POST /shops/<SHOP_ID>/adv_costs?api_key=<api_key> HTTP/1.1


> Request

{ "params": { "cost_date": "2023-09-07 22:00:00", "transaction": { "name": "Chi phí quảng cáo", "is_locked": false, "note": "example", "status": "0", "time_incurred": "2023-09-07 15:00:00", "tags": ["Thẻ 1", "Thẻ 2"] }, "items": [
{
"cost": 10000,
"warehouse_id": "IS",
"is_livestream": true,
"product": "1",
"pke_mkter": "test@gmail.com",
"source": {
"key": "-3",
"account": "3"
},
"is_wholesale": true,
"post_ids": ["127967746288487_545680607828820"]
}
] } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| cost\_date | true | string | Chi phí quảng cáo ngày |
| transaction | true | json | Thu chi |
| name | true | string | Tên chi phí quảng cáo |
| is\_locked | false | boolean | Khóa |
| note | false | string | Ghi chú |
| status | true | string | Trạng thái |
| time\_incurred | false | string | Thời điểm phát sinh |
| tags | false | array | Thẻ chi phí quảng cáo |
| items | true | array | Danh sách chi tiết của chi phí quảng cáo |
| cost | true | int | Chi phí |
| warehouse\_id | false | string | Mã kho hàng |
| is\_livestream | false | boolean | Livestream |
| product | false | string | Mã sản phẩm |
| pke\_mkter | false | string | Marketer |
| source | false | json | Nguồn |
| is\_wholesale | false | boolean | Bán sỉ |
| post\_ids | false | array | Mã bài viết |

# Báo cáo thông kê

## Thống kê đơn hàng

GET /shops/<SHOP_ID>/analytics/sale?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"Time.day": "2020-07-22",
"returned": null,
"success": {
"cod": 1710000,
"discount": 0,
"order_count": 3,
"price": 1800000,
"product_count": 18,
"shipping_fee": 0,
"custom_formula_d6ae-ad02-be3d-b26e-3f65-d497-33c4": 1000000
}
},
{
"Time.day": "2020-07-27",
"returned": null,
"success": {
"cod": 570000,
"discount": 0,
"order_count": 1,
"price": 600000,
"avg_price": 600000,
"product_count": 6,
"shipping_fee": 0,
"custom_formula_d6ae-ad02-be3d-b26e-3f65-d497-33c4": 1000000
}
},
{
"Time.day": "2020-07-28",
"returned": null,
"success": {
"cod": 5130000,
"discount": 0,
"order_count": 9,
"price": 5400000,
"avg_price": 600000,
"product_count": 54,
"shipping_fee": 0,
"custom_formula_d6ae-ad02-be3d-b26e-3f65-d497-33c4": 1200000
}
},
{
"Time.day": "2020-07-30",
"returned": null,
"success": {
"cod": 570000,
"discount": 0,
"order_count": 1,
"price": 600000,
"avg_price": 600000,
"product_count": 6,
"shipping_fee": 0,
"custom_formula_d6ae-ad02-be3d-b26e-3f65-d497-33c4": 1200000
}
},
], "success": true }


### Query Parameters

| Parameter | Required | Type | Example | Description |
| --- | --- | --- | --- | --- |
| since | false | string | '2020-08-01 00:00:00' | Thời gian bắt đầu thống kê |
| until | false | string | '2020-08-20 00:00:00' | Thời gian kết thúc thống kê |
| split\_by | false | array | \["Time.day", "Order.source", "Variation.id", "Variation.product\_id"\] | Time.day: Theo ngày, Order.source: Theo nguồn đơn hàng, Variation.id: Theo mẫu mã, Variation.product\_id: Theo sản phẩm |
| filter | false | json | {"Variation.id":\["08d25e0c-4016-498e-a0c6-48b8e7aad2b4"\]} | Variation.id: Theo mẫu mã, Variation.product\_id: Theo sản phẩm |
| success\_status | false | string | '1' | 'send\_to\_partner': Tính đơn chốt khi đẩy sang ĐVVC<br>'1': Tính đơn chốt khi cập nhật sang trạng thái đã xác nhận |
| success\_record | false | string | 'inserted\_at' | 'inserted\_at': Doanh thu cộng vào thời điểm tạo đơn<br>'updated\_at': Doanh thu cộng vào thời điểm cập nhật trạng thái |
| user\_type | false | string | 'create' | Tính đơn cho nhân viên ('create': Tạo đơn, 'update': Cập nhật trạng thái, 'assign': NV được phân công, 'care': NV chăm sóc, 'marketer': NV Marketing) |
| returned\_status | false | string | '5' | Tính hoàn đơn khi ('5': Đã hoàn, '4': Đang hoàn) |
| returned\_record | false | string | 'inserted\_at' | Doanh thu sẽ trừ vào thời điểm ('inserted\_at': Tạo đơn, 'updated\_at': Cập nhật trạng thái, 'success\_record': Chốt đơn) |
| select\_fields | false | array | (\*) \["price", "avg\_price", "custom\_formula\_{custom\_formula\_id}"\] | Các số liệu cần lấy |

- (\*)
- "price", "avg\_price": Số liệu mặc định
- "custom\_formula\_{custom\_formula\_id}": Số liệu tùy chỉnh (Trong đó custom\_formula\_id: ID của công thức tùy chỉnh)
- Example: "custom\_formula\_d6ae-ad02-be3d-b26e-3f65-d497-33c4" ID của công thức tùy chỉnh là "d6ae-ad02-be3d-b26e-3f65-d497-33c4"

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| Time.day | string | Ngày thống kê |
| returned | json | Thông tin dữ liệu các đơn hoàn |
| success | json | Thông tin dữ liệu các đơn thành công |
| cod | int | Tổng tiền cần thu |
| discount | int | Chiết khấu |
| order\_count | int | Số lần mua hàng |
| price | int | Giá trị hàng hoá |
| product\_count | int | Sản phẩm trong các đơn hàng |
| shipping\_fee | int | Phí vận chuyển |

## Danh sách công thức tùy chỉnh

GET /shops/<SHOP_ID>/analytics/get_list_formula?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"formula": "{price} - {shipping_fee}",
"id": "0ea7-bc72-ae51-0769-a7c9-ca34-fff6",
"name": "tien hang - phi ship",
"unit": "currency"
},
{
"formula": "{revenue} + {transfer_money}",
"id": "3db3-72a7-c426-066a-4eed-a63b-be49",
"name": "doanh thu + ck$",
"unit": "currency"
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| formula | string | Công thức tính |
| id | string | Mã công thức |
| name | string | Tên công thức |
| unit | string | Đơn vị tính |

## Danh sách số liệu mặc định

GET /shops/<SHOP_ID>/analytics/get_analytic_fields?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"id": "price",
"name": "Tiền hàng"
},
{
"id": "avg_price",
"name": "Giá bán trung bình"
},
...
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| id | string | Mã trường |
| name | string | Tên trường |

# Thẻ đơn hàng

GET /shops/<SHOP_ID>/orders/tags?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"color": "#123123",
"groups": [
{
"id": 13,
"name": "nhom 1"
},
{
"id": 16,
"name": "nhom 2"
}
],
"id": 75,
"name": "thẻ 4"
},
{
"color": "#f04134",
"groups": [
{
"id": -1,
"name": "Delivery Group"
},
{
"id": 13,
"name": "nhom 1"
}
],
"id": 1,
"is_system_tag": true,
"name": "Giao không thành"
},
{
"color": "#096dd9",
"groups": [],
"id": 2,
"is_system_tag": true,
"name": "Chờ cọc"
},
...
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| id | int | Mã thẻ đơn hàng |
| name | string | Tên thẻ đơn hàng |
| color | string | Mã màu thẻ |
| is\_system\_tag | boolean | true - Thẻ hệ thống |
| groups | array | Thông tin nhóm thẻ |

# Phiếu nhập kho

## Danh sách phiếu nhập kho

GET /shops/<SHOP_ID>/purchases?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"auto_create_debts": true,
"total_remain_quantity": 1,
"status": 0,
"display_id": 6392,
"total_quantity": 1,
"bill_images": [],
"not_create_transaction": true,
"inserted_at": "2023-09-20T02:21:51",
"transport_fee": 10000,
"id": "96bbc665-3fd5-4efc-9d8a-0110ecfa1754",
"items": [
{
"id": "02cb1ff3-9b21-4e1c-9288-a29c16bd907d",
"imported_price": 200000,
"gross_price": 200000,
"discount": 10000,
"note_purchase": "áo nam thời trang",
"product_name": "Áo nam",
"quantity": 1,
"selling_status": "bad",
"variation_id": "20e7d183-c70c-445e-8ce2-4d7e3a378e34"
}
],
"is_lock": null,
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"user_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"prepaid_debt": 100000,
"total_price": 200000,
"received_at": "2023-09-21T00:00:00",
"updated_at": "2023-09-20T02:22:05",
"total_remain_price": 200000,
"tags": [1],
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"supplier_products_id": 293,
"supplier": {
"custom_id": "HH",
"id": 724,
"name": "CT TNHH Hồng Hà"
},
"discount": 10000,
"created_type": "actual_purchase",
"user": {
"avatar_url": null,
"fb_id": "377936050731194",
"id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"name": "Vũ Sơn"
},
"separate_by_display_ids": null,
"note": "nhập kho sản phẩm"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 1, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page | true | int | 1 |  |
| page\_size | true | int | 30 |  |
| status | true | int | -2 | Trạng thái |
| type | true | string | product |  |

| Status | Tên trạng thái |
| --- | --- |
| -2 | Tất cả trạng thái |
| -1 | Mới |
| 0 | Đã xác nhận |
| 1 | Đã nhập hàng |
| 2 | Đã hủy |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| auto\_create\_debts | boolean | Tạo công nợ theo nhà cung cấp |
| total\_remain\_quantity | int | Tổng số lượng còn lại |
| status | int | Trạng thái |
| display\_id | int | Mã phiếu nhập |
| total\_quantity | int | Tổng số lượng |
| bill\_images | array | Link hình ảnh hóa đơn |
| not\_create\_transaction | boolean | Không tạo phiếu chi |
| inserted\_at | unix timestamp | Thời điểm tạo |
| transport\_fee | int | Phí vận chuyển |
| items | array | Thông tin mẫu mã |
| is\_lock | boolean | Khóa |
| images | array | Link hình ảnh ghi chú |
| user\_id | uid | Mã người tạo |
| prepaid\_debt | int | Trả trước NCC |
| total\_price | int | Tổng giá nhập |
| received\_at | unix timestamp | Ngày về dự kiến |
| updated\_at | unix timestamp | Cập nhật lúc |
| total\_remain\_price | int | Tổng giá còn lại |
| tags | array | Mã thẻ |
| warehouse\_id | uid | Mã kho hàng |
| supplier\_products\_id | int | Mã nhà cung cấp |
| supplier | json | Thông tin nhà cung cấp |
| discount | int | Chiết khấu |
| created\_type | string | Loại phiếu nhập kho |
| user | json | Thông tin người tạo |
| separate\_by\_display\_ids | int | Mã phiếu nhập được tách ra |
| note | string | Ghi chú |

### items

| Parameter | Type | Description |
| --- | --- | --- |
| imported\_price | int | Giá nhập |
| note\_purchase | int | Ghi chú |
| product\_name | string | Tên sản phẩm |
| quantity | int | Số lượng nhập |
| selling\_status | string | Trạng thái bán |
| variation\_id | uid | Mã mẫu mã |
| gross\_price | int | Giá niêm yết (chưa trừ chiết khấu, chưa cộng phí vận chuyển) |
| discount | int | Chiết khấu trên một sản phẩm |

| created\_type | Description |
| --- | --- |
| actual\_purchase | Nhập hàng thực tế |
| adjust\_warehouse | Điều chỉnh kho |
| transfer\_warehouse | Chuyển kho |

## Tạo phiếu nhập kho

POST /shops/<SHOP_ID>/purchases?api_key=<api_key> HTTP/1.1


> Request

{ "purchase": { "note": "", "status": 1, "not_create_transaction": false, "auto_create_debts": true, "supplier_products_id": 169, "shop_id": 20, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "change_received_at": true, "received_at": 1651683600, "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "items": [
{
"imported_price": 100000,
"gross_price": 100000,
"discount": 10000,
"quantity": 1,
"variation_id": "29044dcf-2f4c-492f-a0a9-e447b20e21da",
"index": 0,
}
] } }


### Request Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| note | string | Ghi chú |
| status | int | Trạng thái phiếu nhập |
| not\_create\_transaction | boolean | Không tạo phiếu chi |
| auto\_create\_debts | boolean | Tạo công nợ theo nhà cung cấp |
| supplier\_products\_id | int | Mã nhà cung cấp |
| shop\_id | int | Mã shop |
| warehouse\_id | string | Mã kho hàng |
| change\_received\_at | boolean | Đổi ngày về dự kiến |
| received\_at | unix timestamp | Ngày về dự kiến |
| images | array | Link hình ảnh phập hàng |
| items | array | Danh sách sản phầm |
| items.imported\_price | int | Giá nhập (không cần truyền lên vì hệ thống sẽ tự động tính toán) |
| items.gross\_price | int | Giá niêm yết (chưa trừ chiết khấu, chưa cộng phí vận chuyển) |
| items.discount | int | Chiết khấu trên một sản phẩm |
| items.quantity | int | Số lượng nhập |
| items.variation\_id | string | Mã mẫu mã |

## Cập nhật phiếu nhập kho

PUT /shops/<SHOP_ID>/purchases/<PURCHASE_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "purchase": { "note": "", "status": 1, "not_create_transaction": false, "auto_create_debts": true, "supplier_products_id": 169, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "change_received_at": true, "received_at": 1651683600, "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "items": [
{
"imported_price": 100000,
"quantity": 1,
"variation_id": "29044dcf-2f4c-492f-a0a9-e447b20e21da",
}
] } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| note | false | string | Ghi chú |
| status | false | int | Trạng thái phiếu nhập |
| not\_create\_transaction | false | boolean | Không tạo phiếu chi |
| auto\_create\_debts | false | boolean | Tạo công nợ theo nhà cung cấp |
| supplier\_products\_id | false | int | Mã nhà cung cấp |
| warehouse\_id | true | string | Mã kho hàng |
| change\_received\_at | false | boolean | Đổi ngày về dự kiến |
| received\_at | false | unix timestamp | Ngày về dự kiến |
| images | false | array | Link hình ảnh phập hàng |
| items | false | array | Danh sách sản phầm |
| items.imported\_price | true | int | Giá nhập |
| items.quantity | false | int | Số lượng nhập |
| items.variation\_id | false | string | Mã mẫu mã |

| Status | Tên trạng thái |
| --- | --- |
| -1 | Mới |
| 0 | Đã xác nhận |
| 1 | Đã nhập hàng |
| 2 | Đã hủy |

## Tách phiếu nhập kho

POST /shops/<SHOP_ID>/purchases/separate?api_key=<api_key> HTTP/1.1


> Request

{ "newPurchase": { "auto_create_debts": true, "discount": 500, "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "items": [
{
"imported_price": 100000,
"quantity": 1,
"variation_id": "ddefd476-bc91-4151-8cd2-2cf5ad227f09",
"index": 0
}
], "not_create_transaction": false, "note": "Tách phiếu nhập", "prepaid_debt": 20000, "received_at": 1683997200, "status": 0, "supplier_products_id": 293, "tags": [1], "transport_fee": 0, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da" }, "oldPurchase": { "auto_create_debts": true, "discount": 500, "id": "0ecbdb3b-a376-4a3d-9b8a-174ae15ae886", "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "items": [
{
"imported_price": 100000,
"quantity": 23,
"variation_id": "ddefd476-bc91-4151-8cd2-2cf5ad227f09",
"index": 0
}
], "not_create_transaction": false, "note": "Nhập hàng để bán", "prepaid_debt": 20000, "received_at": 1683997200, "status": 0, "supplier_products_id": 293, "tags": [1], "transport_fee": 0, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da" } }


### Request Parameters

Lưu ý: newPurchase và oldPurchase dùng chung các request parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| newPurchase | true | json | Phiếu nhập mới |
| oldPurchase | true | json | Phiếu nhập cần tách |
| auto\_create\_debts | false | boolean | Tạo công nợ theo nhà cung cấp |
| discount | false | int | Chiết khấu |
| id | true | string | Mã phiếu nhập / chỉ dùng cho oldPurchase |
| images | false | array | Link hình ảnh phập hàng |
| items | true | array | Danh sách sản phầm |
| items.imported\_price | true | int | Giá nhập |
| items.quantity | true | int | Số lượng nhập |
| items.variation\_id | true | string | Mã mẫu mã |
| items.index | false | int | Thứ tự sản phẩm |
| not\_create\_transaction | false | boolean | Không tạo phiếu chi |
| note | false | string | Ghi chú |
| prepaid\_debt | false | int | Trả trước NCC |
| received\_at | false | unix timestamp | Ngày về dự kiến |
| status | true | int | Trạng thái phiếu nhập |
| supplier\_products\_id | false | int | Mã nhà cung cấp |
| tags | false | array | Thẻ nhập hàng |
| transport\_fee | false | int | Phí vận chuyển |
| warehouse\_id | true | string | Mã kho hàng |

# Phiếu xuất kho

## Danh sách phiếu xuất kho

GET /shops/<SHOP_ID>/export?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"display_id": 472,
"export_items": [
{
"display_id": 0,
"id": "78dfe47a-a3dd-4d47-8f8b-16eb1ccd69ee",
"imported_price": 0,
"inserted_at": "2024-01-25T16:18:20",
"quantity": 1,
"variation_id": "76887a5b-8a27-472c-a15a-661ea59434dd"
}
],
"id": "8095ca3c-a485-4378-9914-5013e1179d55",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"inserted_at": "2024-01-25T16:18:20",
"note": "Xuất bán hàng",
"status": 0,
"supplier_products_id": 400037328,
"tags": [1],
"total": 1,
"total_price": 0,
"type": 0,
"updated_at": "2024-01-25T16:18:20",
"user": {
"avatar_url": null,
"fb_id": "1286585024855632",
"id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"name": "vudzung12"
},
"user_id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 1, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page | true | int | 1 |  |
| page\_size | true | int | 30 |  |
| status | true | int | -1 | Trạng thái |
| type | true | int | 0 |  |

| Status | Tên trạng thái |
| --- | --- |
| -1 | Tất cả trạng thái |
| 0 | Mới |
| 1 | Hoàn tất |
| 2 | Đã hủy |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| display\_id | int | Mã phiếu xuất |
| export\_items | array | Danh sách sản phầm |
| images | array | Link hình ảnh xuất hàng |
| inserted\_at | unix timestamp | Thời điểm tạo |
| note | string | Ghi chú |
| status | int | Trạng thái |
| supplier\_products\_id | int | Mã nhà cung cấp |
| tags | array | Mã thẻ |
| total | int | Tổng số lượng |
| total\_price | int | Tổng giá xuất |
| updated\_at | unix timestamp | Cập nhật lúc |
| user | json | Thông tin người tạo |
| warehouse\_id | uid | Mã kho hàng |

### export\_items

| Parameter | Type | Description |
| --- | --- | --- |
| id | uid | Mã hạng mục xuất |
| imported\_price | int | Giá xuất |
| quantity | int | Số lượng xuất |
| variation\_id | string | Mã mẫu mã |

## Tạo phiếu xuất kho

POST /shops/<SHOP_ID>/export?api_key=<api_key> HTTP/1.1


> Request

{ "export_list": { "note": "", "supplier_products_id": 169, "tags": [
1
], "status": 0, "type": 0, "shop_id": 20, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "change_inserted_at": true, "inserted_at": 1651683600, "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "export_items": [
{
"id": "13d7ddf6-4cd9-4e1f-a5c1-ac3cd7a7fc17",
"imported_price": 100000,
"quantity": 1,
"variation_id": "29044dcf-2f4c-492f-a0a9-e447b20e21da",
}
] } }


### Request Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| note | string | Ghi chú |
| supplier\_products\_id | int | Mã nhà cung cấp |
| tags | array | Thẻ xuất hàng |
| status | int | Trạng thái phiếu xuất |
| type | int | Loại phiếu xuất |
| shop\_id | int | Mã shop |
| warehouse\_id | string | Mã kho hàng |
| images | array | Link hình ảnh xuất hàng |
| change\_inserted\_at | boolean | Đổi ngày tạo phiếu |
| inserted\_at | unix timestamp | Ngày tạo phiếu |
| export\_items | array | Danh sách sản phầm |
| export\_items.id | uid | Mã hạng mục xuất |
| export\_items.imported\_price | int | Giá xuất |
| export\_items.quantity | int | Số lượng xuất |
| export\_items.variation\_id | string | Mã mẫu mã |

## Cập nhật phiếu xuất

PUT /shops/<SHOP_ID>/export/<EXPORT_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "export_list": { "images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/5/27/ee3be79d1574735ed35539ca48f7f6e9d7137706.jpg"
], "inserted_at": 1695142800, "note": "xuất bán hàng", "status": 0, "supplier_products_id": 319, "tags": [
1
], "export_items": [
{
"id": "13d7ddf6-4cd9-4e1f-a5c1-ac3cd7a7fc17",
"imported_price": 1000,
"quantity": 1,
"variation_id": "d1e522eb-2f6f-4d22-b8a1-ec25df4a33a4"
}
] } }


### Query Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| images | false | array | Link hình ảnh xuất hàng |
| inserted\_at | false | unix timestamp | Ngày tạo phiếu |
| note | false | string | Ghi chú |
| status (1.1) | false | int | Trạng thái phiếu xuất |
| supplier\_products\_id | false | int | Mã nhà cung cấp |
| tags | false | array | Thẻ xuất hàng |
| export\_items | false | array | Danh sách sản phầm |
| export\_items.id | true | uid | Mã hạng mục xuất |
| export\_items.imported\_price | true | int | Giá xuất |
| export\_items.quantity | true | int | Số lượng xuất |
| export\_items.variation\_id | true | string | Mã mẫu mã |

| (1.1) status | Trạng thái |
| --- | --- |
| 0 | Mới |
| 1 | Hoàn tất |
| 2 | Đã hủy |

# Hàng lỗi (theo phiếu xuất)

## Tạo phiếu xuất hàng lỗi

POST /shops/<SHOP_ID>/export?api_key=<api_key> HTTP/1.1


> Request

{ "export_list": { "note": "Xuất hàng lỗi", "supplier_products_id": 169, "status": 0, "type": 1, "shop_id": 20, "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "change_inserted_at": true, "inserted_at": 1651683600, "images": ["https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/12/27/18c4500c320cb2e993b3ff4b3be81165df64d3ba.png"], "export_items": [
{
"imported_price": 100000,
"quantity": 1,
"variation_id": "29044dcf-2f4c-492f-a0a9-e447b20e21da",
}
] } }


### Request Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| note | string | Ghi chú |
| supplier\_products\_id | int | Mã nhà cung cấp |
| status | int | Trạng thái phiếu xuất |
| type | int | Loại phiếu xuất |
| shop\_id | int | Mã shop |
| warehouse\_id | string | Mã kho hàng |
| images | array | Link hình ảnh xuất hàng |
| change\_inserted\_at | boolean | Đổi ngày tạo phiếu |
| inserted\_at | unix timestamp | Ngày tạo phiếu |
| export\_items | array | Danh sách sản phầm |
| export\_items.imported\_price | int | Giá xuất |
| export\_items.quantity | int | Số lượng xuất |
| export\_items.variation\_id | string | Mã mẫu mã |

## Cập nhật phiếu xuất hàng lỗi

PUT /shops/<SHOP_ID>/export/<EXPORT_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "export_list": { "images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/5/27/ee3be79d1574735ed35539ca48f7f6e9d7137706.jpg"
], "inserted_at": 1695142800, "note": "xuất bỏ đi", "status": 0, "supplier_products_id": 319, "type": 1, "export_items": [
{
"id": "13d7ddf6-4cd9-4e1f-a5c1-ac3cd7a7fc17",
"imported_price": 1000,
"quantity": 1,
"variation_id": "d1e522eb-2f6f-4d22-b8a1-ec25df4a33a4"
}
] } }


### Query Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| images | false | array | Link hình ảnh xuất hàng |
| inserted\_at | false | unix timestamp | Ngày tạo phiếu |
| note | false | string | Ghi chú |
| status (1.1) | false | int | Trạng thái phiếu xuất |
| supplier\_products\_id | false | int | Mã nhà cung cấp |
| export\_items | false | array | Danh sách sản phầm |
| export\_items.id | true | uid | Mã hạng mục xuất |
| export\_items.imported\_price | true | int | Giá xuất |
| export\_items.quantity | true | int | Số lượng xuất |
| export\_items.variation\_id | true | string | Mã mẫu mã |

| (1.1) status | Trạng thái |
| --- | --- |
| 0 | Xuất hàng lỗi |
| 1 | Xuất bỏ |
| 2 | Đã hủy |

# Chuyển kho

## Danh sách chuyển kho

GET /shops/<SHOP_ID>/transfers?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"display_id": 309,
"from_warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"from_warehouse_name": "Kho HCM",
"id": "5c9ef4a6-2411-4d5f-9a91-1bc22dbb7eb1",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"inserted_at": "2023-09-13T09:34:37",
"items": [
{
"id": "f80bdc16-a000-4bf1-a979-c3fd4033f551",
"product_display_id": "áo nam",
"product_name": "áo nam",
"quantity": 3,
"variation_display_id": "XANH-M",
"variation_fields": [
{
"id": "beb75502-5a50-48d6-bed8-89ea8ddc9a66",
"keyValue": "xanh dương",
"name": "màu",
"value": "xanh dương"
},
{
"id": "8eee6f85-0a76-46da-9dd7-6668bc6d8729",
"keyValue": "M",
"name": "size",
"value": "M"
}
]
"variation_id": "3b11fb7b-9081-42c0-9546-dfac62b9c9ca"
}
],
"note": "Chuyển kho bán hàng",
"shipping_fee": 30000,
"shop_id": 20,
"status": 0,
"to_warehouse_id": "229102e4-39c3-4523-bd57-4ed0a45a85ba",
"to_warehouse_name": "Cho tao cơm",
"total_quantity": 1,
"updated_status_at": "2023-09-13T09:34:37"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 1, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page\_size | true | int | 30 |  |
| page | true | int | 1 |  |
| status | true | int | 1 | Trạng thái |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| creator\_id | uid | Mã người tạo |
| display\_id | int | Mã phiếu chuyển kho |
| from\_warehouse\_id | uid | Mã kho gốc |
| from\_warehouse\_name | string | Tên kho gốc |
| images | array | Link hình ảnh chuyển kho |
| inserted\_at | time | Thời điểm tạo |
| items | array | Danh sách sản phầm |
| note | string | Ghi chú |
| shipping\_fee | int | Phí vận chuyển |
| shop\_id | int | Mã shop |
| status | int | Trạng thái |
| to\_warehouse\_id | uid | Mã kho nhận |
| to\_warehouse\_name | string | Tên kho nhận |
| total\_quantity | int | Tổng số lượng |
| updated\_status\_at | time | Cập nhật lúc |

### items

| Parameter | Type | Description |
| --- | --- | --- |
| product\_display\_id | string | Mã sản phẩm |
| product\_name | string | Tên sản phẩm |
| quantity | int | Số lượng chuyển kho |
| variation\_display\_id | string | Mã mẫu mã |
| variation\_fields | array | Thông tin thuộc tính mẫu mã |

## Tạo phiếu chuyển kho

POST /shops/<SHOP_ID>/transfers/multi?api_key=<api_key> HTTP/1.1


> Request

{ "transfer": { "from_warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "to_warehouse_ids": ["229102e4-39c3-4523-bd57-4ed0a45a85ba"], "shipping_fee": 20000, "items": [
{
"quantity": 1,
"variation_id": "20e7d183-c70c-445e-8ce2-4d7e3a378e34"
}
], "note": "đây là ghi chú", "images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/5/27/ee3be79d1574735ed35539ca48f7f6e9d7137706.jpg"
], "inserted_at": "2025-03-11T09:24:42" } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| from\_warehouse\_id | true | uid | Mã kho gốc |
| to\_warehouse\_ids | true | array | Mã kho nhận |
| shipping\_fee | false | int | Phí vận chuyển |
| note | false | string | Ghi chú |
| images | false | array | Link hình ảnh chuyển kho |
| inserted\_at | false | iso 8601 | Thời điểm tạo |
| items | true | array | Danh sách sản phẩm |
| item.quantity | true | int | Số lượng |
| item.variation\_id | true | uid | Mã mẫu mã |

## Cập nhật phiếu chuyển kho

PUT /shops/<SHOP_ID>/transfers/<TRANSFER_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "transfer": { "status": 1, "from_warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "shipping_fee": 10000, "items": [
{
"variation_id": "51bb0bb7-77e9-407e-9f57-5072a0236cb4",
"quantity": 1
}
], "note": "Chuyển kho bán hàng", "images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2024/8/30/7886ccd76d3629808d21fa3e59849c8e79a28162.png"
], "inserted_at": "2025-03-11T09:24:42", "change_inserted_at": true } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| status | true | int | Trạng thái |
| from\_warehouse\_id | true | uid | Mã kho gốc |
| shipping\_fee | false | int | Phí vận chuyển |
| note | false | string | Ghi chú |
| images | false | array | Link hình ảnh chuyển kho |
| inserted\_at | false | iso 8601 | Thời điểm tạo |
| change\_inserted\_at | false / (true nếu có params inserted\_at) | boolean | Thay đổi ngày tạo |
| items | false | array | Danh sách sản phẩm |
| items.variation\_id | true | string | Mã mẫu mã |
| items.quantity | true | int | Số lượng chuyển kho |

| Status | Tên trạng thái |
| --- | --- |
| 0 | Chờ chuyển hàng |
| 1 | Đang chuyển hàng |
| 2 | Hoàn tất |
| 2 | Đã hủy |

# Kiểm hàng

## Danh sách kiểm hàng

GET /shops/<SHOP_ID>/stocktakings?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"display_id": null,
"id": "4d0f479d-feab-489b-bc82-4a656902a20b",
"inserted_at": "2023-10-11T08:25:18",
"note": "Kiểm hàng tồn",
"progress": 0,
"shop_id": 20,
"status": 0,
"stocktaking_at": "2023-10-11T08:24:56",
"stocktaking_by": "category_ids",
"stocktaking_by_value": [
"1315"
],
"updated_at": "2023-10-11T09:03:03",
"updated_status_at": "2023-10-11T08:25:18",
"warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da"
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 258, "total_pages": 9 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page | true | int | 1 |  |
| page\_size | true | int | 30 |  |
| status | true | int | -2 | Trạng thái |

| Status | Tên trạng thái |
| --- | --- |
| -2 | Tất cả trạng thái |
| -1 | Đang tạo |
| 0 | Kiểm hàng |
| 1 | Đã kiểm hàng |
| 2 | Đã hủy |

## Lấy thông tin 1 phiếu kiểm hàng

GET /shops/<SHOP_ID>/stocktakings/<STOCKTAKING_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "data": { "creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097", "display_id": null, "id": "4d0f479d-feab-489b-bc82-4a656902a20b", "inserted_at": "2023-10-11T08:25:18", "items": [
{
"changed_quantity": 12,
"current_quantity": 0,
"id": "cb244b25-100e-4eaa-8b8f-0e72c5642631",
"inserted_at": "2024-12-02T10:42:39",
"note": null,
"shop_id": 20,
"updated_at": "2024-12-02T10:42:39",
"variation_id": "27b3f94b-c945-4560-b694-a59526cae9a5",
"variation": {
"barcode": "12ml-6291107458328",
"display_id": "1",
"fields": [],
"id": "27b3f94b-c945-4560-b694-a59526cae9a5",
"images": [
"https://statics.pancake.vn/user-content.pancake.vn/2023/4/12/05138842c6f772cde332fd8e1be1bff58245f19e.png"
],
"last_imported_price": 20000,
"product": {
"display_id": "12ml-6291107458328",
"image": null,
"name": "12ml Badee Al Oud",
"note_product": ""
},
"product_id": "61894c4f-d759-45b7-acf7-ff5e88082016",
"retail_price": 240000,
"weight": 1000,
}
}
], "note": "Kiểm hàng tồn", "progress": 0, "shop_id": 20, "status": 0, "stocktaking_at": "2023-10-11T08:24:56", "stocktaking_by": "category_ids", "stocktaking_by_value": [
"1315"
], "updated_at": "2023-10-11T09:03:03", "updated_status_at": "2023-10-11T08:25:18", "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da" } "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| creator\_id | uid | Mã người tạo |
| display\_id | int | Mã phiếu kiểm |
| inserted\_at | unix timestamp | Thời điểm tạo |
| items (1) | array | Danh sách sản phầm |
| note | string | Ghi chú |
| progress | int | Phần trăm xử lý |
| shop\_id | int | Mã shop |
| status | int | Trạng thái |
| stocktaking\_at | unix timestamp | Kiểm hàng lúc |
| stocktaking\_by (2) | string | Kiểm hàng theo |
| stocktaking\_by\_value | array | Mã danh mục / Mã nhà cung cấp / Mã thương hiệu |
| updated\_at | unix timestamp | Cập nhật lúc |
| updated\_status\_at | unix timestamp | Cập nhật trạng thái lúc |
| warehouse\_id | uid | Mã kho hàng |

### items (1)

| Parameter | Type | Description |
| --- | --- | --- |
| changed\_quantity | int | Số lượng thay đổi |
| current\_quantity | int | Số lượng hiện tại |
| note | string | Ghi chú |
| inserted\_at | unix timestamp | Thời điểm tạo |
| updated\_at | unix timestamp | Cập nhật lúc |
| variation\_id | string | Mã mẫu mã |
| variation | json | Thông tin mẫu mã |

### (2) stocktaking\_by

| value | Description |
| --- | --- |
| category\_ids | Danh mục |
| supplier\_product\_ids | Nhà cung cấp |
| brand\_id | Thương hiệu |

## Tạo phiếu kiểm hàng

POST /shops/<SHOP_ID>/stocktakings?api_key=<api_key> HTTP/1.1


> Request

{ "stocktaking": { "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da", "items": [
{
"variation_id": "20e7d183-c70c-445e-8ce2-4d7e3a378e34",
"changed_quantity": -1
}
], "note": "Kiểm hàng tồn", "status": 0, "inserted_at": "2025-04-04T10:42:40.100Z", "stocktaking_at": "2023-10-11T10:38:34.542Z", "stocktaking_by": "category_ids", "stocktaking_by_value": [
"1315"
] } }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| warehouse\_id | true | uid | Mã kho hàng |
| items | true | array | Danh sách sản phầm |
| items.variation\_id | true | string | Mã mẫu mã |
| items.changed\_quantity | true | int | Số lượng thay đổi |
| note | false | string | Ghi chú |
| status | true | int | Trạng thái phiếu xuất |
| inserted\_at | false | unix timestamp | Thời điểm tạo |
| stocktaking\_at | false | unix timestamp | Kiểm hàng lúc |
| stocktaking\_by (1.0) | false | string | Kiểm hàng theo |
| stocktaking\_by\_value | false | array | Mã danh mục / Mã nhà cung cấp / Mã thương hiệu |

## Cập nhật kiểm hàng

PUT /shops/<SHOP_ID>/stocktakings/<STOCKTAKING_ID>?api_key=<api_key> HTTP/1.1


> Request

{ "stocktaking": { "creator_id": "890f9367-45cd-43e9-b2cc-ffccda390405", "id": "39d023e9-fae5-4eed-a882-2be9d33914b4", "items": [
{
"changed_quantity": -1,
"id": "f852fd0b-d299-4ca9-8961-59afead3345b",
"variation_id": "20e7d183-c70c-445e-8ce2-4d7e3a378e34"
}
], "note": "Kiểm hàng tồn", "status": 0, "stocktaking_at": "2023-10-11T10:38:34", "stocktaking_by": "category_ids", "stocktaking_by_value": [
"1315"
], "warehouse_id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da" } }


### Query Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| creator\_id | false | uid | Mã người tạo |
| id | true | uid | Mã phiếu kiểm |
| items | true | array | Danh sách sản phầm |
| items.changed\_quantity | true | int | Số lượng thay đổi |
| items.id | true (Cập nhật) / false (Tạo) | uid | Mã hạng mục kiểm hàng |
| items.variation\_id | true | string | Mã mẫu mã |
| note | false | string | Ghi chú |
| status | true | int | Trạng thái phiếu xuất |
| stocktaking\_at | false | unix timestamp | Kiểm hàng lúc |
| stocktaking\_by (1.0) | false | string | Kiểm hàng theo |
| stocktaking\_by\_value | false | array | Mã danh mục / Mã nhà cung cấp / Mã thương hiệu |
| warehouse\_id | true | uid | Mã kho hàng |

# Lịch sử xuất nhập kho

GET /shops/<SHOP_ID>/inventory_histories?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"avg_price": 100000,
"current_inventory": [
{
"actual_remain_quantity": 1170,
"avg_price": 242295.345104334,
"id": "c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da",
"name": "Kho mặc định",
"remain_quantity": 968,
"total_quantity": 1246
}
],
"editor_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"id": 186206,
"inserted_at": "2024-06-10T10:03:53.015323",
"quantity": -1,
"ref_display_id": "433",
"remain_quantity": 3387,
"table_name": "warehouse_transfers",
"type": "Tạo phiếu chuyển kho #433",
"variation_now": {
"barcode": null,
"display_id": "Nam Pari TX",
"fields": [
{
"id": "56e0ac18-3bd0-47ac-91ba-0f4056326c1d",
"keyValue": "WHITE",
"name": "Color",
"value": "WHITE"
}
],
"id": "76887a5b-8a27-472c-a15a-661ea59434dd",
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/9/29/d05f44dcf2b9f96312d88b718da35aa5317242d6.jpg"
],
"is_hidden": false,
"is_locked": false,
"is_sell_negative_variation": true,
"last_imported_price": 100000,
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"retail_price": 200000,
"weight": 700,
},
"warehouse": {
"custom_id": null,
"ffm_id": null,
"full_address": "22, Jalan Kiara 6 jalan utamah pekan nanas johor 81500, Pekan Nenas, Johor, 81500",
"id": "c0b42d67-7b53-48b7-9119-29c5b6e18d19",
"name": "kho Malay",
"phone_number": "0984565082"
}
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 1, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Example | Description |
| --- | --- | --- | --- | --- |
| page | true | int | 1 |  |
| page\_size | true | int | 30 |  |
| warehouse\_id | false | iud | c52e67ad-d9d0-4276-abe4-e0c9f1f7d2da | Mã kho hàng |
| variation\_ids | false | array | \["76887a5b-8a27-472c-a15a-661ea59434dd"\] | Mã mẫu mã |
| startDate | false | unix timestamp | 1716310800 | Ngày bắt đầu |
| endDate | false | unix timestamp | 1718989199 | Ngày kết thúc |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| avg\_price | int | Giá nhập trung bình |
| current\_inventory | array | Thông tin tồn kho hiện tại |
| editor\_id | uid | Mã nhân viên cập nhật |
| id | int | Mã xuất nhập kho |
| inserted\_at | unix timestamp | Thời điểm tạo |
| quantity | int | Số lượng thay đổi |
| remain\_quantity | int | Tồn kho |
| variation\_now | json | Thông tin mẫu mã |
| warehouse | json | Kho thay đổi tồn |

# Phiếu giảm giá

## Danh sách phiếu giảm giá

GET /shops/<SHOP_ID>/vouchers?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"creator_id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"customer_tags": [
"Tiềm năng",
"Hay hoàn"
],
"display_id": 8,
"end_time": "2021-12-12T08:22:31",
"id": "33640b56-4230-49b6-aa68-2fdb6b5ae77d",
"inserted_at": "2021-12-06T08:22:43",
"is_activated": false,
"is_free_shipping": true,
"is_used": null,
"name": "bJZQBEXc",
"promo_code_info": {
"discount": 1234560,
"is_percent": false,
"max_discount_by_percent": 0
},
"shop_id": 3,
"start_time": "2021-12-10T08:22:28",
"type": "discount_by_coupon_id",
"updated_at": "2021-12-06T08:22:43"
},
{
"creator_id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"customer_tags": [
"Tiềm năng"
],
"display_id": 7,
"end_time": "2021-12-10T04:27:26",
"id": "9589b791-013f-4a5b-b8d1-164fad73d84e",
"inserted_at": "2021-12-06T04:27:40",
"is_activated": true,
"is_free_shipping": false,
"is_used": null,
"name": "d5IvGYtj",
"promo_code_info": {
"discount": 4534,
"is_percent": false,
"max_discount_by_percent": 0
},
"shop_id": 3,
"start_time": "2021-12-09T04:27:23",
"type": "discount_by_coupon_id",
"updated_at": "2021-12-10T02:26:59"
},
{
"creator_id": "d6e6a545-f102-439e-9943-8ac8369f9735",
"customer_tags": [
"Hay hoàn"
],
"display_id": 6,
"end_time": "2021-12-05T08:14:04",
"id": "0da90bea-b879-4679-a959-b7f8370073b6",
"inserted_at": "2021-12-04T08:14:11",
"is_activated": true,
"is_free_shipping": false,
"is_used": null,
"name": "k3L7AUrV",
"promo_code_info": {
"discount": 2000,
"is_percent": true,
"max_discount_by_percent": 0
},
"shop_id": 3,
"start_time": "2021-12-04T08:14:02",
"type": "discount_by_coupon_id",
"updated_at": "2021-12-10T02:27:24"
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| name | string | Mã giảm giá |
| start\_time | unix timestamp | Ngày bắt đầu áp dụng |
| end\_time | unix timestamp | Ngày kết thúc áp dụng |
| promo\_code\_info | json | Thông tin giảm giá |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_activated | boolean | Đã kích hoạt |
| is\_used | boolean | Đã sử dụng |
| creator\_id | int | Người tạo phiếu |
| inserted\_at | unix timestamp | Thời điểm tạo phiếu |
| updated\_at | unix timestamp | Thời điểm cập nhật phiếu |
| display\_id | int | Mã hiển thị phiếu giảm giá |
| id | int | Id phiếu giảm giá |
| shop\_id | int | Mã shop |
| type | string | Loại phiếu giảm giá |
| customer\_tags | Array | Thẻ khách hàng |

### promo\_code\_info

| Parameter | Type | Description |
| --- | --- | --- |
| discount | int | Số tiền giảm giá |
| is\_percent | boolean | Giảm giá theo phần trăm |
| max\_discount\_by\_percent | int | Phần trăm giảm tối đa |

## Lấy thông tin phiếu giảm giá

GET /shops/<SHOP_ID>/vouchers/<VOUCHER_ID>?api_key=<api_key> HTTP/1.1


> Response

{ "creator_id": "d6e6a545-f102-439e-9943-8ac8369f9735", "customer_tags": [
"Tiềm năng",
"Hay hoàn"
], "display_id": 7, "end_time": "2021-12-10T04:27:26", "id": "9589b791-013f-4a5b-b8d1-164fad73d84e", "inserted_at": "2021-12-06T04:27:40", "is_activated": true, "is_free_shipping": false, "is_used": null, "name": "d5IvGYtj", "promo_code_info": { "discount": 4534, "is_percent": false, "max_discount_by_percent": 0 }, "shop_id": 3, "start_time": "2021-12-09T04:27:23", "type": "discount_by_coupon_id", "updated_at": "2021-12-06T04:27:40" }


## Tạo phiếu giảm giá

POST /shops/<SHOP_ID>/vouchers?api_key=<api_key> HTTP/1.1


> Request

{ "name": "test_voucher_5", "promo_code_info": { "discount": 53635, "is_percent": false }, "is_free_shipping": false, "is_activated": true, "customer_tags": ["New tag"], "start_time": "2021-12-09T04:27:23", "end_time": "2021-12-10T04:27:26" }


### Request Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| name | string | Mã giảm giá |
| start\_time | unix timestamp | Ngày bắt đầu áp dụng |
| end\_time | unix timestamp | Ngày kết thúc áp dụng |
| promo\_code\_info | json | Thông tin giảm giá |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_activated | boolean | Đã kích hoạt |
| customer\_tags | Array | Thẻ khách hàng |

## Tạo hàng loạt phiếu giảm giá

POST /shops/<SHOP_ID>/vouchers?api_key=<api_key> HTTP/1.1


> Request

{ "create_multi_voucher": 15, "promo_code_info": { "discount": 53635, "is_percent": false }, "is_free_shipping": false, "is_activated": true, "customer_tags": ["New tag"], "start_time": "2021-12-09T04:27:23", "end_time": "2021-12-10T04:27:26" }


### Request Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| create\_multi\_voucher | int | Số lượng phiếu giảm giá |
| start\_time | unix timestamp | Ngày bắt đầu áp dụng |
| end\_time | unix timestamp | Ngày kết thúc áp dụng |
| promo\_code\_info | json | Thông tin giảm giá |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_activated | boolean | Đã kích hoạt |
| customer\_tags | Array | Thẻ khách hàng |

# Khuyến mãi

## Danh sách khuyến mãi

GET /shops/<SHOP_ID>/promotion_products?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"arr_level_promotion": [],
"arr_promotion_products": [
{
"discount_each_product": 0,
"images": [
"https://statics.pancake.vn/user-content-dev2.pancake.vn/2021/5/24/fffa8e0be4ff6aa55b5c1caa8d2bc3eca51ddcac.png"
],
"is_discount_percent": false,
"key": "710da0c2-87ab-4686-b62c-cec219de9833",
"one_time_product": false,
"price_original": 0,
"product_id": "9ddb474a-9a93-4a53-aac5-b7e190685371",
"quantity": 2,
"variation_id": "710da0c2-87ab-4686-b62c-cec219de9833",
"variation_info": {
"bonus_products": [
{
"price_original": "50000",
"quantity": "1",
"variation_id": "a3f18eca-f4bc-41ff-a616-3f476767a799",
"variation_info": {
"id": "1",
"name": "sp1",
"product_id": "sp1",
"retail_price": "0",
"weight": "0"
}
}
],
"brand_id": "f0da0fe6-c585-48af-b570-d2767900789d",
"categories": [
{
"id": 1,
"name": "ffff"
}
],
"category_ids": [
1
],
"custom_id": "xinchao",
"description": null,
"display_id": 82,
"display_id_original": null,
"fields": [
{
"id": "c1164d8f-f3fe-431f-8229-8fb26bd5daf5",
"keyValue": "s",
"name": "size",
"value": "s"
},
{
"id": "17eee851-f9f6-4d24-b4da-27bb9eb063df",
"keyValue": "do",
"name": "màu",
"value": "do"
}
],
"id": 1,
"ignore_awarded_point": null,
"inserted_at": "2021-05-26T07:12:14",
"is_sell_negative": null,
"limit_quantity_to_warn": 0,
"manipulation_warehouses": [],
"name": "xinchao",
"note_product": "",
"offline_id": null,
"product_attributes": [
{
"id": "4f0c6fe1-fed7-4d6b-bc5d-4809856c6ac6",
"keyword": [
{
"keyValue": "do",
"value": "do"
},
{
"keyValue": "vang",
"value": "vang"
}
],
"name": "màu",
"values": [
"do",
"vang"
]
},
{
"id": "4861715c-eba9-47ec-be3f-14cc143b4bf5",
"keyword": [
{
"keyValue": "s",
"value": "s"
},
{
"keyValue": "x",
"value": "x"
}
],
"name": "size",
"values": [
"s",
"x"
]
}
],
"product_id": "xinchao",
"product_links": [],
"retail_price": 0,
"shop_warranty_policy_id": null,
"supplier_product_ids": [],
"tags": [
{
"id": 2,
"note": "dan choi 2*"
}
],
"third_parties": null,
"warning_by_variation": null,
"warranty_period": null
},
"variations_warehouses": [
{
"actual_remain_quantity": 34,
"adjustments": [
{
"actual_remain_changed": 10,
"edited_at": "2021-05-26T08:14:10.517835",
"editor": {
"fb_id": "1302588949892988",
"id": "84616be7-7a6b-4f58-af37-2c64d9ee04a9",
"name": "Huỳnh Đăng"
},
"note": null,
"remain_changed": 10,
"stocktaking_display_id": null,
"total_changed": 10,
"warehouse_id": "7442b538-002b-42e3-8520-64425897e2f5",
"warehouse_name": "Kho mặc định"
},
{
"actual_remain_changed": -20,
"edited_at": "2021-05-26T07:33:38.055815",
"editor": {
"fb_id": "1302588949892988",
"id": "84616be7-7a6b-4f58-af37-2c64d9ee04a9",
"name": "Huỳnh Đăng"
},
"note": null,
"remain_changed": -20,
"stocktaking_display_id": null,
"total_changed": 0,
"warehouse_id": "7442b538-002b-42e3-8520-64425897e2f5",
"warehouse_name": "Kho mặc định"
}
],
"batch_position": "1.A.1",
"defect_quantity": 0,
"id": "ae19c130-1a99-4aa8-b53f-0e42b387abe1",
"pending_quantity": 0,
"pending_transfer_quantity": 0,
"quantity_in_batch": 18,
"remain_quantity": 34,
"returning_quantity": 0,
"shelf_position": "1.A.2",
"shelf_quantity": 0,
"shipping_quantity": 0,
"total_quantity": 73,
"total_quantity_transfer": 0,
"transfer_quantity": 0,
"variation_id": "710da0c2-87ab-4686-b62c-cec219de9833",
"waitting_quantity": 0,
"warehouse_id": "7442b538-002b-42e3-8520-64425897e2f5"
}
]
}
],
"brands": [],
"categories": [],
"char_name_product": "",
"creator_id": null,
"discount_amount": 0,
"discount_categories": [],
"end_price_product": 0,
"id": 11,
"inserted_at": "2021-10-13T02:22:04",
"is_active": false,
"is_free_shipping": false,
"is_use_percent": false,
"max_promotion_by_percent": 0,
"name": "test1",
"product_tags": [],
"promotion_percent": 0,
"quantity_product": 0,
"quantity_same_product": 8,
"shop_id": 3,
"start_price_product": 0,
"total_orders": 0,
"updated_at": "2021-10-22T08:57:00"
}
], "success": true }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| textSearch | false | string | null | Từ khóa tìm kiếm |

### Reponse Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| arr\_level\_promotion | array | Mức độ khuyến mãi |
| arr\_promotion\_products | array | Sản phẩm khuyến mãi |
| brands | array | Thương hiệu |
| categories | array | Danh mục |
| char\_name\_product | string | Tên sản phẩm không chứa kí tự |
| creator\_id | string | Người tạo |
| discount\_amount | int | Số tiền giảm giá |
| discount\_categories | array | Danh mục sản phẩm khuyến mãi |
| end\_price\_product | int | Giá lớn nhất sản phẩm khuyến mãi |
| id | int | Mã khuyến mãi |
| inserted\_at | string | Thời điểm tạo |
| is\_active | boolean | Đã kích hoạt |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_use\_percent | boolean | Giảm giá theo phần trăm |
| max\_promotion\_by\_percent | int | Phần trăm giảm tối đa |
| name | string | Tên khuyến mãi |
| product\_tags | array | Thẻ sản phẩm |
| promotion\_percent | int | Phần trăm giảm giá |
| quantity\_product | int | Số lượng sản phẩm |
| quantity\_same\_product | int | Số lượng cùng loại sản phẩm |
| shop\_id | int | Mã shop |
| start\_price\_product | int | Giá nhỏ nhất sản phẩm khuyến mãi |
| total\_orders | int | Tổng số đơn hàng |
| updated\_at | string | Thời điểm cập nhật |

## Tạo khuyến mãi

POST /shops/<SHOP_ID>/promotion_products?api_key=<api_key> HTTP/1.1

{ "promotion_product": { "arr_level_promotion": [], "arr_promotion_products": [], "brands": [], "categories": [], "char_name_product": "", "discount_amount": 600, "discount_categories": [], "discount_promotion": 0, "end_price_product": 500, "is_active": true, "is_free_shipping": false, "is_use_percent": false, "max_promotion_by_percent": 0, "name": "km_thu2", "product_tags": [], "promotion_percent": 0, "quantity_product": 3, "quantity_same_product": 0, "start_price_product": 300, "total_orders": 1000 } }


## Cập nhật khuyến mãi

PUT /shops/<SHOP_ID>/promotion_products/?api_key=<api_key> HTTP/1.1

{ "promotion_product": { "arr_level_promotion": [], "arr_promotion_products": [], "brands": [], "categories": [], "char_name_product": "", "discount_amount": 600, "discount_categories": [], "discount_promotion": 0, "end_price_product": 500, "is_active": true, "is_free_shipping": false, "is_use_percent": false, "max_promotion_by_percent": 0, "name": "update_km_thu2", "product_tags": [], "promotion_percent": 0, "quantity_product": 3, "quantity_same_product": 0, "start_price_product": 300, "total_orders": 1000 } }


## Danh sách khuyến mãi nâng cao

GET /shops/<SHOP_ID>/promotion_advance?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"arr_level_promotion": [],
"bonus_items": [],
"coupon_info": {
"discount": 0,
"is_percent": false
},
"creator_id": "4eab0efc-2994-4b96-acf0-e4c847668555",
"customer_tags": [],
"discount_by_quantity": 1,
"display_id": 50,
"end_time": "2022-03-11T05:04:13",
"group_name": "Nhóm 1",
"id": "260a0d45-ba88-457b-8b31-afa3fda0ce0e",
"inserted_at": "2022-03-10T05:04:33",
"is_activated": true,
"is_discount_in_birthday_customer": false,
"is_free_shipping": false,
"is_used": null,
"is_variation": true,
"level_order_prices": [],
"name": "km 345",
"order_sources": [],
"post_ids": [],
"priority_level": null,
"promo_code_info": {
"discount": 0,
"is_percent": false,
"max_discount_by_percent": 0
},
"shop_id": 3,
"start_time": "2022-03-10T05:04:11",
"total_quantity_bonus": 0,
"type": "discount_by_product",
"type_employee": "all",
"updated_at": "2022-04-08T08:14:58",
"warehouse_ids": []
},
{
"arr_level_promotion": [],
"bonus_items": [],
"coupon_info": null,
"creator_id": "20e88bf5-b755-4cc1-9f2e-740fa5a0a9d8",
"customer_tags": [
"New tag"
],
"discount_by_quantity": 0,
"display_id": 46,
"end_time": null,
"group_name": "Nhóm 1",
"id": "9338e84b-5796-468c-856c-450d5ae73e35",
"inserted_at": "2021-12-18T10:17:12",
"is_activated": true,
"is_discount_in_birthday_customer": null,
"is_free_shipping": false,
"is_used": null,
"is_variation": true,
"level_order_prices": null,
"name": "km 454",
"order_sources": [],
"post_ids": [],
"priority_level": null,
"promo_code_info": {
"discount": 53635,
"is_percent": false
},
"shop_id": 3,
"start_time": null,
"total_quantity_bonus": 0,
"type": "discount_by_coupon_id",
"type_employee": null,
"updated_at": "2021-12-18T10:17:12",
"warehouse_ids": []
}
], "page_number": 1, "page_size": 2, "success": true, "total_entries": 23, "total_pages": 12 }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page | false | int | 1 | Thứ tự trang |
| page\_size | false | int | 10 | Số bản ghi hiển thị trong 1 trang |
| textSearch | false | string | null | Từ khóa tìm kiếm |

### Reponse Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| arr\_level\_promotion | array | Mức độ khuyến mãi |
| bonus\_items | array | Sản phẩm tặng thêm |
| coupon\_info | json | Thông tin phiếu giảm giá |
| creator\_id | string | Người tạo |
| customer\_tags | array | Thẻ khách hàng |
| discount\_by\_quantity | int | Số lượng giảm giá |
| display\_id | string | Mã hiển thị khuyến mãi |
| end\_time | string | Thời gian kết thúc |
| group\_name | string | Nhóm khuyến mãi |
| id | string | Mã khuyến mãi |
| inserted\_at | string | Thời điểm tạo |
| is\_activated | boolean | Đã kích hoạt |
| is\_discount\_in\_birthday\_customer | boolean | Khuyến mãi cho sinh nhật |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_used | boolean | Đã sử dụng |
| is\_variation | boolean | Khuyến mãi theo mẫu mã |
| level\_order\_prices | json | Mức khuyến mãi đơn hàng |
| name | string | Tên khuyến mãi |
| order\_sources | array | Nguồn đơn hàng |
| post\_ids | array | Mã bài viết |
| priority\_level | int | Mức độ ưu tiên |
| promo\_code\_info | json | Thông tin mã khuyến mãi |
| discount | int | Chiết khấu |
| is\_percent | boolean | Giảm giá theo phần trăm |
| max\_discount\_by\_percent | int | Phần trăm giảm tối đa |
| shop\_id | int | Mã shop |
| start\_time | string | Thời gian bắt đầu |
| total\_quantity\_bonus | int | Tổng số lượng khuyến mãi |
| type | string | Loại khuyến mãi |
| type\_employee | string | Phân loại nhân viên |
| updated\_at | string | Thời điểm cập nhật |
| warehouse\_ids | array | Mã kho hàng |

## Tạo khuyến mãi nâng cao

POST /shops/<SHOP_ID>/promotion_advance?api_key=<api_key> HTTP/1.1


> Request

{ "promotion_advance": { "name": "wert234454", "start_time": null, "end_time": null, "warehouse_ids": [
"-1"
], "customer_tags": [], "order_sources": [], "type_employee": "all", "type": "discount_by_product", "level_order_prices": [], "group_name": "Nhóm 1", "is_activated": true, "is_variation": true, "coupon_info": { "discount": 0, "is_percent": false }, "promo_code_info": { "discount": 0, "is_percent": false, "max_discount_by_percent": 0 }, "items": [], "is_free_shipping": false, "discount_by_quantity": 0, "bonus_items": [], "is_discount_in_birthday_customer": false, "arr_level_promotion": [], "total_quantity_bonus": 0, "priority_level": null, "isLoadingItem": false, "post_ids": [] } }


### Loại khuyến mãi

| Type | Description |
| --- | --- |
| discount\_by\_coupon\_id | Khuyến mãi theo mã |
| discount\_by\_product | Khuyến mãi theo sản phẩm |
| fixed\_prices | Khuyến mãi theo giá cố định |
| coupon | Phiếu giảm giá |
| double\_reward\_point | Nhân đôi điểm thưởng |
| discount\_by\_entire\_or\_category\_product | Giảm giá toàn bộ hoặc theo danh mục |
| discount\_by\_order\_price | Giảm giá theo giá trị đơn hàng |

## Cập nhật khuyến mãi nâng cao

PUT /shops/<SHOP_ID>/promotion_advance/?api_key=<api_key> HTTP/1.1


> Request

{ "promotion_advance": { "arr_level_promotion": [], "bonus_items": [], "coupon_info": { "discount": 0, "is_percent": false }, "creator_id": "4eab0efc-2994-4b96-acf0-e4c847668555", "customer_tags": [], "discount_by_quantity": 1, "display_id": 50, "end_time": "2022-03-11T05:04:13", "id": "260a0d45-ba88-457b-8b31-afa3fda0ce0e", "inserted_at": "2022-03-10T05:04:33", "is_activated": true, "group_name": "Nhóm 1", "is_discount_in_birthday_customer": false, "is_free_shipping": false, "is_used": null, "is_variation": true, "level_order_prices": [], "name": "test cap nhat km555555", "order_sources": [], "post_ids": [], "priority_level": null, "promo_code_info": { "discount": 0, "is_percent": false, "max_discount_by_percent": 0 }, "shop_id": 3, "start_time": "2022-03-10T05:04:11", "total_quantity_bonus": 0, "type": "discount_by_product", "type_employee": "all", "updated_at": "2022-03-10T05:04:33", "warehouse_ids": [] } }


# Combo sản phẩm

## Danh sách combo

GET /shops/<SHOP_ID>/combo_products?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"currency": "VND",
"custom_id": null,
"discount_amount": 10000,
"discount_by_percent": 0,
"end_time": "2024-07-19T16:59:59",
"id": 282,
"inserted_at": "2024-06-19T10:42:33",
"is_free_shipping": true,
"is_use_percent": false,
"is_value_combo": false,
"is_variation": true,
"max_discount_by_percent": 0,
"name": "combo 1",
"order_sources": [
{
"account": null,
"key": "-2",
"page_id": null
}
],
"order_types": [
"all"
],
"shop_id": 20,
"snippet": null,
"start_time": "2024-06-18T17:00:00",
"updated_at": "2024-06-19T10:42:33",
"value_combo": 0,
"bonus_products": [
{
"discount_each_product": 0,
"images": [
"https://statics.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"key": "fd46af68-9c2c-419b-adb6-309cd01a548c",
"price_original": 200000,
"product_id": "3116c7bc-d206-4c6c-a6e9-13b7999a543a",
"quantity": 1,
"variation_id": "fd46af68-9c2c-419b-adb6-309cd01a548c",
"variation_info": {
"product_attributes": [
{
"id": "3b3fe83f-cd98-4f1a-80c6-9141e8737cba",
"name": "Size",
"values": ["S"]
}
],
"manipulation_warehouses": [],
"retail_price": 0,
"is_sell_negative": null,
"id": "XXL-yellow",
"product_id": "áo phông nam",
"categories": [
{
"id": 564,
"name": "danh muc 1"
}
],
"shop_id": 20,
"type": "product",
"note": "xoas",
"custom_id": "áo phông nam",
"supplier_product_ids": [
225
],
"product_links": [
"https://metruyenchu.com/truyen/chu-thien-van-gioi-nhan-vat-chinh-deu-la-ta-de/chuong-4"
],
"inserted_at": "2022-06-04T07:30:05",
"name": "áo phông nam",
"keyword": null,
"description": null,
"brand_id": "a205de96-1d36-443e-9dd8-5f12f1b26909",
"note_product": "asd",
"tags": [
{
"id": 95,
"note": "thẻ 3. 2"
}
],
"display_id": 11772
}
}
],
"variations": [
{
"keyword": "xx",
"weight": 200,
"retail_price_currency_original": 200000,
"images": [
"https://content.pancake.vn/user-content-dev2.pancake.vn/2022/7/7/eb376f0bf90f47d25396d49e4d547700f182981b.jpg"
],
"variations_warehouses": [
{
"actual_remain_quantity": 0,
"available_quantity": 0,
"avg_price": 100000,
"defect_quantity": 0,
"id": "313f126b-f690-423e-82b5-939e5a7a72c4",
"pending_export_quantity": 0,
"pending_quantity": 0,
"pending_transfer_quantity": 0,
"quantity_in_batch": 0,
"remain_quantity": -1,
"returning_quantity": 0,
"shipping_quantity": 0,
"shop_id": 20,
"total_quantity": 0,
"total_quantity_transfer": 0,
"transfer_quantity": 0,
"variation_id": "23f91ea1-5cb8-46a1-a8a6-e3819af9abad",
"waitting_quantity": 0,
"warehouse_id": "f8aef54c-7e19-412c-9109-cae52c45cad0"
}
],
"custom_id": "Nam Pari XX",
"discount_percentage": "0%",
"id": "23f91ea1-5cb8-46a1-a8a6-e3819af9abad",
"product_id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"remain_quantity": 2651,
"limit_quantity_to_warn": 0,
"price_at_counter": 0,
"last_imported_price": 100000,
"profit_rate": 50,
"count": 1,
"is_sell_negative_variation": null,
"videos": null,
"shop_id": 20,
"original_price": null,
"size": {
"height": 3,
"id": "30bc4d59-f934-4c6b-b6a5-5409289aee32",
"length": 1,
"width": 2
},
"offline_id": null,
"wholesale_price": 0,
"defect_quantity": 15,
"composite_products": [],
"fields": [
{
"id": "283d9e1d-c254-4bad-8d69-19be477f2512",
"keyValue": "BLUE",
"name": "Color",
"value": "BLUE"
}
],
"product": {
"name": "Áo thời trang Nam Pari đơn giản đẹp",
"combo_product_variation_id": 491,
"creator_id": "cee3c05e-5f85-43c4-b27e-889b99c50097",
"custom_id": "ANPR",
"type": "product",
"inserted_at": "2023-01-27T07:55:09",
"brand_id": null,
"lifecycle_days": 0,
"id": "73ec61e2-52e3-41dd-bd24-b7ec1035184d",
"limit_quantity_to_warn": 3,
"manipulation_warehouses": [],
"count": 1,
"shop_id": 20,
"categories": [
{
"id": 590,
"name": "Áo Phông"
}
],
"warning_by_variation": false,
"product_links": [
"www.product.com",
"google.com.vn"
],
"note_product": null,
"display_id": 12392,
"is_price_by_weight": false,
"ignore_awarded_point": null,
"updated_at": "2024-11-15T07:44:17",
"category_ids": [
590
],
"image": null,
"hide_product_name": null,
"measure_group_id": null,
"description": null
},
"retail_price_after_discount": 200000,
"display_id": 2,
"bonus_variations": [],
"barcode": null,
"cogs": 0,
"is_removed": null,
"is_composite": null,
"updated_at": "2024-11-15T02:32:51.303603",
"total_quantity": 3559,
"retail_price": 200000
}
]
}
], "page_number": 1, "page_size": 30, "success": true, "total_entries": 3, "total_pages": 1 }


### Query Parameters

| Parameter | Required | Type | Default |
| --- | --- | --- | --- |
| page | false | int | 1 |
| page\_size | false | int | 30 |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| currency | string | Đơn vị tiền tệ |
| custom\_id | string | Mã tùy chỉnh |
| discount\_amount | int | Số tiền giảm giá |
| discount\_by\_percent | int | Giảm giá theo phần trăm |
| end\_time | unix timestamp | Thời gian kết thúc |
| id | string | Mã combo |
| inserted\_at | unix timestamp | Thời điểm tạo |
| is\_free\_shipping | boolean | Miễn phí vận chuyển |
| is\_use\_percent | boolean | Áp dụng giảm giá theo phần trăm |
| is\_value\_combo | boolean | Áp dụng giá trị combo |
| is\_variation | boolean | Áp dụng cho mẫu mã |
| max\_discount\_by\_percent | int | Số tiền tối đa giảm giá theo phần trăm |
| name | string | Tên combo |
| order\_sources | array | Nguồn đơn hàng áp dụng |
| order\_types | string | Loại đơn hàng áp dụng |
| start\_time | unix timestamp | Thời gian bắt đầu |
| updated\_at | unix timestamp | Cập nhật lúc |
| value\_combo | int | Giá trị combo |
| bonus\_products | array | Sản phẩm tặng kèm |
| variations | array | Danh sách sản phẩm trong combo |

# Tính phí vận chuyển

POST /shops/<SHOP_ID>/orders/price_comparing?api_key=<api_key> HTTP/1.1


> Request

{ "des_province": "805", "des_district": "80511", "des_commune": "8051125", "weight": "0", "warehouse_id": "7442b538-002b-42e3-8520-64425897e2f5", "shop_id": "", "quantity": "1", "price_product": "200000", "cod": "100000" }


> Response

{ "data": [
{
"partner_fee": 45000,
"partner_id": 0,
"partner_name": "Snappy"
},
{
"partner_fee": 40000,
"partner_id": 1,
"partner_name": "GHTK"
},
{
"partner_fee": 0,
"partner_id": 3,
"partner_name": "VTP"
},
{
"partner_fee": 82500,
"partner_id": 5,
"partner_name": "GHN"
},
{
"partner_fee": 0,
"partner_id": 17,
"partner_name": "VNPOST"
},
{
"partner_fee": 0,
"partner_id": 15,
"partner_name": "JNT"
},
{
"partner_fee": 36000,
"partner_id": 16,
"partner_name": "Best Express"
}
], "success": true }


### Request Parameters

| Parameter | Required | Type | Description |
| --- | --- | --- | --- |
| des\_province | true | string | Mã tỉnh/thành phố nhận hàng |
| des\_district | true | string | Mã quận/huyện nhận hàng |
| des\_commune | true | string | Mã phường/xã nhận hàng |
| weight | true | string | Khối lượng |
| warehouse\_id | true | string | Mã kho hàng |
| shop\_id | true | string | Mã shop |
| quantity | true | string | Số lượng |
| price\_product | true | string | Giá sản phẩm |
| cod | true | string | Tổng tiền cần thu |
| service\_vtp | false | string | Mã dịch vụ VTP |
| service\_vnpost | false | string | Mã dịch vụ VNPOST |
| service\_best | false | string | Mã dịch vụ BEST |
| service\_ghn | false | string | Mã dịch vụ GHN |

**Mã dịch vụ VTP**

| Service code | Description |
| --- | --- |
| LCOD | LCOD - Thương mại điện tử đường bộ |
| NCOD | NCOD - Thương mại điện tử đường bay |
| VCN | VCN Chuyển phát nhanh |
| VTK | VTK Tiết kiệm |
| V60 | V60 Dịch vụ Nhanh 60h |
| VVT | VVT Dịch vụ vận tải |
| VHT | VHT Phát hỏa tốc |
| PTN | PTN Phát trong ngày nội tỉnh |
| PHT | PHT Phát hỏa tốc nội tỉnh |
| PHS | PHS Phát hôm sau nội tỉnh |
| VBE | VBE Tiết kiệm theo hộp |
| VBS | VBS Nhanh theo hộp |
| SCOD | SCOD Giao hàng thu tiền |
| ECOD | ECOD Giao hàng thu tiền tiết kiệm |
| V20 | V20 |
| V25 | V25 |
| V30 | V30 |
| V35 | V35 |
| VCBA | VCBA chuyển phát đường bay |
| VCBO | VCBO chuyển phát đường bộ |

**Mã dịch vụ VNPOST**

| Service code | Description |
| --- | --- |
| EMS | EMS - Chuyển phát nhanh |
| BK | BK - Chuyển phát thường |
| ECOD | ECOD - Chuyển phát tiết kiệm |
| BKCOD | BKCOD - TMĐT đến 5kg (VP2) |
| DONG\_GIA | DONG\_GIA - Dịch vụ thỏa thuận riêng giữa khách hàng và VNPost |
| TMDT\_EMS | TMĐT-Chuyển phát nhanh EMS |
| TMDT\_BK | TMĐT-Chuyển phát tiêu chuẩn |
| TMDT\_EMS\_TK | TMĐT-Chuyển phát nhanh EMS tiết kiệm (liên vùng) |

**Mã dịch vụ BEST**

| Service code | Description |
| --- | --- |
| 12490 | Giao hàng nhanh (Express) |
| 12491 | Giao hàng tiết kiệm (Eco) |

**Mã dịch vụ GHN**

| Service code | Description |
| --- | --- |
| 1 | Nhanh |
| 2 | Chuẩn |
| 3 | Tiết kiệm |

### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| partner\_fee | int | Phí vận chuyển từ ĐVVC |
| partner\_id | int | Mã ĐVVC |
| partner\_name | string | Tên đơn vị vận chuyển |

# Đơn vị vận chuyển

GET /shops/<SHOP_ID>/partners?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{"id": 0, "name": "Snappy"},
{"id": 1, "name": "Giao hàng tiết kiệm"},
{"id": 2, "name": "EMS"},
{"id": 4, "name": "247 Express"},
{"id": 5, "name": "Giao hàng nhanh"},
{"id": 7, "name": "VNP"},
{"id": 8, "name": "SPL"},
{"id": 9, "name": "DHL"},
{"id": 10, "name": "J&T Philippines"},
{"id": 11, "name": "Ahamove"},
{"id": 12, "name": "LBC"},
{"id": 13, "name": "Lazada Express"},
{"id": 15, "name": "J&T"},
{"id": 16, "name": "Best Inc"},
{"id": 17, "name": "VN Post v2"},
{"id": 19, "name": "Ninja Van"},
{"id": 32, "name": "SuperShip"},
{"id": 33, "name": "ZTO Express"},
{"id": 36, "name": "NTX"},
{"id": 37, "name": "Grab Express"},
{"id": 38, "name": "Van Phuc"},
{"id": 39, "name": "Hola Ship"},
{"id": 40, "name": "LWE Express"},
{"id": 41, "name": "Flash Express Phi"}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| id | int | Mã ĐVVC |
| name | string | Tên ĐVVC |

# WEBHOOK

Vào giao diện **Cấu hình -> Cấu hình ứng dụng**

Trong khung `WEBHOOK URL` bật ứng dụng, cấu hình các thông tin:

\- Webhook URL (bắt buộc)

\- Email thông báo lỗi

\- Request Headers

\- Dữ liệu - Đơn hàng(POS), Dữ liệu bảng(CRM), Khách hàng(POS, CRM), Tồn kho(POS)

![Webhook](https://api-docs.pancake.vn/images/webhook-76de279b.png)

## Cấu hình Webhook

PUT /shops/<SHOP_ID>?api_key=<api_key> HTTP/1.1


> Response

{ "shop": { "webhook_enable": true, "webhook_url": "https://test.com", "webhook_email": "1234@gmail.com", "webhook_types": ["orders", "customers", "variations_warehouses"], "webhook_partner": "", "webhook_headers": { "X-API-KEY": "elqsF9ERiFWGacWQO9Gg5XC4kXojot" } } }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| webhook\_enable | boolean | Bật/Tắt Webhook |
| webhook\_url | string | Đường dẫn |
| webhook\_email | string | Email thông báo lỗi |
| webhook\_types | array | Dữ liệu Webhook |
| webhook\_partner | string | Đối tác |

## Đơn hàng

**Order Response**

> Response

{ "bill_full_name": "hoang anh ", "bill_phone_number": "0999999999", "page_id": "256469571178082", "creator": { "avatar_url": null, "fb_id": "2042723249341651", "id": "8fbe2a6f-b0b2-4227-a698-19d18c43f7c8", "name": "Hoang Anh" }, "id": 1418, "inserted_at": "2020-05-12T04:51:42", "updated_at": "2020-05-12T04:51:54", "is_free_shipping": false, "is_livestream": true, "is_live_shopping": false, "is_smc": false, "post_id": "185187094667903_477083092110915", "received_at_shop": false, "partner_fee": 28000, "customer_pay_fee": false, "items": [
{
"discount_each_product": 0,
"is_bonus_product": false,
"is_discount_percent": false,
"is_wholesale": false,
"one_time_product": false,
"quantity": 1,
"variation_id": "415040f4-ab63-465e-8699-e9ebfff4c6c7",
"product_id": "3487e126-b0d9-4dae-89a9-ee60bef2f4e9",
"variation_info": {
"detail": null,
"fields": null,
"display_id": null,
"name": "aaaaaa",
"product_display_id": null,
"retail_price": 100000,
"weight": 100
}
}
], "note": "", "note_print": null, "returned_reason": 1, "partner": { "cod": 0, "custom_partner_id": null, "extend_code": "S58824.MB25.C3.500020713", "extend_update": [], "is_returned": null, "order_number_vtp": null, "paid_at": null, "partner_id": 1, "sort_code": null, "system_created": true, "total_fee": 0, "updated_at": "2020-05-12T05:18:16" }, "payment_purchase_histories": [
{
"amount": 869000,
"inserted_at": "2025-02-11T18:18:19.000000",
"ipn_reply": true,
"result_code": "0",
"tags": [
"static"
],
"type": "techcombank",
"voucher_amount": 0
}
], "warehouse_id": "630744ef-4614-4a70-988c-52e6d78c953c", "shipping_address": { "address": "aaaaa", "commune_id": "2210941", "country_code": null, "district_id": "22109", "full_address": "aaaaa, Xã Bắc Lý, Huyện Hiệp Hòa, Bắc Giang", "full_name": "hoang anh ", "phone_number": "0999999999", "post_code": null, "province_id": "221" }, "shipping_fee": 0, "shop_id": 4, "status": 0, "status_name": "new", "tags": [
{
"id": 2,
"name": "Chờ cọc"
},
{
"id": 3,
"name": "Nhập hàng"
},
{
"id": 13,
"name": "Delay lấy hàng"
}
], "total_discount": 0, "warehouse_info": { "district_id": "10111", "full_address": "kakakaka, Phường Khương Trung, Quận Thanh Xuân, Hà Nội", "name": "snappy", "phone_number": "0999999999", "province_id": "101" } }


## CRM

**CRM Response**

> Response

{ "data": { "record": { "Address": "123", "CreatedBy": "6dcd3606-092a-467c-85d1-3149789cd470", "CreatedOn": "2019-06-21 10:50:21.411404", "Email": "qvasdaaasd@gmail.com", "LastContactAt": "2019-06-25T10:50:17.867Z", "LastContactUser": null, "ModifiedBy": "340644fc-314d-450e-a45f-33343678cab6", "ModifiedOn": "2020-11-03 16:02:50.217203", }, "success": true } }


## Khách hàng

**Customer Response**

> Response

{ "id": "00094712-d419-4f27-a8cc-e5ac9ed2dd75", "name": "Customer", "phone_numbers": ["0912312312"], "ad_clicks": [
{
"ad_id": "23851252560290199",
"inserted_at": "2022-03-22T13:58:12",
"post_id":"155703382366461_451824450048652"
},
{
"ad_id": "23845321522860199",
"inserted_at": "2022-03-25T03:32:12",
"post_id": "109703394252261_451873526716231"
}
], "birthday": null, "gender": "male", "customer_tags": ["tag 1", "tag 2"], "emails": ["hi@gmail.com"], "page_id": "4124125124323223", "reward_point": 100, "adjust_points": 20, "shop_id": 10, "type": "customers" }


## Tồn kho

> Response

{ "data": { "record": { "actual_remain_quantity": 1, "remain_quantity": 1, "type": "variations_warehouses", "variation_id": "1996b3cd-fd72-4bd8-8889-a7f387821368", "warehouse_id": "77cbe2d5-6e65-4220-9c57-5d5d34f847e2", "change_quantity": -1, "is_actual_remain_quantity": false, "inserted_at": "2023-05-26 04:02:00.324609" }, "success": true } }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| actual\_remain\_quantity | int | SL tồn kho |
| remain\_quantity | int | Số lượng mẫu mã còn lại |
| variation\_id | uid | Mã mẫu mã |
| warehouse\_id | uid | Mã kho hàng |
| change\_quantity | int | Số lượng thay đổi |
| is\_actual\_remain\_quantity | boolean | False: Là hành động thay đổi số lượng hàng có thể bán, True: Là hành động thay đổi số lượng hàng tồn |
| inserted\_at | string | Thời điểm tạo |

# CRM

## List of tables

GET /shops/<SHOP_ID>/crm/tables?api_key=<api_key> HTTP/1.1


> Response

{ "success": true, "tables": [
{
"can_remove": false,
"creator_id": null,
"filters": [],
"icon": null,
"inserted_at": "2021-04-08T08:29:43",
"is_removed": false,
"label": "Contact",
"modified_id": null,
"name": "Contact",
"permission_type": 1,
"sections": [
{
"can_remove": false,
"creator_id": null,
"fields": [
{
"name": "Name",
"label": "Name",
"agg_field_id": null,
"association_multi": true,
"association_table": null,
"association_type": null,
"can_remove": false,
"creator_id": null,
"select_options": [],
"summary_display_field_id": null,
"summary_field_id": null,
"summary_type": null,
"type": 5,
"order": 1,
"quick_update": false,
"is_require": true,
"is_unique": false,
"formulas": null
},
{
"name": "Phone",
"label": "Phone",
"agg_field_id": null,
"association_multi": true,
"association_table": null,
"association_type": null,
"can_remove": false,
"creator_id": null,
"select_options": [],
"summary_display_field_id": null,
"summary_field_id": null,
"summary_type": null,
"type": 2,
"order": 1,
"quick_update": false,
"is_require": true,
"is_unique": false,
"formulas": null
}
]
}
],
"table_permissions": [
{
"id": "3f7ef102-7b45-4198-8783-7f7854b4a64a",
"profile_id": "c25c1d3a-3dae-4877-af1e-5e71a41f6113",
"role": 63,
"table_id": "Contact"
},
{
"id": "ea6c1d47-c230-43b8-a11e-fb61f4b611e4",
"profile_id": "8e4d6a59-47e8-48bf-a51d-eb873ffd7eae",
"role": 31,
"table_id": "Contact"
},
{
"id": "6963295c-fd7c-49c8-ab67-86641a800653",
"profile_id": "58c99b60-2d8a-4edb-b7a2-a907bc874dbb",
"role": 31,
"table_id": "Contact"
}
]
}
] }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| label | string | Label of table |
| name | string | Name of table |
| permission\_type | int | Who can see the table (1. Everyone, 2. Record owner and his manager) |
| sections.order | int | Order of section |
| sections.fields | array | Fields of section |
| sections.fields.order | int | Order fields in the section |
| sections.fields.type | int | Type of field |
| table\_permissions | array | Permission of each group in the table |

## Data of table

GET /shops/<SHOP_ID>/crm/<TABLE_NAME>/records?api_key=<api_key> HTTP/1.1


> Response

{ "data": { "entries": [
{
"Address": "asdasd",
"CreatedBy": "6dcd3606-092a-467c-85d1-3149789cd470",
"CreatedOn": "2019-06-21 10:50:21.411404",
"Email": "qwdasd@gmail.com",
"LastContactAt": "2019-06-25T10:50:17.867Z",
"LastContactUser": null,
"ModifiedBy": "340644fc-314d-450e-a45f-33343678cab6",
"ModifiedOn": "2020-11-03 16:02:50.217203",
},
{
"Address": "123",
"CreatedBy": "6dcd3606-092a-467c-85d1-3149789cd470",
"CreatedOn": "2019-06-21 10:50:21.411404",
"Email": "qvasdaaasd@gmail.com",
"LastContactAt": "2019-06-25T10:50:17.867Z",
"LastContactUser": null,
"ModifiedBy": "340644fc-314d-450e-a45f-33343678cab6",
"ModifiedOn": "2020-11-03 16:02:50.217203",
}
] } }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| page\_size | false | int | 30 |  |
| page | false | int | 1 |  |

## Create Record

POST /shops/<SHOP_ID>/crm/<TABLE_NAME>/records?api_key=<api_key> HTTP/1.1


> Response

{ "data": { "record": { "Address": "123", "CreatedBy": "6dcd3606-092a-467c-85d1-3149789cd470", "CreatedOn": "2019-06-21 10:50:21.411404", "Email": "qvasdaaasd@gmail.com", "LastContactAt": "2019-06-25T10:50:17.867Z", "LastContactUser": null, "ModifiedBy": "340644fc-314d-450e-a45f-33343678cab6", "ModifiedOn": "2020-11-03 16:02:50.217203", }, "success": true } }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| record.field\_name | field.is\_required | string OR array | field.default\_value | Type: array (field.type IN \[10, 14, 15, 17\] OR field.association\_multi) |

## Update Record

PUT /shops/<SHOP_ID>/crm/<TABLE_NAME>/records?api_key=<api_key> HTTP/1.1


> Response

{ "data": { "record": { "Address": "123", "CreatedBy": "6dcd3606-092a-467c-85d1-3149789cd470", "CreatedOn": "2019-06-21 10:50:21.411404", "Email": "qvasdaaasd@gmail.com", "LastContactAt": "2019-06-25T10:50:17.867Z", "LastContactUser": null, "ModifiedBy": "340644fc-314d-450e-a45f-33343678cab6", "ModifiedOn": "2020-11-03 16:02:50.217203", }, "success": true } }


### Query Parameters

| Parameter | Required | Type | Default | Description |
| --- | --- | --- | --- | --- |
| record.field\_name | field.is\_required | string OR array | field.default\_value | Type: array (field.type IN \[10, 14, 15, 17\] OR field.association\_multi) |

## Create Table

POST /shops/<SHOP_ID>/crm/tables?api_key=<api_key> HTTP/1.1


> Response

{ "data": { "table": { "name": "test", "label": "test", "auto_create_config": null, "can_remove": false, "creator_id": "6dcd3606-092a-467c-85d1-3149789cd470", "icon": null, "inserted_at": "2019-06-25T10:50:17.867Z", "updated_at": "2019-06-25T10:50:17.867Z", "show_fields": null, "sections": [
{
"can_remove": false,
"creator_id": null,
"fields": [
{
"name": "Name",
"label": "Name",
"agg_field_id": null,
"association_multi": true,
"association_table": null,
"association_type": null,
"can_remove": false,
"creator_id": null,
"select_options": [],
"summary_display_field_id": null,
"summary_field_id": null,
"summary_type": null,
"type": 5,
"order": 1,
"quick_update": false,
"is_require": true,
"is_unique": false,
"formulas": null
},
{
"name": "Phone",
"label": "Phone",
"agg_field_id": null,
"association_multi": true,
"association_table": null,
"association_type": null,
"can_remove": false,
"creator_id": null,
"select_options": [],
"summary_display_field_id": null,
"summary_field_id": null,
"summary_type": null,
"type": 2,
"order": 1,
"quick_update": false,
"is_require": true,
"is_unique": false,
"formulas": null
}
]
}
] }, "success": true } }


### Query Parameters

| Parameter | Required | Unique | Type |
| --- | --- | --- | --- |
| table.name | true | true | string |
| table.label | true | false | string |

## List of Profiles

GET /shops/<SHOP_ID>/crm/profile?api_key=<api_key> HTTP/1.1


> Response

{ "data": [
{
"can_remove": false,
"id": "994b620f-ebf6-4386-bea2-c37ed020aae4",
"is_admin": true,
"is_removed": false,
"name": "CEO",
"reports_to": null,
"role": 0,
"shop_id": 403
},
{
"can_remove": true,
"id": "7ffb87d1-63ed-405e-84f8-5587748889ea",
"is_admin": false,
"is_removed": false,
"name": "Manager",
"reports_to": "CEO",
"role": 0,
"shop_id": 403
},
{
"can_remove": true,
"id": "3a383661-6031-4ded-ad82-1a5e3e6cf760",
"is_admin": false,
"is_removed": false,
"name": "User",
"reports_to": "Manager",
"role": 0,
"shop_id": 403
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| shop\_id | int | Mã shop |
| name | string | Tên profile |
| reports\_to | string | Báo cáo cho |
| is\_admin | string | Admin |
| can\_remove | boolean | Được phép xóa |

## Record History

GET /shops/<SHOP_ID>/crm/<TABLE_NAME>/history?api_key=<api_key>&record_id=<record_id> HTTP/1.1


> Response

{ "history": [
{
"changes": [
{
"field_label": "Tag Pancake",
"new": "Mua hàng, Đã gửi",
"old": "Mua hàng"
}
],
"editor_id": "4eab0efc-2994-4b96-acf0-e4c847668555",
"id": "f673edbb-a008-46dd-a4df-bd4edbc8e41f",
"record_id": "42958b34-e30c-4126-b00e-e3abf9803de2",
"shop_id": 275,
"updated_at": "2022-07-21T07:43:49"
}
], "success": true }


### Response Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| changes.field\_label | string | Nhãn trường |
| changes.old | string | Giá trị cũ |
| changes.new | string | Giá trị mới |
| editor\_name | string | Người chỉnh sửa |

https://api-docs.pancake.vn/#
https://api-docs.pancake.vn/#gi-i-thieu
https://api-docs.pancake.vn/#c-u-hinh-chung
https://api-docs.pancake.vn/#moi-tr-ng
https://api-docs.pancake.vn/#xac-th-c-tai-kho-n
https://api-docs.pancake.vn/#t-o-api-key
https://api-docs.pancake.vn/#c-a-hang
https://api-docs.pancake.vn/#thong-tin-c-a-hang
https://api-docs.pancake.vn/#d-a-ch
https://api-docs.pancake.vn/#danh-sach-t-nh-thanh-ph
https://api-docs.pancake.vn/#danh-sach-qu-n-huy-n
https://api-docs.pancake.vn/#danh-sach-ph-ng-xa
https://api-docs.pancake.vn/#d-n-hang
https://api-docs.pancake.vn/#danh-sach-d-n-hang
https://api-docs.pancake.vn/#l-y-thong-tin-1-d-n-hang
https://api-docs.pancake.vn/#t-o-d-n-hang
https://api-docs.pancake.vn/#c-p-nh-t-d-n-hang
https://api-docs.pancake.vn/#danh-sach-ngu-n-d-n-hang
https://api-docs.pancake.vn/#l-y-lien-k-t-in-d-n
https://api-docs.pancake.vn/#l-y-lien-k-t-xac-nh-n-d-n-hang
https://api-docs.pancake.vn/#danh-sach-khuy-n-m-i-nang-cao-c-a-d-n
https://api-docs.pancake.vn/#thong-tin-d-n-hang
https://api-docs.pancake.vn/#advanced_platform_fee-1-0
https://api-docs.pancake.vn/#customer-1-1
https://api-docs.pancake.vn/#tags-1-2
https://api-docs.pancake.vn/#partner-1-3
https://api-docs.pancake.vn/#items-1-4
https://api-docs.pancake.vn/#shipping_address-1-5
https://api-docs.pancake.vn/#activated_promotion_advances-1-6
https://api-docs.pancake.vn/#tr-ng-thai-d-n-hang
https://api-docs.pancake.vn/#d-n-hang-d-i-tr
https://api-docs.pancake.vn/#danh-sach-d-n-hang-d-i-tr
https://api-docs.pancake.vn/#kho-hang
https://api-docs.pancake.vn/#t-o-kho-hang
https://api-docs.pancake.vn/#c-p-nh-t-kho-hang
https://api-docs.pancake.vn/#danh-sach-kho-hang
https://api-docs.pancake.vn/#danh-sach-nhan-vien
https://api-docs.pancake.vn/#response-parameters-5
https://api-docs.pancake.vn/#h-n-g-i-amp-nh-c-nh
https://api-docs.pancake.vn/#danh-sach-h-n-g-i-amp-nh-c-nh
https://api-docs.pancake.vn/#t-o-h-n-g-i-amp-nh-c-nh
https://api-docs.pancake.vn/#s-n-ph-m
https://api-docs.pancake.vn/#t-o-s-n-ph-m
https://api-docs.pancake.vn/#c-p-nh-t-thong-tin-s-n-ph-m
https://api-docs.pancake.vn/#c-p-nh-t-t-n-kho
https://api-docs.pancake.vn/#c-p-nh-t-t-n-kho-nhi-u-m-u-ma
https://api-docs.pancake.vn/#c-p-nh-t-s-n-ph-m-c-u-thanh
https://api-docs.pancake.vn/#danh-sach-s-n-ph-m
https://api-docs.pancake.vn/#danh-m-c-s-n-ph-m
https://api-docs.pancake.vn/#response-parameters-7
https://api-docs.pancake.vn/#nhom-d-n-v-tinh
https://api-docs.pancake.vn/#danh-sach-nhom-dvt
https://api-docs.pancake.vn/#danh-gia-tren-san-tmdt
https://api-docs.pancake.vn/#danh-sach-danh-gia
https://api-docs.pancake.vn/#khach-hang
https://api-docs.pancake.vn/#danh-sach-khach-hang
https://api-docs.pancake.vn/#t-o-khach-hang
https://api-docs.pancake.vn/#c-p-nh-t-khach-hang
https://api-docs.pancake.vn/#l-ch-s-di-m-th-ng-khach-hang
https://api-docs.pancake.vn/#t-o-khuy-n-mai-theo-khach-hang
https://api-docs.pancake.vn/#ghi-chu-trao-d-i-khach-hang
https://api-docs.pancake.vn/#danh-sach-ghi-chu
https://api-docs.pancake.vn/#them-ghi-chu
https://api-docs.pancake.vn/#c-p-d-khach-hang
https://api-docs.pancake.vn/#danh-sach-c-p-d-khach-hang
https://api-docs.pancake.vn/#thu-chi
https://api-docs.pancake.vn/#danh-sach-thu-chi
https://api-docs.pancake.vn/#t-o-phi-u-thu-chi
https://api-docs.pancake.vn/#t-o-chi-phi-qu-ng-cao
https://api-docs.pancake.vn/#bao-cao-thong-ke
https://api-docs.pancake.vn/#th-ng-ke-d-n-hang
https://api-docs.pancake.vn/#danh-sach-cong-th-c-tuy-ch-nh
https://api-docs.pancake.vn/#danh-sach-s-li-u-m-c-d-nh
https://api-docs.pancake.vn/#th-d-n-hang
https://api-docs.pancake.vn/#response-parameters-18
https://api-docs.pancake.vn/#phi-u-nh-p-kho
https://api-docs.pancake.vn/#danh-sach-phi-u-nh-p-kho
https://api-docs.pancake.vn/#t-o-phi-u-nh-p-kho
https://api-docs.pancake.vn/#c-p-nh-t-phi-u-nh-p-kho
https://api-docs.pancake.vn/#tach-phi-u-nh-p-kho
https://api-docs.pancake.vn/#phi-u-xu-t-kho
https://api-docs.pancake.vn/#danh-sach-phi-u-xu-t-kho
https://api-docs.pancake.vn/#t-o-phi-u-xu-t-kho
https://api-docs.pancake.vn/#c-p-nh-t-phi-u-xu-t
https://api-docs.pancake.vn/#hang-l-i-theo-phi-u-xu-t
https://api-docs.pancake.vn/#t-o-phi-u-xu-t-hang-l-i
https://api-docs.pancake.vn/#c-p-nh-t-phi-u-xu-t-hang-l-i
https://api-docs.pancake.vn/#chuy-n-kho
https://api-docs.pancake.vn/#danh-sach-chuy-n-kho
https://api-docs.pancake.vn/#t-o-phi-u-chuy-n-kho
https://api-docs.pancake.vn/#c-p-nh-t-phi-u-chuy-n-kho
https://api-docs.pancake.vn/#ki-m-hang
https://api-docs.pancake.vn/#danh-sach-ki-m-hang
https://api-docs.pancake.vn/#l-y-thong-tin-1-phi-u-ki-m-hang
https://api-docs.pancake.vn/#t-o-phi-u-ki-m-hang
https://api-docs.pancake.vn/#c-p-nh-t-ki-m-hang
https://api-docs.pancake.vn/#l-ch-s-xu-t-nh-p-kho
https://api-docs.pancake.vn/#query-parameters-34
https://api-docs.pancake.vn/#response-parameters-23
https://api-docs.pancake.vn/#phi-u-gi-m-gia
https://api-docs.pancake.vn/#danh-sach-phi-u-gi-m-gia
https://api-docs.pancake.vn/#l-y-thong-tin-phi-u-gi-m-gia
https://api-docs.pancake.vn/#t-o-phi-u-gi-m-gia
https://api-docs.pancake.vn/#t-o-hang-lo-t-phi-u-gi-m-gia
https://api-docs.pancake.vn/#khuy-n-mai
https://api-docs.pancake.vn/#danh-sach-khuy-n-mai
https://api-docs.pancake.vn/#t-o-khuy-n-mai
https://api-docs.pancake.vn/#c-p-nh-t-khuy-n-mai
https://api-docs.pancake.vn/#danh-sach-khuy-n-mai-nang-cao
https://api-docs.pancake.vn/#t-o-khuy-n-mai-nang-cao
https://api-docs.pancake.vn/#c-p-nh-t-khuy-n-mai-nang-cao
https://api-docs.pancake.vn/#combo-s-n-ph-m
https://api-docs.pancake.vn/#danh-sach-combo
https://api-docs.pancake.vn/#tinh-phi-v-n-chuy-n
https://api-docs.pancake.vn/#request-parameters-14
https://api-docs.pancake.vn/#response-parameters-26
https://api-docs.pancake.vn/#d-n-v-v-n-chuy-n
https://api-docs.pancake.vn/#response-parameters-27
https://api-docs.pancake.vn/#webhook
https://api-docs.pancake.vn/#c-u-hinh-webhook
https://api-docs.pancake.vn/#d-n-hang-2
https://api-docs.pancake.vn/#crm
https://api-docs.pancake.vn/#khach-hang-2
https://api-docs.pancake.vn/#t-n-kho
https://api-docs.pancake.vn/#crm-2
https://api-docs.pancake.vn/#list-of-tables
https://api-docs.pancake.vn/#data-of-table
https://api-docs.pancake.vn/#create-record
https://api-docs.pancake.vn/#update-record
https://api-docs.pancake.vn/#create-table
https://api-docs.pancake.vn/#list-of-profiles
https://api-docs.pancake.vn/#record-history
https://pos.pages.fm/
https://api-docs.pancake.vn/
https://api-docs.pancake.vn/en
https://api-docs.pancake.vn/#get-provinces
https://api-docs.pancake.vn/#get-districts
https://api-docs.pancake.vn/#get-warehouses
https://api-docs.pancake.vn/#get-variations
https://api-docs.pancake.vn/#get-district